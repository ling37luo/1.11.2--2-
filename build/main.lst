ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.global	__aeabi_f2d
  21              		.section	.rodata.Return_Lower_Motor_To_Initial_Position.str1.4,"aMS",%progbits,1
  22              		.align	2
  23              	.LC0:
  24 0000 52657475 		.ascii	"Returning lower motor to initial position: %.1f\302"
  24      726E696E 
  24      67206C6F 
  24      77657220 
  24      6D6F746F 
  25 0030 B00A00   		.ascii	"\260\012\000"
  26              		.section	.text.Return_Lower_Motor_To_Initial_Position,"ax",%progbits
  27              		.align	1
  28              		.global	Return_Lower_Motor_To_Initial_Position
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	Return_Lower_Motor_To_Initial_Position:
  34              	.LFB137:
   1:Core/Src/main.c **** /* USER CODE BEGIN Header */
   2:Core/Src/main.c **** /**
   3:Core/Src/main.c ****   ******************************************************************************
   4:Core/Src/main.c ****   * @file           : main.c
   5:Core/Src/main.c ****   * @brief          : Main program body
   6:Core/Src/main.c ****   ******************************************************************************
   7:Core/Src/main.c ****   * @attention
   8:Core/Src/main.c ****   *
   9:Core/Src/main.c ****   * Copyright (c) 2026 STMicroelectronics.
  10:Core/Src/main.c ****   * All rights reserved.
  11:Core/Src/main.c ****   *
  12:Core/Src/main.c ****   * This software is licensed under terms that can be found in the LICENSE file
  13:Core/Src/main.c ****   * in the root directory of this software component.
  14:Core/Src/main.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  15:Core/Src/main.c ****   *
  16:Core/Src/main.c ****   ******************************************************************************
  17:Core/Src/main.c ****   */
  18:Core/Src/main.c **** /* USER CODE END Header */
  19:Core/Src/main.c **** /* Includes ------------------------------------------------------------------*/
  20:Core/Src/main.c **** #include "main.h"
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 2


  21:Core/Src/main.c **** #include "can.h"
  22:Core/Src/main.c **** #include "gpio.h"
  23:Core/Src/main.c **** #include "pid.h"
  24:Core/Src/main.c **** /* Private includes ----------------------------------------------------------*/
  25:Core/Src/main.c **** /* USER CODE BEGIN Includes */
  26:Core/Src/main.c **** #include "can_bsp.h"
  27:Core/Src/main.c **** #include "motor_control.h"
  28:Core/Src/main.c **** #include <math.h>
  29:Core/Src/main.c **** #include <stdio.h>
  30:Core/Src/main.c **** /* USER CODE END Includes */
  31:Core/Src/main.c **** 
  32:Core/Src/main.c **** /* Private typedef -----------------------------------------------------------*/
  33:Core/Src/main.c **** /* USER CODE BEGIN PTD */
  34:Core/Src/main.c **** 
  35:Core/Src/main.c **** /* USER CODE END PTD */
  36:Core/Src/main.c **** 
  37:Core/Src/main.c **** /* Private define ------------------------------------------------------------*/
  38:Core/Src/main.c **** /* USER CODE BEGIN PD */
  39:Core/Src/main.c **** #define LOWER_MOTOR_ID    3
  40:Core/Src/main.c **** #define UPPER_MOTOR_ID    4
  41:Core/Src/main.c **** /* USER CODE END PD */
  42:Core/Src/main.c **** 
  43:Core/Src/main.c **** /* Private macro -------------------------------------------------------------*/
  44:Core/Src/main.c **** /* USER CODE BEGIN PM */
  45:Core/Src/main.c **** #define ANGLE_ACCUMULATION_THRESHOLD 2340.0f  // ç´¯è®¡è§’åº¦é˜ˆå€¼ (6.5åœˆ)
  46:Core/Src/main.c **** #define LOWER_MOTOR_SPEED  50.0f    // æ’å®šè½¬é€Ÿ (RPM)ä¸‹é¢ç”µæœºçš„ç§»åŠ¨é€Ÿåº¦ï¼Œå»ºè®®æ˜¯180
  47:Core/Src/main.c **** #define SMOOTH_TRANSITION_TIME 500   // å¹³æ»‘è¿‡æ¸¡æ—¶é—´ (ms)
  48:Core/Src/main.c **** #define UPPER_MOTOR_SPEED 30.0f   // ä¸Šç”µæœºç›®æ ‡é€Ÿåº¦(è¿™é‡Œè¦ä¹ˆç»™0è¦ä¹ˆç»™37)
  49:Core/Src/main.c **** #define KEY_DEBOUNCE_TIME  50       // æŒ‰é”®æ¶ˆæŠ–æ—¶é—´ (ms)
  50:Core/Src/main.c **** #define POSITION_RETURN_SPEED 120.0f // å½’ä½é€Ÿåº¦ (RPM)
  51:Core/Src/main.c **** /* USER CODE END PM */
  52:Core/Src/main.c **** 
  53:Core/Src/main.c **** /* Private variables ---------------------------------------------------------*/
  54:Core/Src/main.c **** 
  55:Core/Src/main.c **** extern GM6020_TypeDef gm6020_motors[4];
  56:Core/Src/main.c **** /* USER CODE BEGIN PV */
  57:Core/Src/main.c **** 
  58:Core/Src/main.c **** // æŒ‰é”®å¼•è„šå®šä¹‰ (æ ¹æ®å®žé™…ç¡¬ä»¶ä¿®æ”¹)
  59:Core/Src/main.c **** #define KEY_MODE_PIN GPIO_PIN_2    // PB2
  60:Core/Src/main.c **** #define KEY_MODE_GPIO GPIOB 
  61:Core/Src/main.c **** 
  62:Core/Src/main.c **** // æŽ§åˆ¶æ¨¡å¼æžšä¸¾
  63:Core/Src/main.c **** typedef enum {
  64:Core/Src/main.c ****     MODE_BOTH_MOVING,     // 0: ä¸ŠåŠ¨ä¸‹åŠ¨
  65:Core/Src/main.c ****     MODE_UPPER_MOVING,    // 1: ä¸ŠåŠ¨ä¸‹ä¸åŠ¨ (ä¸‹ç”µæœºå½’ä½)
  66:Core/Src/main.c ****     MODE_LOWER_MOVING,    // 2: ä¸Šä¸åŠ¨ä¸‹åŠ¨
  67:Core/Src/main.c ****     MODE_BOTH_STOPPED     // 3: ä¸Šä¸‹éƒ½ä¸åŠ¨
  68:Core/Src/main.c **** } ControlMode;
  69:Core/Src/main.c **** 
  70:Core/Src/main.c **** // ç”µæœºçŠ¶æ€æžšä¸¾
  71:Core/Src/main.c **** typedef enum {
  72:Core/Src/main.c ****     STATE_NORMAL,         // æ­£å¸¸è¿è¡Œ
  73:Core/Src/main.c ****     STATE_RETURNING       // è¿”å›žåˆå§‹ä½ç½®ä¸­
  74:Core/Src/main.c **** } MotorState;
  75:Core/Src/main.c **** 
  76:Core/Src/main.c **** // ç³»ç»ŸçŠ¶æ€
  77:Core/Src/main.c **** ControlMode current_mode = MODE_BOTH_MOVING; // åˆå§‹æ¨¡å¼
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 3


  78:Core/Src/main.c **** ControlMode target_mode = MODE_BOTH_MOVING;  // ç›®æ ‡æ¨¡å¼
  79:Core/Src/main.c **** uint8_t last_mode = MODE_BOTH_MOVING;        // ä¸Šæ¬¡æ¨¡å¼
  80:Core/Src/main.c **** uint32_t last_key_press = 0;                  // ä¸Šæ¬¡æŒ‰é”®æ—¶é—´
  81:Core/Src/main.c **** uint32_t mode_transition_start = 0;          // æ¨¡å¼åˆ‡æ¢å¼€å§‹æ—¶é—´
  82:Core/Src/main.c **** const uint32_t MODE_TRANSITION_TIME = 200;   // 200mså¹³æ»‘è¿‡æ¸¡
  83:Core/Src/main.c **** MotorState lower_motor_state = STATE_NORMAL; // ä¸‹ç”µæœºçŠ¶æ€
  84:Core/Src/main.c **** void Check_Key_Inputs(void);
  85:Core/Src/main.c **** void Prepare_Mode_Transition(ControlMode new_mode);
  86:Core/Src/main.c **** void Process_Mode_Transition(void);
  87:Core/Src/main.c **** void Configure_Motors_For_Mode(ControlMode mode);
  88:Core/Src/main.c **** void Update_Lower_Motor_Control(void);
  89:Core/Src/main.c **** void Return_Lower_Motor_To_Initial_Position(void);
  90:Core/Src/main.c **** void Brake_Upper_Motor(void);
  91:Core/Src/main.c **** void Reset_Upper_Motor_Position(void);
  92:Core/Src/main.c **** // ä½ç½®æŽ§åˆ¶
  93:Core/Src/main.c **** float lower_motor_initial_angle = 0.0f;      // ä¸‹ç”µæœºåˆå§‹è§’åº¦
  94:Core/Src/main.c **** float lower_motor_target_angle = 0.0f;       // ä¸‹ç”µæœºç›®æ ‡è§’åº¦
  95:Core/Src/main.c **** float lower_motor_speed = LOWER_MOTOR_SPEED; // ä¸‹ç”µæœºé€Ÿåº¦
  96:Core/Src/main.c **** 
  97:Core/Src/main.c **** // çŠ¶æ€æœºå˜é‡ (ä¸‹ç”µæœºè§’åº¦ç´¯è®¡)
  98:Core/Src/main.c **** typedef enum {
  99:Core/Src/main.c ****     ACCUM_POS,     // æ­£å‘ç´¯è®¡
 100:Core/Src/main.c ****     TRANS_NEG,     // è¿‡æ¸¡åˆ°è´Ÿå‘
 101:Core/Src/main.c ****     ACCUM_NEG,     // è´Ÿå‘ç´¯è®¡
 102:Core/Src/main.c ****     TRANS_POS      // è¿‡æ¸¡åˆ°æ­£å‘
 103:Core/Src/main.c **** } LowerMotorState;
 104:Core/Src/main.c **** LowerMotorState lower_state = ACCUM_POS;
 105:Core/Src/main.c **** float accumulated_angle = 0.0f;
 106:Core/Src/main.c **** uint32_t transition_start_time = 0;
 107:Core/Src/main.c **** /* USER CODE END PV */
 108:Core/Src/main.c **** 
 109:Core/Src/main.c **** /* Private function prototypes -----------------------------------------------*/
 110:Core/Src/main.c **** void SystemClock_Config(void);
 111:Core/Src/main.c **** /* USER CODE BEGIN PFP */
 112:Core/Src/main.c **** void Update_Lower_Motor_Control(void);
 113:Core/Src/main.c **** void Check_Key_Inputs(void);
 114:Core/Src/main.c **** void Return_Lower_Motor_To_Initial_Position(void);
 115:Core/Src/main.c **** void Brake_Upper_Motor(void);
 116:Core/Src/main.c **** /* USER CODE END PFP */
 117:Core/Src/main.c **** 
 118:Core/Src/main.c **** /* USER CODE BEGIN 0 */
 119:Core/Src/main.c **** /**
 120:Core/Src/main.c ****   * @brief åˆå§‹åŒ–æŒ‰é”®GPIO
 121:Core/Src/main.c ****   */
 122:Core/Src/main.c **** 
 123:Core/Src/main.c **** 
 124:Core/Src/main.c **** /**
 125:Core/Src/main.c ****   * @brief æ£€æµ‹æŒ‰é”®è¾“å…¥
 126:Core/Src/main.c ****   */
 127:Core/Src/main.c **** /**
 128:Core/Src/main.c ****   * @brief ä¸‹ç”µæœºè¿”å›žåˆå§‹ä½ç½®
 129:Core/Src/main.c ****   */
 130:Core/Src/main.c **** void Return_Lower_Motor_To_Initial_Position(void) {
  35              		.loc 1 130 51 view -0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 0
  38              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 4


 131:Core/Src/main.c ****     if (lower_motor_state == STATE_NORMAL) {
  39              		.loc 1 131 5 view .LVU1
  40              		.loc 1 131 27 is_stmt 0 view .LVU2
  41 0000 0E4B     		ldr	r3, .L8
  42 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  43              		.loc 1 131 8 view .LVU3
  44 0004 03B1     		cbz	r3, .L7
  45 0006 7047     		bx	lr
  46              	.L7:
 130:Core/Src/main.c ****     if (lower_motor_state == STATE_NORMAL) {
  47              		.loc 1 130 51 view .LVU4
  48 0008 10B5     		push	{r4, lr}
  49              	.LCFI0:
  50              		.cfi_def_cfa_offset 8
  51              		.cfi_offset 4, -8
  52              		.cfi_offset 14, -4
  53              	.LBB4:
 132:Core/Src/main.c ****         lower_motor_state = STATE_RETURNING;
  54              		.loc 1 132 9 is_stmt 1 view .LVU5
  55              		.loc 1 132 27 is_stmt 0 view .LVU6
  56 000a 0C4B     		ldr	r3, .L8
  57 000c 0122     		movs	r2, #1
  58 000e 1A70     		strb	r2, [r3]
 133:Core/Src/main.c ****         lower_motor_target_angle = lower_motor_initial_angle;
  59              		.loc 1 133 9 is_stmt 1 view .LVU7
  60              		.loc 1 133 34 is_stmt 0 view .LVU8
  61 0010 0B4C     		ldr	r4, .L8+4
  62 0012 94ED000A 		vldr.32	s0, [r4]
  63 0016 0B4B     		ldr	r3, .L8+8
  64 0018 83ED000A 		vstr.32	s0, [r3]
 134:Core/Src/main.c ****         
 135:Core/Src/main.c ****         //å¯ç”¨ä½ç½®æŽ§åˆ¶æ¨¡å¼ï¼ˆè€Œä¸æ˜¯é€Ÿåº¦æ¨¡å¼ï¼‰
 136:Core/Src/main.c ****         Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_POS_CASCADE, lower_motor_target_angle);
  65              		.loc 1 136 9 is_stmt 1 view .LVU9
  66 001c 0221     		movs	r1, #2
  67 001e 0320     		movs	r0, #3
  68 0020 FFF7FEFF 		bl	Motor_Set_Target
  69              	.LVL0:
 137:Core/Src/main.c ****         
 138:Core/Src/main.c ****         printf("Returning lower motor to initial position: %.1fÂ°\n", lower_motor_initial_angle);
  70              		.loc 1 138 9 view .LVU10
  71 0024 2068     		ldr	r0, [r4]	@ float
  72 0026 FFF7FEFF 		bl	__aeabi_f2d
  73              	.LVL1:
  74 002a 0246     		mov	r2, r0
  75 002c 0B46     		mov	r3, r1
  76 002e 0648     		ldr	r0, .L8+12
  77 0030 FFF7FEFF 		bl	printf
  78              	.LVL2:
 139:Core/Src/main.c ****         
 140:Core/Src/main.c ****         //é‡ç½®PIDçŠ¶æ€ï¼Œé˜²æ­¢ç§¯åˆ†é¥±å’Œ
 141:Core/Src/main.c ****         GM6020_TypeDef *motor = &gm6020_motors[LOWER_MOTOR_ID-1];
  79              		.loc 1 141 9 view .LVU11
 142:Core/Src/main.c ****         PID_Clear(&motor->angle_pid);
  80              		.loc 1 142 9 view .LVU12
  81 0034 0548     		ldr	r0, .L8+16
  82 0036 FFF7FEFF 		bl	PID_Clear
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 5


  83              	.LVL3:
  84              	.LBE4:
 143:Core/Src/main.c ****     }
 144:Core/Src/main.c **** }
  85              		.loc 1 144 1 is_stmt 0 view .LVU13
  86 003a 10BD     		pop	{r4, pc}
  87              	.L9:
  88              		.align	2
  89              	.L8:
  90 003c 00000000 		.word	lower_motor_state
  91 0040 00000000 		.word	lower_motor_initial_angle
  92 0044 00000000 		.word	lower_motor_target_angle
  93 0048 00000000 		.word	.LC0
  94 004c 4C020000 		.word	gm6020_motors+588
  95              		.cfi_endproc
  96              	.LFE137:
  98              		.section	.rodata.Reset_Upper_Motor_Position.str1.4,"aMS",%progbits,1
  99              		.align	2
 100              	.LC1:
 101 0000 55707065 		.ascii	"Upper motor reset position saved: %.1f\302\260\012\000"
 101      72206D6F 
 101      746F7220 
 101      72657365 
 101      7420706F 
 102 002a 0000     		.align	2
 103              	.LC2:
 104 002c 5B557070 		.ascii	"[Upper] RESET MODE: Target=%.1f\302\260, Current=%."
 104      65725D20 
 104      52455345 
 104      54204D4F 
 104      44453A20 
 105 0059 3166C2B0 		.ascii	"1f\302\260, Error=%.1f\302\260\012\000"
 105      2C204572 
 105      726F723D 
 105      252E3166 
 105      C2B00A00 
 106              		.section	.text.Reset_Upper_Motor_Position,"ax",%progbits
 107              		.align	1
 108              		.global	Reset_Upper_Motor_Position
 109              		.syntax unified
 110              		.thumb
 111              		.thumb_func
 113              	Reset_Upper_Motor_Position:
 114              	.LFB142:
 145:Core/Src/main.c **** /* USER CODE BEGIN PD */
 146:Core/Src/main.c **** #define UPPER_MOTOR_RETURN_POSITION 0.0f    // ä¸Šç”µæœºå½’ä½è§’åº¦ (å¯æ ¹æ®å®žé™…è°ƒæ•´)
 147:Core/Src/main.c **** #define UPPER_MOTOR_POS_KP 8.0f             // ä½ç½®çŽ¯På‚æ•° (å¢žå¼ºæŠ—å¹²æ‰°)
 148:Core/Src/main.c **** #define UPPER_MOTOR_POS_KI 0.0f
 149:Core/Src/main.c **** #define UPPER_MOTOR_POS_KD 0.0f
 150:Core/Src/main.c **** #define UPPER_MOTOR_POS_MAX_SPEED 100.0f    // ä½ç½®çŽ¯æœ€å¤§é€Ÿåº¦
 151:Core/Src/main.c **** /* USER CODE END PD */
 152:Core/Src/main.c **** 
 153:Core/Src/main.c **** /* USER CODE BEGIN PV */
 154:Core/Src/main.c **** // æ–°å¢žä¸Šç”µæœºçŠ¶æ€
 155:Core/Src/main.c **** float upper_motor_target_angle = 0.0f;     // ä¸Šç”µæœºç›®æ ‡è§’åº¦
 156:Core/Src/main.c **** uint8_t upper_motor_needs_reset = 0;       // æ˜¯å¦éœ€è¦å¤ä½æ ‡å¿—
 157:Core/Src/main.c **** /* USER CODE END PV */
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 6


 158:Core/Src/main.c **** // å…¨å±€çŠ¶æ€å˜é‡
 159:Core/Src/main.c **** 
 160:Core/Src/main.c **** void Check_Key_Inputs(void) {
 161:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 162:Core/Src/main.c ****     
 163:Core/Src/main.c ****     if (HAL_GPIO_ReadPin(KEY_MODE_GPIO, KEY_MODE_PIN) == GPIO_PIN_SET) {
 164:Core/Src/main.c ****         if (current_time - last_key_press > KEY_DEBOUNCE_TIME) {
 165:Core/Src/main.c ****             last_key_press = current_time;
 166:Core/Src/main.c ****             
 167:Core/Src/main.c ****             // ä»…åœ¨çŠ¶æ€ç¨³å®šæ—¶æŽ¥å—æ–°æŒ‡ä»¤
 168:Core/Src/main.c ****             if (current_mode == target_mode) {
 169:Core/Src/main.c ****                 target_mode = (ControlMode)((current_mode + 1) % 4);
 170:Core/Src/main.c ****                 mode_transition_start = current_time;
 171:Core/Src/main.c ****                 printf("=== REQUESTING MODE CHANGE: %d ===\n", target_mode);
 172:Core/Src/main.c ****                 
 173:Core/Src/main.c ****                 // å‡†å¤‡æ¨¡å¼åˆ‡æ¢
 174:Core/Src/main.c ****                 Prepare_Mode_Transition(target_mode);
 175:Core/Src/main.c ****             }
 176:Core/Src/main.c ****         }
 177:Core/Src/main.c ****     }
 178:Core/Src/main.c **** }
 179:Core/Src/main.c **** 
 180:Core/Src/main.c **** void Prepare_Mode_Transition(ControlMode new_mode) {
 181:Core/Src/main.c ****     GM6020_TypeDef *lower_motor = &gm6020_motors[LOWER_MOTOR_ID-1];
 182:Core/Src/main.c ****     GM6020_TypeDef *upper_motor = &gm6020_motors[UPPER_MOTOR_ID-1];
 183:Core/Src/main.c ****     
 184:Core/Src/main.c ****     switch (new_mode) {
 185:Core/Src/main.c ****         case MODE_BOTH_MOVING:
 186:Core/Src/main.c ****             // ç¡®ä¿ä¸¤ç”µæœºéƒ½åœ¨é€Ÿåº¦æ¨¡å¼
 187:Core/Src/main.c ****             if (lower_motor_state == STATE_RETURNING) {
 188:Core/Src/main.c ****                 lower_motor_state = STATE_NORMAL;
 189:Core/Src/main.c ****             }
 190:Core/Src/main.c ****             upper_motor_needs_reset = 1;
 191:Core/Src/main.c ****             break;
 192:Core/Src/main.c ****             
 193:Core/Src/main.c ****         case MODE_UPPER_MOVING:
 194:Core/Src/main.c ****             // ä¸‹ç”µæœºå½’ä½ï¼Œä¸Šç”µæœºé€Ÿåº¦æŽ§åˆ¶
 195:Core/Src/main.c ****             if (lower_motor_state != STATE_RETURNING) {
 196:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 197:Core/Src/main.c ****             }
 198:Core/Src/main.c ****             Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, UPPER_MOTOR_SPEED);
 199:Core/Src/main.c ****             break;
 200:Core/Src/main.c ****             
 201:Core/Src/main.c ****         case MODE_LOWER_MOVING:
 202:Core/Src/main.c ****             // ä¸Šç”µæœºåˆ¶åŠ¨ï¼Œä¸‹ç”µæœºé€Ÿåº¦æŽ§åˆ¶
 203:Core/Src/main.c ****             Brake_Upper_Motor();
 204:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 205:Core/Src/main.c ****             break;
 206:Core/Src/main.c ****             
 207:Core/Src/main.c ****         case MODE_BOTH_STOPPED:
 208:Core/Src/main.c ****             // ä¸¤ç”µæœºéƒ½è¿›å…¥ä¿æŒæ¨¡å¼
 209:Core/Src/main.c ****             Brake_Upper_Motor();
 210:Core/Src/main.c ****             if (lower_motor_state != STATE_RETURNING) {
 211:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 212:Core/Src/main.c ****             }
 213:Core/Src/main.c ****             break;
 214:Core/Src/main.c ****     }
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 7


 215:Core/Src/main.c **** }
 216:Core/Src/main.c **** 
 217:Core/Src/main.c **** // åœ¨ä¸»å¾ªçŽ¯ä¸­è°ƒç”¨
 218:Core/Src/main.c **** void Process_Mode_Transition(void) {
 219:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 220:Core/Src/main.c ****     
 221:Core/Src/main.c ****     if (current_mode != target_mode && 
 222:Core/Src/main.c ****         current_time - mode_transition_start > MODE_TRANSITION_TIME) {
 223:Core/Src/main.c ****         
 224:Core/Src/main.c ****         // ç¡®è®¤æ¨¡å¼åˆ‡æ¢
 225:Core/Src/main.c ****         current_mode = target_mode;
 226:Core/Src/main.c ****         printf("=== MODE TRANSITION COMPLETE: %d ===\n", current_mode);
 227:Core/Src/main.c ****         
 228:Core/Src/main.c ****         // æ ¹æ®æ¨¡å¼è®¾ç½®ç”µæœºæŽ§åˆ¶
 229:Core/Src/main.c ****         Configure_Motors_For_Mode(current_mode);
 230:Core/Src/main.c ****     }
 231:Core/Src/main.c **** }
 232:Core/Src/main.c **** 
 233:Core/Src/main.c **** void Configure_Motors_For_Mode(ControlMode mode) {
 234:Core/Src/main.c ****     switch (mode) {
 235:Core/Src/main.c ****         case MODE_BOTH_MOVING:
 236:Core/Src/main.c ****             Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, UPPER_MOTOR_SPEED);
 237:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 238:Core/Src/main.c ****             break;
 239:Core/Src/main.c ****             
 240:Core/Src/main.c ****         case MODE_UPPER_MOVING:
 241:Core/Src/main.c ****             // ä¸‹ç”µæœºåˆ¶åŠ¨ä¿æŒä½ç½®
 242:Core/Src/main.c ****             if (lower_motor_state == STATE_NORMAL) {
 243:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 244:Core/Src/main.c ****             }
 245:Core/Src/main.c ****             Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, UPPER_MOTOR_SPEED);
 246:Core/Src/main.c ****             break;
 247:Core/Src/main.c ****             
 248:Core/Src/main.c ****         case MODE_LOWER_MOVING:
 249:Core/Src/main.c ****             // ä¸Šç”µæœºè¿›å…¥ä½ç½®ä¿æŒæ¨¡å¼
 250:Core/Src/main.c ****             Reset_Upper_Motor_Position();
 251:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 252:Core/Src/main.c ****             break;
 253:Core/Src/main.c ****             
 254:Core/Src/main.c ****         case MODE_BOTH_STOPPED:
 255:Core/Src/main.c ****             Reset_Upper_Motor_Position();
 256:Core/Src/main.c ****             if (lower_motor_state == STATE_NORMAL) {
 257:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 258:Core/Src/main.c ****             }
 259:Core/Src/main.c ****             break;
 260:Core/Src/main.c ****     }
 261:Core/Src/main.c **** }
 262:Core/Src/main.c **** /* USER CODE BEGIN PFP */
 263:Core/Src/main.c **** void Reset_Upper_Motor_Position(void);
 264:Core/Src/main.c **** /* USER CODE END PFP */
 265:Core/Src/main.c **** 
 266:Core/Src/main.c **** /* USER CODE BEGIN 0 */
 267:Core/Src/main.c **** /**
 268:Core/Src/main.c ****   * @brief ä¸Šç”µæœºä½ç½®å¤ä½ (ä¼˜åŒ–ç‰ˆ)
 269:Core/Src/main.c ****   * å½“ç»™0é€Ÿåº¦æ—¶ï¼Œä½¿ç”¨ä½ç½®é—­çŽ¯æŽ§åˆ¶ï¼Œå³ä½¿è¢«æ‰“ä¸­ä¹Ÿä¼šè‡ªåŠ¨å›žåˆ°ç›®æ ‡ä½ç½®
 270:Core/Src/main.c ****   */
 271:Core/Src/main.c ****  
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 8


 272:Core/Src/main.c **** void Reset_Upper_Motor_Position(void) {
 115              		.loc 1 272 39 is_stmt 1 view -0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119 0000 30B5     		push	{r4, r5, lr}
 120              	.LCFI1:
 121              		.cfi_def_cfa_offset 12
 122              		.cfi_offset 4, -12
 123              		.cfi_offset 5, -8
 124              		.cfi_offset 14, -4
 125 0002 2DED028B 		vpush.64	{d8}
 126              	.LCFI2:
 127              		.cfi_def_cfa_offset 20
 128              		.cfi_offset 80, -20
 129              		.cfi_offset 81, -16
 130 0006 85B0     		sub	sp, sp, #20
 131              	.LCFI3:
 132              		.cfi_def_cfa_offset 40
 273:Core/Src/main.c ****     GM6020_TypeDef *upper_motor = &gm6020_motors[UPPER_MOTOR_ID-1];
 133              		.loc 1 273 5 view .LVU15
 134              	.LVL4:
 274:Core/Src/main.c ****     
 275:Core/Src/main.c ****     // ä¿å­˜å½“å‰è§’åº¦ä½œä¸ºç›®æ ‡ä½ç½® (åªåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶ä¿å­˜)
 276:Core/Src/main.c ****     if (upper_motor_needs_reset) {
 135              		.loc 1 276 5 view .LVU16
 136              		.loc 1 276 9 is_stmt 0 view .LVU17
 137 0008 384B     		ldr	r3, .L22
 138 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 139              		.loc 1 276 8 view .LVU18
 140 000c FBB9     		cbnz	r3, .L19
 141              	.L11:
 277:Core/Src/main.c ****         upper_motor_target_angle = upper_motor->total_angle;
 278:Core/Src/main.c ****         upper_motor_needs_reset = 0;
 279:Core/Src/main.c ****         printf("Upper motor reset position saved: %.1fÂ°\n", upper_motor_target_angle);
 280:Core/Src/main.c ****         
 281:Core/Src/main.c ****     // ä½ç½®çŽ¯PIDå‚æ•°ä¼˜åŒ– (å¢žå¼ºæŠ—å¹²æ‰°èƒ½åŠ›)
 282:Core/Src/main.c ****     PID_Init(&upper_motor->angle_pid, 
 283:Core/Src/main.c ****             3.0f,    // âœ… Kpä»Ž8.0â†’3.0ï¼Œå‡å°‘è¶…è°ƒ
 284:Core/Src/main.c ****             0.02f,   // âœ… Kiä»Ž0.0â†’0.02ï¼Œæ¶ˆé™¤é™å·®
 285:Core/Src/main.c ****             0.1f,    // âœ… Kd=0.1ï¼ŒæŠ‘åˆ¶æŒ¯è¡
 286:Core/Src/main.c ****             50.0f,   // âœ… MaxSpeedä»Ž100â†’50ï¼Œé™åˆ¶æœ€å¤§é€Ÿåº¦
 287:Core/Src/main.c ****             1000.0f, // âœ… ç§¯åˆ†é™å¹…
 288:Core/Src/main.c ****             2.0f); // 0.5Â°æ­»åŒº
 289:Core/Src/main.c ****     }
 290:Core/Src/main.c ****     
 291:Core/Src/main.c ****      // âœ… æ™ºèƒ½æ­»åŒºå¤„ç†
 292:Core/Src/main.c ****     float angle_error = upper_motor_target_angle - upper_motor->total_angle;
 142              		.loc 1 292 5 is_stmt 1 view .LVU19
 143              		.loc 1 292 50 is_stmt 0 view .LVU20
 144 000e 384B     		ldr	r3, .L22+4
 145 0010 93ED000A 		vldr.32	s0, [r3]
 146              		.loc 1 292 63 view .LVU21
 147 0014 374B     		ldr	r3, .L22+8
 148 0016 D3EDBE7A 		vldr.32	s15, [r3, #760]
 149              		.loc 1 292 11 view .LVU22
 150 001a 70EE677A 		vsub.f32	s15, s0, s15
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 9


 151              	.LVL5:
 293:Core/Src/main.c ****     if (fabsf(angle_error) < 2.0f) {
 152              		.loc 1 293 5 is_stmt 1 view .LVU23
 153              		.loc 1 293 9 is_stmt 0 view .LVU24
 154 001e F0EEE77A 		vabs.f32	s15, s15
 155              	.LVL6:
 156              		.loc 1 293 8 view .LVU25
 157 0022 B0EE007A 		vmov.f32	s14, #2.0e+0
 158 0026 F4EEC77A 		vcmpe.f32	s15, s14
 159 002a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 160 002e 35D5     		bpl	.L17
 294:Core/Src/main.c ****         // åœ¨æ­»åŒºå†…ï¼Œä½¿ç”¨å°ç”µæµä¿æŒä½ç½®
 295:Core/Src/main.c ****         if (upper_motor->mode != MOTOR_MODE_CURRENT_OPEN) {
 161              		.loc 1 295 9 is_stmt 1 view .LVU26
 162              		.loc 1 295 24 is_stmt 0 view .LVU27
 163 0030 93F8E932 		ldrb	r3, [r3, #745]	@ zero_extendqisi2
 164              	.LVL7:
 165              		.loc 1 295 12 view .LVU28
 166 0034 5BBB     		cbnz	r3, .L20
 167              	.LVL8:
 168              	.L14:
 296:Core/Src/main.c ****             // é€æ¸é™ä½Žåˆ°ä¿æŒç”µæµ
 297:Core/Src/main.c ****             static float brake_current = 200.0f; // 200mAä¿æŒåŠ›
 298:Core/Src/main.c ****             Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, brake_current);
 299:Core/Src/main.c ****         }
 300:Core/Src/main.c ****     } else {
 301:Core/Src/main.c ****         // ä½¿ç”¨ä½ç½®é—­çŽ¯æŽ§åˆ¶
 302:Core/Src/main.c ****         Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_POS_CASCADE, upper_motor_target_angle);
 303:Core/Src/main.c ****     }
 304:Core/Src/main.c ****     static uint32_t last_debug = 0;
 169              		.loc 1 304 5 is_stmt 1 view .LVU29
 305:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 170              		.loc 1 305 5 view .LVU30
 171              		.loc 1 305 29 is_stmt 0 view .LVU31
 172 0036 FFF7FEFF 		bl	HAL_GetTick
 173              	.LVL9:
 306:Core/Src/main.c ****     if (current_time - last_debug > 500) {
 174              		.loc 1 306 5 is_stmt 1 view .LVU32
 175              		.loc 1 306 22 is_stmt 0 view .LVU33
 176 003a 2F4B     		ldr	r3, .L22+12
 177 003c 1B68     		ldr	r3, [r3]
 178 003e C31A     		subs	r3, r0, r3
 179              		.loc 1 306 8 view .LVU34
 180 0040 B3F5FA7F 		cmp	r3, #500
 181 0044 2FD8     		bhi	.L21
 182              	.LVL10:
 183              	.L10:
 307:Core/Src/main.c ****         last_debug = current_time;
 308:Core/Src/main.c ****         float angle_error = upper_motor_target_angle - upper_motor->total_angle;
 309:Core/Src/main.c ****         printf("[Upper] RESET MODE: Target=%.1fÂ°, Current=%.1fÂ°, Error=%.1fÂ°\n",
 310:Core/Src/main.c ****                upper_motor_target_angle, upper_motor->total_angle, angle_error);
 311:Core/Src/main.c ****     }
 312:Core/Src/main.c **** }
 184              		.loc 1 312 1 view .LVU35
 185 0046 05B0     		add	sp, sp, #20
 186              	.LCFI4:
 187              		.cfi_remember_state
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 10


 188              		.cfi_def_cfa_offset 20
 189              		@ sp needed
 190 0048 BDEC028B 		vldm	sp!, {d8}
 191              	.LCFI5:
 192              		.cfi_restore 80
 193              		.cfi_restore 81
 194              		.cfi_def_cfa_offset 12
 195 004c 30BD     		pop	{r4, r5, pc}
 196              	.LVL11:
 197              	.L19:
 198              	.LCFI6:
 199              		.cfi_restore_state
 277:Core/Src/main.c ****         upper_motor_needs_reset = 0;
 200              		.loc 1 277 9 is_stmt 1 view .LVU36
 277:Core/Src/main.c ****         upper_motor_needs_reset = 0;
 201              		.loc 1 277 47 is_stmt 0 view .LVU37
 202 004e 294C     		ldr	r4, .L22+8
 203 0050 D4F8F802 		ldr	r0, [r4, #760]	@ float
 277:Core/Src/main.c ****         upper_motor_needs_reset = 0;
 204              		.loc 1 277 34 view .LVU38
 205 0054 264B     		ldr	r3, .L22+4
 206 0056 1860     		str	r0, [r3]	@ float
 278:Core/Src/main.c ****         printf("Upper motor reset position saved: %.1fÂ°\n", upper_motor_target_angle);
 207              		.loc 1 278 9 is_stmt 1 view .LVU39
 278:Core/Src/main.c ****         printf("Upper motor reset position saved: %.1fÂ°\n", upper_motor_target_angle);
 208              		.loc 1 278 33 is_stmt 0 view .LVU40
 209 0058 244B     		ldr	r3, .L22
 210 005a 0022     		movs	r2, #0
 211 005c 1A70     		strb	r2, [r3]
 279:Core/Src/main.c ****         
 212              		.loc 1 279 9 is_stmt 1 view .LVU41
 213 005e FFF7FEFF 		bl	__aeabi_f2d
 214              	.LVL12:
 215 0062 0246     		mov	r2, r0
 216 0064 0B46     		mov	r3, r1
 217 0066 2548     		ldr	r0, .L22+16
 218 0068 FFF7FEFF 		bl	printf
 219              	.LVL13:
 282:Core/Src/main.c ****             3.0f,    // âœ… Kpä»Ž8.0â†’3.0ï¼Œå‡å°‘è¶…è°ƒ
 220              		.loc 1 282 5 view .LVU42
 221 006c F0EE002A 		vmov.f32	s5, #2.0e+0
 222 0070 9FED232A 		vldr.32	s4, .L22+20
 223 0074 DFED231A 		vldr.32	s3, .L22+24
 224 0078 9FED231A 		vldr.32	s2, .L22+28
 225 007c DFED230A 		vldr.32	s1, .L22+32
 226 0080 B0EE080A 		vmov.f32	s0, #3.0e+0
 227 0084 04F55170 		add	r0, r4, #836
 228 0088 FFF7FEFF 		bl	PID_Init
 229              	.LVL14:
 230 008c BFE7     		b	.L11
 231              	.LVL15:
 232              	.L20:
 233              	.LBB5:
 297:Core/Src/main.c ****             Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, brake_current);
 234              		.loc 1 297 13 view .LVU43
 298:Core/Src/main.c ****         }
 235              		.loc 1 298 13 view .LVU44
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 11


 236 008e 9FED200A 		vldr.32	s0, .L22+36
 237              	.LVL16:
 298:Core/Src/main.c ****         }
 238              		.loc 1 298 13 is_stmt 0 view .LVU45
 239 0092 0021     		movs	r1, #0
 240 0094 0420     		movs	r0, #4
 241 0096 FFF7FEFF 		bl	Motor_Set_Target
 242              	.LVL17:
 298:Core/Src/main.c ****         }
 243              		.loc 1 298 13 view .LVU46
 244 009a CCE7     		b	.L14
 245              	.LVL18:
 246              	.L17:
 298:Core/Src/main.c ****         }
 247              		.loc 1 298 13 view .LVU47
 248              	.LBE5:
 302:Core/Src/main.c ****     }
 249              		.loc 1 302 9 is_stmt 1 view .LVU48
 250 009c 0221     		movs	r1, #2
 251 009e 0420     		movs	r0, #4
 252 00a0 FFF7FEFF 		bl	Motor_Set_Target
 253              	.LVL19:
 302:Core/Src/main.c ****     }
 254              		.loc 1 302 9 is_stmt 0 view .LVU49
 255 00a4 C7E7     		b	.L14
 256              	.LVL20:
 257              	.L21:
 258              	.LBB6:
 307:Core/Src/main.c ****         float angle_error = upper_motor_target_angle - upper_motor->total_angle;
 259              		.loc 1 307 9 is_stmt 1 view .LVU50
 307:Core/Src/main.c ****         float angle_error = upper_motor_target_angle - upper_motor->total_angle;
 260              		.loc 1 307 20 is_stmt 0 view .LVU51
 261 00a6 144B     		ldr	r3, .L22+12
 262 00a8 1860     		str	r0, [r3]
 308:Core/Src/main.c ****         printf("[Upper] RESET MODE: Target=%.1fÂ°, Current=%.1fÂ°, Error=%.1fÂ°\n",
 263              		.loc 1 308 9 is_stmt 1 view .LVU52
 308:Core/Src/main.c ****         printf("[Upper] RESET MODE: Target=%.1fÂ°, Current=%.1fÂ°, Error=%.1fÂ°\n",
 264              		.loc 1 308 54 is_stmt 0 view .LVU53
 265 00aa 114B     		ldr	r3, .L22+4
 266 00ac D3ED007A 		vldr.32	s15, [r3]
 308:Core/Src/main.c ****         printf("[Upper] RESET MODE: Target=%.1fÂ°, Current=%.1fÂ°, Error=%.1fÂ°\n",
 267              		.loc 1 308 67 view .LVU54
 268 00b0 104B     		ldr	r3, .L22+8
 269 00b2 93EDBE8A 		vldr.32	s16, [r3, #760]
 308:Core/Src/main.c ****         printf("[Upper] RESET MODE: Target=%.1fÂ°, Current=%.1fÂ°, Error=%.1fÂ°\n",
 270              		.loc 1 308 15 view .LVU55
 271 00b6 77EEC88A 		vsub.f32	s17, s15, s16
 272              	.LVL21:
 309:Core/Src/main.c ****                upper_motor_target_angle, upper_motor->total_angle, angle_error);
 273              		.loc 1 309 9 is_stmt 1 view .LVU56
 274 00ba 17EE900A 		vmov	r0, s15
 275              	.LVL22:
 309:Core/Src/main.c ****                upper_motor_target_angle, upper_motor->total_angle, angle_error);
 276              		.loc 1 309 9 is_stmt 0 view .LVU57
 277 00be FFF7FEFF 		bl	__aeabi_f2d
 278              	.LVL23:
 309:Core/Src/main.c ****                upper_motor_target_angle, upper_motor->total_angle, angle_error);
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 12


 279              		.loc 1 309 9 view .LVU58
 280 00c2 0446     		mov	r4, r0
 281 00c4 0D46     		mov	r5, r1
 282 00c6 18EE900A 		vmov	r0, s17
 283 00ca FFF7FEFF 		bl	__aeabi_f2d
 284              	.LVL24:
 285 00ce CDE90201 		strd	r0, [sp, #8]
 286 00d2 18EE100A 		vmov	r0, s16
 287 00d6 FFF7FEFF 		bl	__aeabi_f2d
 288              	.LVL25:
 289 00da CDE90001 		strd	r0, [sp]
 290 00de 2246     		mov	r2, r4
 291 00e0 2B46     		mov	r3, r5
 292 00e2 0C48     		ldr	r0, .L22+40
 293 00e4 FFF7FEFF 		bl	printf
 294              	.LVL26:
 295              	.LBE6:
 296              		.loc 1 312 1 view .LVU59
 297 00e8 ADE7     		b	.L10
 298              	.L23:
 299 00ea 00BF     		.align	2
 300              	.L22:
 301 00ec 00000000 		.word	upper_motor_needs_reset
 302 00f0 00000000 		.word	upper_motor_target_angle
 303 00f4 00000000 		.word	gm6020_motors
 304 00f8 00000000 		.word	last_debug.2
 305 00fc 00000000 		.word	.LC1
 306 0100 00007A44 		.word	1148846080
 307 0104 00004842 		.word	1112014848
 308 0108 CDCCCC3D 		.word	1036831949
 309 010c 0AD7A33C 		.word	1017370378
 310 0110 00004843 		.word	1128792064
 311 0114 2C000000 		.word	.LC2
 312              		.cfi_endproc
 313              	.LFE142:
 315              		.section	.text.Configure_Motors_For_Mode,"ax",%progbits
 316              		.align	1
 317              		.global	Configure_Motors_For_Mode
 318              		.syntax unified
 319              		.thumb
 320              		.thumb_func
 322              	Configure_Motors_For_Mode:
 323              	.LVL27:
 324              	.LFB141:
 233:Core/Src/main.c ****     switch (mode) {
 325              		.loc 1 233 50 is_stmt 1 view -0
 326              		.cfi_startproc
 327              		@ args = 0, pretend = 0, frame = 0
 328              		@ frame_needed = 0, uses_anonymous_args = 0
 233:Core/Src/main.c ****     switch (mode) {
 329              		.loc 1 233 50 is_stmt 0 view .LVU61
 330 0000 08B5     		push	{r3, lr}
 331              	.LCFI7:
 332              		.cfi_def_cfa_offset 8
 333              		.cfi_offset 3, -8
 334              		.cfi_offset 14, -4
 234:Core/Src/main.c ****         case MODE_BOTH_MOVING:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 13


 335              		.loc 1 234 5 is_stmt 1 view .LVU62
 336 0002 0328     		cmp	r0, #3
 337 0004 0FD8     		bhi	.L24
 338 0006 DFE800F0 		tbb	[pc, r0]
 339              	.L27:
 340 000a 02       		.byte	(.L30-.L27)/2
 341 000b 0F       		.byte	(.L29-.L27)/2
 342 000c 20       		.byte	(.L28-.L27)/2
 343 000d 29       		.byte	(.L26-.L27)/2
 344              		.p2align 1
 345              	.L30:
 236:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 346              		.loc 1 236 13 view .LVU63
 347 000e B3EE0E0A 		vmov.f32	s0, #3.0e+1
 348 0012 0121     		movs	r1, #1
 349 0014 0420     		movs	r0, #4
 350              	.LVL28:
 236:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 351              		.loc 1 236 13 is_stmt 0 view .LVU64
 352 0016 FFF7FEFF 		bl	Motor_Set_Target
 353              	.LVL29:
 237:Core/Src/main.c ****             break;
 354              		.loc 1 237 13 is_stmt 1 view .LVU65
 355 001a 9FED170A 		vldr.32	s0, .L35
 356 001e 0121     		movs	r1, #1
 357 0020 0320     		movs	r0, #3
 358 0022 FFF7FEFF 		bl	Motor_Set_Target
 359              	.LVL30:
 238:Core/Src/main.c ****             
 360              		.loc 1 238 13 view .LVU66
 361              	.L24:
 261:Core/Src/main.c **** /* USER CODE BEGIN PFP */
 362              		.loc 1 261 1 is_stmt 0 view .LVU67
 363 0026 08BD     		pop	{r3, pc}
 364              	.LVL31:
 365              	.L29:
 242:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 366              		.loc 1 242 13 is_stmt 1 view .LVU68
 242:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 367              		.loc 1 242 35 is_stmt 0 view .LVU69
 368 0028 144B     		ldr	r3, .L35+4
 369 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 242:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 370              		.loc 1 242 16 view .LVU70
 371 002c 33B1     		cbz	r3, .L34
 372              	.LVL32:
 373              	.L31:
 245:Core/Src/main.c ****             break;
 374              		.loc 1 245 13 is_stmt 1 view .LVU71
 375 002e B3EE0E0A 		vmov.f32	s0, #3.0e+1
 376 0032 0121     		movs	r1, #1
 377 0034 0420     		movs	r0, #4
 378 0036 FFF7FEFF 		bl	Motor_Set_Target
 379              	.LVL33:
 246:Core/Src/main.c ****             
 380              		.loc 1 246 13 view .LVU72
 381 003a F4E7     		b	.L24
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 14


 382              	.LVL34:
 383              	.L34:
 243:Core/Src/main.c ****             }
 384              		.loc 1 243 17 view .LVU73
 385 003c 9FED100A 		vldr.32	s0, .L35+8
 386 0040 0021     		movs	r1, #0
 387 0042 0320     		movs	r0, #3
 388              	.LVL35:
 243:Core/Src/main.c ****             }
 389              		.loc 1 243 17 is_stmt 0 view .LVU74
 390 0044 FFF7FEFF 		bl	Motor_Set_Target
 391              	.LVL36:
 392 0048 F1E7     		b	.L31
 393              	.LVL37:
 394              	.L28:
 250:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 395              		.loc 1 250 13 is_stmt 1 view .LVU75
 396 004a FFF7FEFF 		bl	Reset_Upper_Motor_Position
 397              	.LVL38:
 251:Core/Src/main.c ****             break;
 398              		.loc 1 251 13 view .LVU76
 399 004e 9FED0A0A 		vldr.32	s0, .L35
 400 0052 0121     		movs	r1, #1
 401 0054 0320     		movs	r0, #3
 402 0056 FFF7FEFF 		bl	Motor_Set_Target
 403              	.LVL39:
 252:Core/Src/main.c ****             
 404              		.loc 1 252 13 view .LVU77
 405 005a E4E7     		b	.L24
 406              	.LVL40:
 407              	.L26:
 255:Core/Src/main.c ****             if (lower_motor_state == STATE_NORMAL) {
 408              		.loc 1 255 13 view .LVU78
 409 005c FFF7FEFF 		bl	Reset_Upper_Motor_Position
 410              	.LVL41:
 256:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 411              		.loc 1 256 13 view .LVU79
 256:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 412              		.loc 1 256 35 is_stmt 0 view .LVU80
 413 0060 064B     		ldr	r3, .L35+4
 414 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 256:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, 400.0f); // 400mAåˆ¶åŠ¨åŠ
 415              		.loc 1 256 16 view .LVU81
 416 0064 002B     		cmp	r3, #0
 417 0066 DED1     		bne	.L24
 257:Core/Src/main.c ****             }
 418              		.loc 1 257 17 is_stmt 1 view .LVU82
 419 0068 9FED050A 		vldr.32	s0, .L35+8
 420 006c 0021     		movs	r1, #0
 421 006e 0320     		movs	r0, #3
 422 0070 FFF7FEFF 		bl	Motor_Set_Target
 423              	.LVL42:
 261:Core/Src/main.c **** /* USER CODE BEGIN PFP */
 424              		.loc 1 261 1 is_stmt 0 view .LVU83
 425 0074 D7E7     		b	.L24
 426              	.L36:
 427 0076 00BF     		.align	2
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 15


 428              	.L35:
 429 0078 00004842 		.word	1112014848
 430 007c 00000000 		.word	lower_motor_state
 431 0080 0000C843 		.word	1137180672
 432              		.cfi_endproc
 433              	.LFE141:
 435              		.section	.rodata.Process_Mode_Transition.str1.4,"aMS",%progbits,1
 436              		.align	2
 437              	.LC3:
 438 0000 3D3D3D20 		.ascii	"=== MODE TRANSITION COMPLETE: %d ===\012\000"
 438      4D4F4445 
 438      20545241 
 438      4E534954 
 438      494F4E20 
 439              		.section	.text.Process_Mode_Transition,"ax",%progbits
 440              		.align	1
 441              		.global	Process_Mode_Transition
 442              		.syntax unified
 443              		.thumb
 444              		.thumb_func
 446              	Process_Mode_Transition:
 447              	.LFB140:
 218:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 448              		.loc 1 218 36 is_stmt 1 view -0
 449              		.cfi_startproc
 450              		@ args = 0, pretend = 0, frame = 0
 451              		@ frame_needed = 0, uses_anonymous_args = 0
 452 0000 10B5     		push	{r4, lr}
 453              	.LCFI8:
 454              		.cfi_def_cfa_offset 8
 455              		.cfi_offset 4, -8
 456              		.cfi_offset 14, -4
 219:Core/Src/main.c ****     
 457              		.loc 1 219 5 view .LVU85
 219:Core/Src/main.c ****     
 458              		.loc 1 219 29 is_stmt 0 view .LVU86
 459 0002 FFF7FEFF 		bl	HAL_GetTick
 460              	.LVL43:
 221:Core/Src/main.c ****         current_time - mode_transition_start > MODE_TRANSITION_TIME) {
 461              		.loc 1 221 5 is_stmt 1 view .LVU87
 221:Core/Src/main.c ****         current_time - mode_transition_start > MODE_TRANSITION_TIME) {
 462              		.loc 1 221 22 is_stmt 0 view .LVU88
 463 0006 0A4B     		ldr	r3, .L41
 464 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 465 000a 0A4A     		ldr	r2, .L41+4
 466 000c 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 221:Core/Src/main.c ****         current_time - mode_transition_start > MODE_TRANSITION_TIME) {
 467              		.loc 1 221 8 view .LVU89
 468 000e 8B42     		cmp	r3, r1
 469 0010 04D0     		beq	.L37
 222:Core/Src/main.c ****         
 470              		.loc 1 222 22 view .LVU90
 471 0012 094B     		ldr	r3, .L41+8
 472 0014 1B68     		ldr	r3, [r3]
 473 0016 C01A     		subs	r0, r0, r3
 474              	.LVL44:
 221:Core/Src/main.c ****         current_time - mode_transition_start > MODE_TRANSITION_TIME) {
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 16


 475              		.loc 1 221 37 discriminator 1 view .LVU91
 476 0018 C828     		cmp	r0, #200
 477 001a 00D8     		bhi	.L40
 478              	.L37:
 231:Core/Src/main.c **** 
 479              		.loc 1 231 1 view .LVU92
 480 001c 10BD     		pop	{r4, pc}
 481              	.L40:
 225:Core/Src/main.c ****         printf("=== MODE TRANSITION COMPLETE: %d ===\n", current_mode);
 482              		.loc 1 225 9 is_stmt 1 view .LVU93
 225:Core/Src/main.c ****         printf("=== MODE TRANSITION COMPLETE: %d ===\n", current_mode);
 483              		.loc 1 225 22 is_stmt 0 view .LVU94
 484 001e 044C     		ldr	r4, .L41
 485 0020 2170     		strb	r1, [r4]
 226:Core/Src/main.c ****         
 486              		.loc 1 226 9 is_stmt 1 view .LVU95
 487 0022 0648     		ldr	r0, .L41+12
 488 0024 FFF7FEFF 		bl	printf
 489              	.LVL45:
 229:Core/Src/main.c ****     }
 490              		.loc 1 229 9 view .LVU96
 491 0028 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 492 002a FFF7FEFF 		bl	Configure_Motors_For_Mode
 493              	.LVL46:
 231:Core/Src/main.c **** 
 494              		.loc 1 231 1 is_stmt 0 view .LVU97
 495 002e F5E7     		b	.L37
 496              	.L42:
 497              		.align	2
 498              	.L41:
 499 0030 00000000 		.word	current_mode
 500 0034 00000000 		.word	target_mode
 501 0038 00000000 		.word	mode_transition_start
 502 003c 00000000 		.word	.LC3
 503              		.cfi_endproc
 504              	.LFE140:
 506              		.section	.rodata.Brake_Upper_Motor.str1.4,"aMS",%progbits,1
 507              		.align	2
 508              	.LC4:
 509 0000 55707065 		.ascii	"Upper motor entering stable brake mode\000"
 509      72206D6F 
 509      746F7220 
 509      656E7465 
 509      72696E67 
 510              		.section	.text.Brake_Upper_Motor,"ax",%progbits
 511              		.align	1
 512              		.global	Brake_Upper_Motor
 513              		.syntax unified
 514              		.thumb
 515              		.thumb_func
 517              	Brake_Upper_Motor:
 518              	.LFB143:
 313:Core/Src/main.c **** 
 314:Core/Src/main.c **** /**
 315:Core/Src/main.c ****   * @brief ä¸Šç”µæœºåˆ¶åŠ¨åœæ­¢ (æ”¹ä¸ºæ™ºèƒ½å¤ä½)
 316:Core/Src/main.c ****   */
 317:Core/Src/main.c **** void Brake_Upper_Motor(void) {upper_motor_needs_reset = 1;
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 17


 519              		.loc 1 317 30 is_stmt 1 view -0
 520              		.cfi_startproc
 521              		@ args = 0, pretend = 0, frame = 0
 522              		@ frame_needed = 0, uses_anonymous_args = 0
 523 0000 08B5     		push	{r3, lr}
 524              	.LCFI9:
 525              		.cfi_def_cfa_offset 8
 526              		.cfi_offset 3, -8
 527              		.cfi_offset 14, -4
 528              		.loc 1 317 31 view .LVU99
 529              		.loc 1 317 55 is_stmt 0 view .LVU100
 530 0002 0A4B     		ldr	r3, .L47
 531 0004 0122     		movs	r2, #1
 532 0006 1A70     		strb	r2, [r3]
 318:Core/Src/main.c ****     printf("Upper motor entering stable brake mode\n");
 533              		.loc 1 318 5 is_stmt 1 view .LVU101
 534 0008 0948     		ldr	r0, .L47+4
 535 000a FFF7FEFF 		bl	puts
 536              	.LVL47:
 319:Core/Src/main.c ****     
 320:Core/Src/main.c ****     GM6020_TypeDef *upper_motor = &gm6020_motors[UPPER_MOTOR_ID-1];
 537              		.loc 1 320 5 view .LVU102
 321:Core/Src/main.c ****     if (upper_motor->mode != MOTOR_MODE_CURRENT_OPEN) {
 538              		.loc 1 321 5 view .LVU103
 539              		.loc 1 321 20 is_stmt 0 view .LVU104
 540 000e 094B     		ldr	r3, .L47+8
 541 0010 93F8E932 		ldrb	r3, [r3, #745]	@ zero_extendqisi2
 542              		.loc 1 321 8 view .LVU105
 543 0014 03B9     		cbnz	r3, .L46
 544              	.L43:
 322:Core/Src/main.c ****         // æ¸è¿›å¼åˆ¶åŠ¨ï¼Œé˜²æ­¢å†²å‡»
 323:Core/Src/main.c ****         float brake_current = 300.0f; // 300mAåˆ¶åŠ¨åŠ›
 324:Core/Src/main.c ****         Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, brake_current);
 325:Core/Src/main.c ****         
 326:Core/Src/main.c ****         PID_Clear(&upper_motor->angle_pid);
 327:Core/Src/main.c ****     }
 328:Core/Src/main.c **** }
 545              		.loc 1 328 1 view .LVU106
 546 0016 08BD     		pop	{r3, pc}
 547              	.L46:
 548              	.LBB7:
 323:Core/Src/main.c ****         Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_OPEN, brake_current);
 549              		.loc 1 323 9 is_stmt 1 view .LVU107
 550              	.LVL48:
 324:Core/Src/main.c ****         
 551              		.loc 1 324 9 view .LVU108
 552 0018 9FED070A 		vldr.32	s0, .L47+12
 553 001c 0021     		movs	r1, #0
 554 001e 0420     		movs	r0, #4
 555 0020 FFF7FEFF 		bl	Motor_Set_Target
 556              	.LVL49:
 326:Core/Src/main.c ****     }
 557              		.loc 1 326 9 view .LVU109
 558 0024 0548     		ldr	r0, .L47+16
 559 0026 FFF7FEFF 		bl	PID_Clear
 560              	.LVL50:
 561              	.LBE7:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 18


 562              		.loc 1 328 1 is_stmt 0 view .LVU110
 563 002a F4E7     		b	.L43
 564              	.L48:
 565              		.align	2
 566              	.L47:
 567 002c 00000000 		.word	upper_motor_needs_reset
 568 0030 00000000 		.word	.LC4
 569 0034 00000000 		.word	gm6020_motors
 570 0038 00009643 		.word	1133903872
 571 003c 44030000 		.word	gm6020_motors+836
 572              		.cfi_endproc
 573              	.LFE143:
 575              		.section	.text.Prepare_Mode_Transition,"ax",%progbits
 576              		.align	1
 577              		.global	Prepare_Mode_Transition
 578              		.syntax unified
 579              		.thumb
 580              		.thumb_func
 582              	Prepare_Mode_Transition:
 583              	.LVL51:
 584              	.LFB139:
 180:Core/Src/main.c ****     GM6020_TypeDef *lower_motor = &gm6020_motors[LOWER_MOTOR_ID-1];
 585              		.loc 1 180 52 is_stmt 1 view -0
 586              		.cfi_startproc
 587              		@ args = 0, pretend = 0, frame = 0
 588              		@ frame_needed = 0, uses_anonymous_args = 0
 180:Core/Src/main.c ****     GM6020_TypeDef *lower_motor = &gm6020_motors[LOWER_MOTOR_ID-1];
 589              		.loc 1 180 52 is_stmt 0 view .LVU112
 590 0000 08B5     		push	{r3, lr}
 591              	.LCFI10:
 592              		.cfi_def_cfa_offset 8
 593              		.cfi_offset 3, -8
 594              		.cfi_offset 14, -4
 181:Core/Src/main.c ****     GM6020_TypeDef *upper_motor = &gm6020_motors[UPPER_MOTOR_ID-1];
 595              		.loc 1 181 5 is_stmt 1 view .LVU113
 596              	.LVL52:
 182:Core/Src/main.c ****     
 597              		.loc 1 182 5 view .LVU114
 184:Core/Src/main.c ****         case MODE_BOTH_MOVING:
 598              		.loc 1 184 5 view .LVU115
 599 0002 0328     		cmp	r0, #3
 600 0004 0AD8     		bhi	.L49
 601 0006 DFE800F0 		tbb	[pc, r0]
 602              	.L52:
 603 000a 02       		.byte	(.L55-.L52)/2
 604 000b 0E       		.byte	(.L54-.L52)/2
 605 000c 1C       		.byte	(.L53-.L52)/2
 606 000d 25       		.byte	(.L51-.L52)/2
 607              		.p2align 1
 608              	.L55:
 187:Core/Src/main.c ****                 lower_motor_state = STATE_NORMAL;
 609              		.loc 1 187 13 view .LVU116
 187:Core/Src/main.c ****                 lower_motor_state = STATE_NORMAL;
 610              		.loc 1 187 35 is_stmt 0 view .LVU117
 611 000e 164B     		ldr	r3, .L62
 612 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 187:Core/Src/main.c ****                 lower_motor_state = STATE_NORMAL;
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 19


 613              		.loc 1 187 16 view .LVU118
 614 0012 012B     		cmp	r3, #1
 615 0014 03D0     		beq	.L60
 616              	.L56:
 190:Core/Src/main.c ****             break;
 617              		.loc 1 190 13 is_stmt 1 view .LVU119
 190:Core/Src/main.c ****             break;
 618              		.loc 1 190 37 is_stmt 0 view .LVU120
 619 0016 154B     		ldr	r3, .L62+4
 620 0018 0122     		movs	r2, #1
 621 001a 1A70     		strb	r2, [r3]
 191:Core/Src/main.c ****             
 622              		.loc 1 191 13 is_stmt 1 view .LVU121
 623              	.LVL53:
 624              	.L49:
 215:Core/Src/main.c **** 
 625              		.loc 1 215 1 is_stmt 0 view .LVU122
 626 001c 08BD     		pop	{r3, pc}
 627              	.LVL54:
 628              	.L60:
 188:Core/Src/main.c ****             }
 629              		.loc 1 188 17 is_stmt 1 view .LVU123
 188:Core/Src/main.c ****             }
 630              		.loc 1 188 35 is_stmt 0 view .LVU124
 631 001e 124B     		ldr	r3, .L62
 632 0020 0022     		movs	r2, #0
 633 0022 1A70     		strb	r2, [r3]
 634 0024 F7E7     		b	.L56
 635              	.L54:
 195:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 636              		.loc 1 195 13 is_stmt 1 view .LVU125
 195:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 637              		.loc 1 195 35 is_stmt 0 view .LVU126
 638 0026 104B     		ldr	r3, .L62
 639 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 195:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 640              		.loc 1 195 16 view .LVU127
 641 002a 012B     		cmp	r3, #1
 642 002c 06D1     		bne	.L61
 643              	.LVL55:
 644              	.L57:
 198:Core/Src/main.c ****             break;
 645              		.loc 1 198 13 is_stmt 1 view .LVU128
 646 002e B3EE0E0A 		vmov.f32	s0, #3.0e+1
 647 0032 0121     		movs	r1, #1
 648 0034 0420     		movs	r0, #4
 649 0036 FFF7FEFF 		bl	Motor_Set_Target
 650              	.LVL56:
 199:Core/Src/main.c ****             
 651              		.loc 1 199 13 view .LVU129
 652 003a EFE7     		b	.L49
 653              	.LVL57:
 654              	.L61:
 196:Core/Src/main.c ****             }
 655              		.loc 1 196 17 view .LVU130
 656 003c FFF7FEFF 		bl	Return_Lower_Motor_To_Initial_Position
 657              	.LVL58:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 20


 196:Core/Src/main.c ****             }
 658              		.loc 1 196 17 is_stmt 0 view .LVU131
 659 0040 F5E7     		b	.L57
 660              	.LVL59:
 661              	.L53:
 203:Core/Src/main.c ****             Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 662              		.loc 1 203 13 is_stmt 1 view .LVU132
 663 0042 FFF7FEFF 		bl	Brake_Upper_Motor
 664              	.LVL60:
 204:Core/Src/main.c ****             break;
 665              		.loc 1 204 13 view .LVU133
 666 0046 9FED0A0A 		vldr.32	s0, .L62+8
 667 004a 0121     		movs	r1, #1
 668 004c 0320     		movs	r0, #3
 669 004e FFF7FEFF 		bl	Motor_Set_Target
 670              	.LVL61:
 205:Core/Src/main.c ****             
 671              		.loc 1 205 13 view .LVU134
 672 0052 E3E7     		b	.L49
 673              	.LVL62:
 674              	.L51:
 209:Core/Src/main.c ****             if (lower_motor_state != STATE_RETURNING) {
 675              		.loc 1 209 13 view .LVU135
 676 0054 FFF7FEFF 		bl	Brake_Upper_Motor
 677              	.LVL63:
 210:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 678              		.loc 1 210 13 view .LVU136
 210:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 679              		.loc 1 210 35 is_stmt 0 view .LVU137
 680 0058 034B     		ldr	r3, .L62
 681 005a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 210:Core/Src/main.c ****                 Return_Lower_Motor_To_Initial_Position();
 682              		.loc 1 210 16 view .LVU138
 683 005c 012B     		cmp	r3, #1
 684 005e DDD0     		beq	.L49
 211:Core/Src/main.c ****             }
 685              		.loc 1 211 17 is_stmt 1 view .LVU139
 686 0060 FFF7FEFF 		bl	Return_Lower_Motor_To_Initial_Position
 687              	.LVL64:
 215:Core/Src/main.c **** 
 688              		.loc 1 215 1 is_stmt 0 view .LVU140
 689 0064 DAE7     		b	.L49
 690              	.L63:
 691 0066 00BF     		.align	2
 692              	.L62:
 693 0068 00000000 		.word	lower_motor_state
 694 006c 00000000 		.word	upper_motor_needs_reset
 695 0070 00004842 		.word	1112014848
 696              		.cfi_endproc
 697              	.LFE139:
 699              		.section	.rodata.Check_Key_Inputs.str1.4,"aMS",%progbits,1
 700              		.align	2
 701              	.LC5:
 702 0000 3D3D3D20 		.ascii	"=== REQUESTING MODE CHANGE: %d ===\012\000"
 702      52455155 
 702      45535449 
 702      4E47204D 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 21


 702      4F444520 
 703              		.section	.text.Check_Key_Inputs,"ax",%progbits
 704              		.align	1
 705              		.global	Check_Key_Inputs
 706              		.syntax unified
 707              		.thumb
 708              		.thumb_func
 710              	Check_Key_Inputs:
 711              	.LFB138:
 160:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 712              		.loc 1 160 29 is_stmt 1 view -0
 713              		.cfi_startproc
 714              		@ args = 0, pretend = 0, frame = 0
 715              		@ frame_needed = 0, uses_anonymous_args = 0
 716 0000 38B5     		push	{r3, r4, r5, lr}
 717              	.LCFI11:
 718              		.cfi_def_cfa_offset 16
 719              		.cfi_offset 3, -16
 720              		.cfi_offset 4, -12
 721              		.cfi_offset 5, -8
 722              		.cfi_offset 14, -4
 161:Core/Src/main.c ****     
 723              		.loc 1 161 5 view .LVU142
 161:Core/Src/main.c ****     
 724              		.loc 1 161 29 is_stmt 0 view .LVU143
 725 0002 FFF7FEFF 		bl	HAL_GetTick
 726              	.LVL65:
 727 0006 0446     		mov	r4, r0
 728              	.LVL66:
 163:Core/Src/main.c ****         if (current_time - last_key_press > KEY_DEBOUNCE_TIME) {
 729              		.loc 1 163 5 is_stmt 1 view .LVU144
 163:Core/Src/main.c ****         if (current_time - last_key_press > KEY_DEBOUNCE_TIME) {
 730              		.loc 1 163 9 is_stmt 0 view .LVU145
 731 0008 0421     		movs	r1, #4
 732 000a 1348     		ldr	r0, .L68
 733              	.LVL67:
 163:Core/Src/main.c ****         if (current_time - last_key_press > KEY_DEBOUNCE_TIME) {
 734              		.loc 1 163 9 view .LVU146
 735 000c FFF7FEFF 		bl	HAL_GPIO_ReadPin
 736              	.LVL68:
 163:Core/Src/main.c ****         if (current_time - last_key_press > KEY_DEBOUNCE_TIME) {
 737              		.loc 1 163 8 discriminator 1 view .LVU147
 738 0010 0128     		cmp	r0, #1
 739 0012 00D0     		beq	.L67
 740              	.L64:
 178:Core/Src/main.c **** 
 741              		.loc 1 178 1 view .LVU148
 742 0014 38BD     		pop	{r3, r4, r5, pc}
 743              	.LVL69:
 744              	.L67:
 164:Core/Src/main.c ****             last_key_press = current_time;
 745              		.loc 1 164 9 is_stmt 1 view .LVU149
 164:Core/Src/main.c ****             last_key_press = current_time;
 746              		.loc 1 164 26 is_stmt 0 view .LVU150
 747 0016 114B     		ldr	r3, .L68+4
 748 0018 1B68     		ldr	r3, [r3]
 749 001a E31A     		subs	r3, r4, r3
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 22


 164:Core/Src/main.c ****             last_key_press = current_time;
 750              		.loc 1 164 12 view .LVU151
 751 001c 322B     		cmp	r3, #50
 752 001e F9D9     		bls	.L64
 165:Core/Src/main.c ****             
 753              		.loc 1 165 13 is_stmt 1 view .LVU152
 165:Core/Src/main.c ****             
 754              		.loc 1 165 28 is_stmt 0 view .LVU153
 755 0020 0E4B     		ldr	r3, .L68+4
 756 0022 1C60     		str	r4, [r3]
 168:Core/Src/main.c ****                 target_mode = (ControlMode)((current_mode + 1) % 4);
 757              		.loc 1 168 13 is_stmt 1 view .LVU154
 168:Core/Src/main.c ****                 target_mode = (ControlMode)((current_mode + 1) % 4);
 758              		.loc 1 168 30 is_stmt 0 view .LVU155
 759 0024 0E4B     		ldr	r3, .L68+8
 760 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 761 0028 0E4A     		ldr	r2, .L68+12
 762 002a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 168:Core/Src/main.c ****                 target_mode = (ControlMode)((current_mode + 1) % 4);
 763              		.loc 1 168 16 view .LVU156
 764 002c 9342     		cmp	r3, r2
 765 002e F1D1     		bne	.L64
 169:Core/Src/main.c ****                 mode_transition_start = current_time;
 766              		.loc 1 169 17 is_stmt 1 view .LVU157
 169:Core/Src/main.c ****                 mode_transition_start = current_time;
 767              		.loc 1 169 59 is_stmt 0 view .LVU158
 768 0030 0133     		adds	r3, r3, #1
 169:Core/Src/main.c ****                 mode_transition_start = current_time;
 769              		.loc 1 169 64 view .LVU159
 770 0032 5A42     		rsbs	r2, r3, #0
 771 0034 03F00301 		and	r1, r3, #3
 772 0038 02F00303 		and	r3, r2, #3
 773 003c 58BF     		it	pl
 774 003e 5942     		rsbpl	r1, r3, #0
 169:Core/Src/main.c ****                 mode_transition_start = current_time;
 775              		.loc 1 169 31 view .LVU160
 776 0040 C9B2     		uxtb	r1, r1
 169:Core/Src/main.c ****                 mode_transition_start = current_time;
 777              		.loc 1 169 29 view .LVU161
 778 0042 084D     		ldr	r5, .L68+12
 779 0044 2970     		strb	r1, [r5]
 170:Core/Src/main.c ****                 printf("=== REQUESTING MODE CHANGE: %d ===\n", target_mode);
 780              		.loc 1 170 17 is_stmt 1 view .LVU162
 170:Core/Src/main.c ****                 printf("=== REQUESTING MODE CHANGE: %d ===\n", target_mode);
 781              		.loc 1 170 39 is_stmt 0 view .LVU163
 782 0046 084B     		ldr	r3, .L68+16
 783 0048 1C60     		str	r4, [r3]
 171:Core/Src/main.c ****                 
 784              		.loc 1 171 17 is_stmt 1 view .LVU164
 785 004a 0848     		ldr	r0, .L68+20
 786 004c FFF7FEFF 		bl	printf
 787              	.LVL70:
 174:Core/Src/main.c ****             }
 788              		.loc 1 174 17 view .LVU165
 789 0050 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 790 0052 FFF7FEFF 		bl	Prepare_Mode_Transition
 791              	.LVL71:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 23


 178:Core/Src/main.c **** 
 792              		.loc 1 178 1 is_stmt 0 view .LVU166
 793 0056 DDE7     		b	.L64
 794              	.L69:
 795              		.align	2
 796              	.L68:
 797 0058 00040240 		.word	1073873920
 798 005c 00000000 		.word	last_key_press
 799 0060 00000000 		.word	current_mode
 800 0064 00000000 		.word	target_mode
 801 0068 00000000 		.word	mode_transition_start
 802 006c 00000000 		.word	.LC5
 803              		.cfi_endproc
 804              	.LFE138:
 806              		.section	.rodata.Update_Lower_Motor_Control.str1.4,"aMS",%progbits,1
 807              		.align	2
 808              	.LC6:
 809 0000 3D3D3D20 		.ascii	"=== SWITCHING TO NEGATIVE TRANSITION ===\000"
 809      53574954 
 809      4348494E 
 809      4720544F 
 809      204E4547 
 810 0029 000000   		.align	2
 811              	.LC7:
 812 002c 3D3D3D20 		.ascii	"=== TRANSITION TO NEGATIVE COMPLETE ===\000"
 812      5452414E 
 812      53495449 
 812      4F4E2054 
 812      4F204E45 
 813              		.align	2
 814              	.LC8:
 815 0054 3D3D3D20 		.ascii	"=== SWITCHING TO POSITIVE TRANSITION ===\000"
 815      53574954 
 815      4348494E 
 815      4720544F 
 815      20504F53 
 816 007d 000000   		.align	2
 817              	.LC9:
 818 0080 3D3D3D20 		.ascii	"=== TRANSITION TO POSITIVE COMPLETE ===\000"
 818      5452414E 
 818      53495449 
 818      4F4E2054 
 818      4F20504F 
 819              		.align	2
 820              	.LC10:
 821 00a8 3D3D3D20 		.ascii	"=== RETURN TO INITIAL POSITION COMPLETE ===\000"
 821      52455455 
 821      524E2054 
 821      4F20494E 
 821      49544941 
 822              		.align	2
 823              	.LC11:
 824 00d4 5B4C6F77 		.ascii	"[Lower] Mode=%d, State=%d, Angle=%.1f\302\260, Spee"
 824      65725D20 
 824      4D6F6465 
 824      3D25642C 
 824      20537461 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 24


 825 0101 643D252E 		.ascii	"d=%.1f RPM\012\000"
 825      31662052 
 825      504D0A00 
 826 010d 000000   		.align	2
 827              	.LC12:
 828 0110 5B4C6F77 		.ascii	"[Lower] RETURNING: Current=%.1f\302\260, Target=%.1"
 828      65725D20 
 828      52455455 
 828      524E494E 
 828      473A2043 
 829 013d 66C2B02C 		.ascii	"f\302\260, Error=%.1f\302\260\012\000"
 829      20457272 
 829      6F723D25 
 829      2E3166C2 
 829      B00A00
 830              		.section	.text.Update_Lower_Motor_Control,"ax",%progbits
 831              		.align	1
 832              		.global	Update_Lower_Motor_Control
 833              		.syntax unified
 834              		.thumb
 835              		.thumb_func
 837              	Update_Lower_Motor_Control:
 838              	.LFB144:
 329:Core/Src/main.c **** /* USER CODE END 0 */
 330:Core/Src/main.c **** 
 331:Core/Src/main.c **** /**
 332:Core/Src/main.c ****   * @brief æ›´æ–°ä¸‹ç”µæœºæŽ§åˆ¶
 333:Core/Src/main.c ****   */
 334:Core/Src/main.c **** void Update_Lower_Motor_Control(void) {
 839              		.loc 1 334 39 is_stmt 1 view -0
 840              		.cfi_startproc
 841              		@ args = 0, pretend = 0, frame = 0
 842              		@ frame_needed = 0, uses_anonymous_args = 0
 843 0000 30B5     		push	{r4, r5, lr}
 844              	.LCFI12:
 845              		.cfi_def_cfa_offset 12
 846              		.cfi_offset 4, -12
 847              		.cfi_offset 5, -8
 848              		.cfi_offset 14, -4
 849 0002 2DED048B 		vpush.64	{d8, d9}
 850              	.LCFI13:
 851              		.cfi_def_cfa_offset 28
 852              		.cfi_offset 80, -28
 853              		.cfi_offset 81, -24
 854              		.cfi_offset 82, -20
 855              		.cfi_offset 83, -16
 856 0006 85B0     		sub	sp, sp, #20
 857              	.LCFI14:
 858              		.cfi_def_cfa_offset 48
 335:Core/Src/main.c ****     uint32_t current_time = HAL_GetTick();
 859              		.loc 1 335 5 view .LVU168
 860              		.loc 1 335 29 is_stmt 0 view .LVU169
 861 0008 FFF7FEFF 		bl	HAL_GetTick
 862              	.LVL72:
 863 000c 0446     		mov	r4, r0
 864              	.LVL73:
 336:Core/Src/main.c ****     GM6020_TypeDef *lower_motor = &gm6020_motors[LOWER_MOTOR_ID-1];
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 25


 865              		.loc 1 336 5 is_stmt 1 view .LVU170
 337:Core/Src/main.c ****     float target_speed = 0.0f;
 866              		.loc 1 337 5 view .LVU171
 338:Core/Src/main.c ****     
 339:Core/Src/main.c ****     accumulated_angle = lower_motor->total_angle;
 867              		.loc 1 339 5 view .LVU172
 868              		.loc 1 339 36 is_stmt 0 view .LVU173
 869 000e 9C4B     		ldr	r3, .L114
 870 0010 D3ED800A 		vldr.32	s1, [r3, #512]
 871              		.loc 1 339 23 view .LVU174
 872 0014 9B4B     		ldr	r3, .L114+4
 873 0016 C3ED000A 		vstr.32	s1, [r3]
 340:Core/Src/main.c ****     
 341:Core/Src/main.c ****     // æ ¹æ®çŠ¶æ€æœºæ›´æ–°æŽ§åˆ¶
 342:Core/Src/main.c ****     if (lower_motor_state == STATE_NORMAL) {
 874              		.loc 1 342 5 is_stmt 1 view .LVU175
 875              		.loc 1 342 27 is_stmt 0 view .LVU176
 876 001a 9B4B     		ldr	r3, .L114+8
 877 001c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 878              		.loc 1 342 8 view .LVU177
 879 001e 002B     		cmp	r3, #0
 880 0020 7CD1     		bne	.L71
 343:Core/Src/main.c ****         switch (lower_state) {
 881              		.loc 1 343 9 is_stmt 1 view .LVU178
 882 0022 9A4B     		ldr	r3, .L114+12
 883 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 884 0026 032B     		cmp	r3, #3
 885 0028 00F2FF80 		bhi	.L94
 886 002c DFE803F0 		tbb	[pc, r3]
 887              	.L74:
 888 0030 02       		.byte	(.L77-.L74)/2
 889 0031 17       		.byte	(.L76-.L74)/2
 890 0032 3C       		.byte	(.L75-.L74)/2
 891 0033 51       		.byte	(.L73-.L74)/2
 892              		.p2align 1
 893              	.L77:
 344:Core/Src/main.c ****             case ACCUM_POS:
 345:Core/Src/main.c ****                 target_speed = LOWER_MOTOR_SPEED;
 894              		.loc 1 345 17 view .LVU179
 895              	.LVL74:
 346:Core/Src/main.c ****                 if (accumulated_angle >= ANGLE_ACCUMULATION_THRESHOLD) {
 896              		.loc 1 346 17 view .LVU180
 897              		.loc 1 346 20 is_stmt 0 view .LVU181
 898 0034 DFED967A 		vldr.32	s15, .L114+16
 899 0038 F4EEE70A 		vcmpe.f32	s1, s15
 900 003c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 901 0040 02DA     		bge	.L110
 345:Core/Src/main.c ****                 if (accumulated_angle >= ANGLE_ACCUMULATION_THRESHOLD) {
 902              		.loc 1 345 30 view .LVU182
 903 0042 9FED948A 		vldr.32	s16, .L114+20
 904 0046 6DE0     		b	.L72
 905              	.L110:
 347:Core/Src/main.c ****                     lower_state = TRANS_NEG;
 906              		.loc 1 347 21 is_stmt 1 view .LVU183
 907              		.loc 1 347 33 is_stmt 0 view .LVU184
 908 0048 904B     		ldr	r3, .L114+12
 909 004a 0122     		movs	r2, #1
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 26


 910 004c 1A70     		strb	r2, [r3]
 348:Core/Src/main.c ****                     transition_start_time = current_time;
 911              		.loc 1 348 21 is_stmt 1 view .LVU185
 912              		.loc 1 348 43 is_stmt 0 view .LVU186
 913 004e 924B     		ldr	r3, .L114+24
 914 0050 1860     		str	r0, [r3]
 349:Core/Src/main.c ****                     printf("=== SWITCHING TO NEGATIVE TRANSITION ===\n");
 915              		.loc 1 349 21 is_stmt 1 view .LVU187
 916 0052 9248     		ldr	r0, .L114+28
 917              	.LVL75:
 918              		.loc 1 349 21 is_stmt 0 view .LVU188
 919 0054 FFF7FEFF 		bl	puts
 920              	.LVL76:
 345:Core/Src/main.c ****                 if (accumulated_angle >= ANGLE_ACCUMULATION_THRESHOLD) {
 921              		.loc 1 345 30 view .LVU189
 922 0058 9FED8E8A 		vldr.32	s16, .L114+20
 923 005c 62E0     		b	.L72
 924              	.LVL77:
 925              	.L76:
 350:Core/Src/main.c ****                 }
 351:Core/Src/main.c ****                 break;
 352:Core/Src/main.c ****                 
 353:Core/Src/main.c ****             case TRANS_NEG:
 354:Core/Src/main.c ****                 if (current_time - transition_start_time < SMOOTH_TRANSITION_TIME) {
 926              		.loc 1 354 17 is_stmt 1 view .LVU190
 927              		.loc 1 354 34 is_stmt 0 view .LVU191
 928 005e 8E4B     		ldr	r3, .L114+24
 929 0060 1B68     		ldr	r3, [r3]
 930 0062 C31A     		subs	r3, r0, r3
 931              		.loc 1 354 20 view .LVU192
 932 0064 B3F5FA7F 		cmp	r3, #500
 933 0068 12D2     		bcs	.L79
 934              	.LBB8:
 355:Core/Src/main.c ****                     float ratio = (float)(current_time - transition_start_time) / SMOOTH_TRANSITION
 935              		.loc 1 355 21 is_stmt 1 view .LVU193
 936              		.loc 1 355 35 is_stmt 0 view .LVU194
 937 006a 07EE903A 		vmov	s15, r3	@ int
 938 006e F8EE677A 		vcvt.f32.u32	s15, s15
 939              		.loc 1 355 27 view .LVU195
 940 0072 DFED8B6A 		vldr.32	s13, .L114+32
 941 0076 87EEA67A 		vdiv.f32	s14, s15, s13
 942              	.LVL78:
 356:Core/Src/main.c ****                     target_speed = LOWER_MOTOR_SPEED * (1.0f - 2.0f * ratio);
 943              		.loc 1 356 21 is_stmt 1 view .LVU196
 944              		.loc 1 356 69 is_stmt 0 view .LVU197
 945 007a 37EE077A 		vadd.f32	s14, s14, s14
 946              	.LVL79:
 947              		.loc 1 356 62 view .LVU198
 948 007e B7EE008A 		vmov.f32	s16, #1.0e+0
 949 0082 38EE478A 		vsub.f32	s16, s16, s14
 950              		.loc 1 356 34 view .LVU199
 951 0086 DFED837A 		vldr.32	s15, .L114+20
 952              	.LVL80:
 953              		.loc 1 356 34 view .LVU200
 954 008a 28EE278A 		vmul.f32	s16, s16, s15
 955              	.LVL81:
 956              		.loc 1 356 34 view .LVU201
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 27


 957              	.LBE8:
 958 008e 49E0     		b	.L72
 959              	.LVL82:
 960              	.L79:
 357:Core/Src/main.c ****                 } else {
 358:Core/Src/main.c ****                     lower_state = ACCUM_NEG;
 961              		.loc 1 358 21 is_stmt 1 view .LVU202
 962              		.loc 1 358 33 is_stmt 0 view .LVU203
 963 0090 7E4B     		ldr	r3, .L114+12
 964 0092 0222     		movs	r2, #2
 965 0094 1A70     		strb	r2, [r3]
 359:Core/Src/main.c ****                     accumulated_angle = 0.0f;
 966              		.loc 1 359 21 is_stmt 1 view .LVU204
 967              		.loc 1 359 39 is_stmt 0 view .LVU205
 968 0096 9FED838A 		vldr.32	s16, .L114+36
 969 009a 7A4B     		ldr	r3, .L114+4
 970 009c 83ED008A 		vstr.32	s16, [r3]
 360:Core/Src/main.c ****                     printf("=== TRANSITION TO NEGATIVE COMPLETE ===\n");
 971              		.loc 1 360 21 is_stmt 1 view .LVU206
 972 00a0 8148     		ldr	r0, .L114+40
 973              	.LVL83:
 974              		.loc 1 360 21 is_stmt 0 view .LVU207
 975 00a2 FFF7FEFF 		bl	puts
 976              	.LVL84:
 977 00a6 3DE0     		b	.L72
 978              	.LVL85:
 979              	.L75:
 361:Core/Src/main.c ****                 }
 362:Core/Src/main.c ****                 break;
 363:Core/Src/main.c ****                 
 364:Core/Src/main.c ****             case ACCUM_NEG:
 365:Core/Src/main.c ****                 target_speed = -LOWER_MOTOR_SPEED;
 980              		.loc 1 365 17 is_stmt 1 view .LVU208
 366:Core/Src/main.c ****                 if (accumulated_angle <= -ANGLE_ACCUMULATION_THRESHOLD) {
 981              		.loc 1 366 17 view .LVU209
 982              		.loc 1 366 20 is_stmt 0 view .LVU210
 983 00a8 DFED807A 		vldr.32	s15, .L114+44
 984 00ac F4EEE70A 		vcmpe.f32	s1, s15
 985 00b0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 986 00b4 02D9     		bls	.L111
 365:Core/Src/main.c ****                 if (accumulated_angle <= -ANGLE_ACCUMULATION_THRESHOLD) {
 987              		.loc 1 365 30 view .LVU211
 988 00b6 9FED7E8A 		vldr.32	s16, .L114+48
 989 00ba 33E0     		b	.L72
 990              	.L111:
 367:Core/Src/main.c ****                     lower_state = TRANS_POS;
 991              		.loc 1 367 21 is_stmt 1 view .LVU212
 992              		.loc 1 367 33 is_stmt 0 view .LVU213
 993 00bc 734B     		ldr	r3, .L114+12
 994 00be 0322     		movs	r2, #3
 995 00c0 1A70     		strb	r2, [r3]
 368:Core/Src/main.c ****                     transition_start_time = current_time;
 996              		.loc 1 368 21 is_stmt 1 view .LVU214
 997              		.loc 1 368 43 is_stmt 0 view .LVU215
 998 00c2 754B     		ldr	r3, .L114+24
 999 00c4 1860     		str	r0, [r3]
 369:Core/Src/main.c ****                     printf("=== SWITCHING TO POSITIVE TRANSITION ===\n");
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 28


 1000              		.loc 1 369 21 is_stmt 1 view .LVU216
 1001 00c6 7B48     		ldr	r0, .L114+52
 1002              	.LVL86:
 1003              		.loc 1 369 21 is_stmt 0 view .LVU217
 1004 00c8 FFF7FEFF 		bl	puts
 1005              	.LVL87:
 365:Core/Src/main.c ****                 if (accumulated_angle <= -ANGLE_ACCUMULATION_THRESHOLD) {
 1006              		.loc 1 365 30 view .LVU218
 1007 00cc 9FED788A 		vldr.32	s16, .L114+48
 1008 00d0 28E0     		b	.L72
 1009              	.LVL88:
 1010              	.L73:
 370:Core/Src/main.c ****                 }
 371:Core/Src/main.c ****                 break;
 372:Core/Src/main.c ****                 
 373:Core/Src/main.c ****             case TRANS_POS:
 374:Core/Src/main.c ****                 if (current_time - transition_start_time < SMOOTH_TRANSITION_TIME) {
 1011              		.loc 1 374 17 is_stmt 1 view .LVU219
 1012              		.loc 1 374 34 is_stmt 0 view .LVU220
 1013 00d2 714B     		ldr	r3, .L114+24
 1014 00d4 1B68     		ldr	r3, [r3]
 1015 00d6 C31A     		subs	r3, r0, r3
 1016              		.loc 1 374 20 view .LVU221
 1017 00d8 B3F5FA7F 		cmp	r3, #500
 1018 00dc 12D2     		bcs	.L81
 1019              	.LBB9:
 375:Core/Src/main.c ****                     float ratio = (float)(current_time - transition_start_time) / SMOOTH_TRANSITION
 1020              		.loc 1 375 21 is_stmt 1 view .LVU222
 1021              		.loc 1 375 35 is_stmt 0 view .LVU223
 1022 00de 07EE903A 		vmov	s15, r3	@ int
 1023 00e2 F8EE677A 		vcvt.f32.u32	s15, s15
 1024              		.loc 1 375 27 view .LVU224
 1025 00e6 DFED6E6A 		vldr.32	s13, .L114+32
 1026 00ea 87EEA67A 		vdiv.f32	s14, s15, s13
 1027              	.LVL89:
 376:Core/Src/main.c ****                     target_speed = -LOWER_MOTOR_SPEED * (1.0f - 2.0f * ratio);
 1028              		.loc 1 376 21 is_stmt 1 view .LVU225
 1029              		.loc 1 376 70 is_stmt 0 view .LVU226
 1030 00ee 37EE077A 		vadd.f32	s14, s14, s14
 1031              	.LVL90:
 1032              		.loc 1 376 63 view .LVU227
 1033 00f2 B7EE008A 		vmov.f32	s16, #1.0e+0
 1034 00f6 38EE478A 		vsub.f32	s16, s16, s14
 1035              		.loc 1 376 34 view .LVU228
 1036 00fa DFED6D7A 		vldr.32	s15, .L114+48
 1037              	.LVL91:
 1038              		.loc 1 376 34 view .LVU229
 1039 00fe 28EE278A 		vmul.f32	s16, s16, s15
 1040              	.LVL92:
 1041              		.loc 1 376 34 view .LVU230
 1042              	.LBE9:
 1043 0102 0FE0     		b	.L72
 1044              	.LVL93:
 1045              	.L81:
 377:Core/Src/main.c ****                 } else {
 378:Core/Src/main.c ****                     lower_state = ACCUM_POS;
 1046              		.loc 1 378 21 is_stmt 1 view .LVU231
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 29


 1047              		.loc 1 378 33 is_stmt 0 view .LVU232
 1048 0104 614B     		ldr	r3, .L114+12
 1049 0106 0022     		movs	r2, #0
 1050 0108 1A70     		strb	r2, [r3]
 379:Core/Src/main.c ****                     accumulated_angle = 0.0f;
 1051              		.loc 1 379 21 is_stmt 1 view .LVU233
 1052              		.loc 1 379 39 is_stmt 0 view .LVU234
 1053 010a 9FED668A 		vldr.32	s16, .L114+36
 1054 010e 5D4B     		ldr	r3, .L114+4
 1055 0110 83ED008A 		vstr.32	s16, [r3]
 380:Core/Src/main.c ****                     printf("=== TRANSITION TO POSITIVE COMPLETE ===\n");
 1056              		.loc 1 380 21 is_stmt 1 view .LVU235
 1057 0114 6848     		ldr	r0, .L114+56
 1058              	.LVL94:
 1059              		.loc 1 380 21 is_stmt 0 view .LVU236
 1060 0116 FFF7FEFF 		bl	puts
 1061              	.LVL95:
 1062 011a 03E0     		b	.L72
 1063              	.LVL96:
 1064              	.L71:
 381:Core/Src/main.c ****                 }
 382:Core/Src/main.c ****                 break;
 383:Core/Src/main.c ****         }
 384:Core/Src/main.c ****     } 
 385:Core/Src/main.c ****     // è¿”å›žåˆå§‹ä½ç½®æ¨¡å¼
 386:Core/Src/main.c ****     else if (lower_motor_state == STATE_RETURNING) {
 1065              		.loc 1 386 10 is_stmt 1 view .LVU237
 1066              		.loc 1 386 13 is_stmt 0 view .LVU238
 1067 011c 012B     		cmp	r3, #1
 1068 011e 30D0     		beq	.L112
 337:Core/Src/main.c ****     
 1069              		.loc 1 337 11 view .LVU239
 1070 0120 9FED608A 		vldr.32	s16, .L114+36
 1071              	.LVL97:
 1072              	.L72:
 387:Core/Src/main.c ****         // è®¡ç®—è§’åº¦è¯¯å·®
 388:Core/Src/main.c ****         float angle_error = lower_motor_target_angle - lower_motor->total_angle;
 389:Core/Src/main.c ****         float abs_error = fabsf(angle_error);
 390:Core/Src/main.c ****         
 391:Core/Src/main.c ****         const float DECELERATION_ZONE = 30.0f; // 30Â°å‡é€ŸåŒº
 392:Core/Src/main.c ****         const float STOP_THRESHOLD = 2.0f;    // 2Â°åœæ­¢é˜ˆå€¼
 393:Core/Src/main.c ****         // å¦‚æžœæŽ¥è¿‘ç›®æ ‡ä½ç½®ï¼Œåœæ­¢è¿”å›ž
 394:Core/Src/main.c ****         if (abs_error < STOP_THRESHOLD) {
 395:Core/Src/main.c ****             // âœ… åˆ°è¾¾ç›®æ ‡ä½ç½®ï¼Œå¹³æ»‘åœæ­¢
 396:Core/Src/main.c ****             lower_motor_state = STATE_NORMAL;
 397:Core/Src/main.c ****             lower_state = ACCUM_POS;
 398:Core/Src/main.c ****             accumulated_angle = 0.0f;
 399:Core/Src/main.c ****             target_speed = 0.0f;
 400:Core/Src/main.c ****             printf("=== RETURN TO INITIAL POSITION COMPLETE ===\n");
 401:Core/Src/main.c ****             
 402:Core/Src/main.c ****             // æ ¹æ®å½“å‰æ¨¡å¼è®¾ç½®ä¸‹ç”µæœºçŠ¶æ€
 403:Core/Src/main.c ****             if (current_mode == MODE_UPPER_MOVING || current_mode == MODE_BOTH_STOPPED) {
 404:Core/Src/main.c ****                 // ç²¾ç¡®ä½ç½®ä¿æŒ
 405:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_POS_CASCADE, lower_motor_target
 406:Core/Src/main.c ****             } else {
 407:Core/Src/main.c ****                 // æ¢å¤æ­£å¸¸è¿è¡Œ
 408:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 30


 409:Core/Src/main.c ****             }
 410:Core/Src/main.c ****         } 
 411:Core/Src/main.c ****         // å¦åˆ™ï¼Œå‘ç›®æ ‡ä½ç½®ç§»åŠ¨
 412:Core/Src/main.c ****         else {
 413:Core/Src/main.c ****             // âœ… ä½¿ç”¨PIDæŽ§åˆ¶ä»£æ›¿å›ºå®šé€Ÿåº¦
 414:Core/Src/main.c ****             if (abs_error > DECELERATION_ZONE) {
 415:Core/Src/main.c ****                 // è¿œè·ç¦»ï¼šæœ€å¤§é€Ÿåº¦
 416:Core/Src/main.c ****                 target_speed = (angle_error > 0) ? POSITION_RETURN_SPEED : -POSITION_RETURN_SPEED;
 417:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 418:Core/Src/main.c ****             } else {
 419:Core/Src/main.c ****                 // âœ… å‡é€ŸåŒºï¼šä½¿ç”¨ä½ç½®æŽ§åˆ¶
 420:Core/Src/main.c ****                 float speed_target = PID_Calc(&lower_motor->angle_pid, 
 421:Core/Src/main.c ****                                              lower_motor_target_angle, 
 422:Core/Src/main.c ****                                              lower_motor->total_angle);
 423:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, speed_target);
 424:Core/Src/main.c ****             }
 425:Core/Src/main.c ****         }
 426:Core/Src/main.c ****     }
 427:Core/Src/main.c ****     
 428:Core/Src/main.c ****     // å§‹ç»ˆæ˜¾ç¤ºå½“å‰çŠ¶æ€
 429:Core/Src/main.c ****     static uint32_t last_debug = 0;
 1073              		.loc 1 429 5 is_stmt 1 view .LVU240
 430:Core/Src/main.c ****     if (current_time - last_debug > 200) {
 1074              		.loc 1 430 5 view .LVU241
 1075              		.loc 1 430 22 is_stmt 0 view .LVU242
 1076 0124 654B     		ldr	r3, .L114+60
 1077 0126 1B68     		ldr	r3, [r3]
 1078 0128 E31A     		subs	r3, r4, r3
 1079              		.loc 1 430 8 view .LVU243
 1080 012a C82B     		cmp	r3, #200
 1081 012c 1AD9     		bls	.L90
 431:Core/Src/main.c ****         last_debug = current_time;
 1082              		.loc 1 431 9 is_stmt 1 view .LVU244
 1083              		.loc 1 431 20 is_stmt 0 view .LVU245
 1084 012e 634B     		ldr	r3, .L114+60
 1085 0130 1C60     		str	r4, [r3]
 432:Core/Src/main.c ****         if (lower_motor_state == STATE_NORMAL) {
 1086              		.loc 1 432 9 is_stmt 1 view .LVU246
 1087              		.loc 1 432 31 is_stmt 0 view .LVU247
 1088 0132 554B     		ldr	r3, .L114+8
 1089 0134 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1090              		.loc 1 432 12 view .LVU248
 1091 0136 002B     		cmp	r3, #0
 1092 0138 7AD1     		bne	.L91
 433:Core/Src/main.c ****             printf("[Lower] Mode=%d, State=%d, Angle=%.1fÂ°, Speed=%.1f RPM\n",
 1093              		.loc 1 433 13 is_stmt 1 view .LVU249
 1094 013a 544B     		ldr	r3, .L114+12
 1095 013c 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 1096 013e 604B     		ldr	r3, .L114+64
 1097 0140 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 1098              	.LVL98:
 1099              		.loc 1 433 13 is_stmt 0 view .LVU250
 1100 0142 18EE100A 		vmov	r0, s16
 1101 0146 FFF7FEFF 		bl	__aeabi_f2d
 1102              	.LVL99:
 1103              		.loc 1 433 13 view .LVU251
 1104 014a CDE90201 		strd	r0, [sp, #8]
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 31


 1105 014e 4D4B     		ldr	r3, .L114+4
 1106 0150 1868     		ldr	r0, [r3]	@ float
 1107 0152 FFF7FEFF 		bl	__aeabi_f2d
 1108              	.LVL100:
 1109 0156 CDE90001 		strd	r0, [sp]
 1110 015a 2A46     		mov	r2, r5
 1111 015c 2146     		mov	r1, r4
 1112 015e 5948     		ldr	r0, .L114+68
 1113 0160 FFF7FEFF 		bl	printf
 1114              	.LVL101:
 1115              	.L90:
 434:Core/Src/main.c ****                    current_mode, lower_state, accumulated_angle, target_speed);
 435:Core/Src/main.c ****         } else {
 436:Core/Src/main.c ****             printf("[Lower] RETURNING: Current=%.1fÂ°, Target=%.1fÂ°, Error=%.1fÂ°\n",
 437:Core/Src/main.c ****                    lower_motor->total_angle, lower_motor_target_angle, 
 438:Core/Src/main.c ****                    lower_motor_target_angle - lower_motor->total_angle);
 439:Core/Src/main.c ****         }
 440:Core/Src/main.c ****     }
 441:Core/Src/main.c ****     
 442:Core/Src/main.c ****     // è®¾ç½®ä¸‹ç”µæœºç›®æ ‡
 443:Core/Src/main.c ****     if (lower_motor_state == STATE_NORMAL) {
 1116              		.loc 1 443 5 is_stmt 1 view .LVU252
 1117              		.loc 1 443 27 is_stmt 0 view .LVU253
 1118 0164 484B     		ldr	r3, .L114+8
 1119 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1120              		.loc 1 443 8 view .LVU254
 1121 0168 002B     		cmp	r3, #0
 1122 016a 40F08180 		bne	.L92
 444:Core/Src/main.c ****         Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 1123              		.loc 1 444 9 is_stmt 1 view .LVU255
 1124 016e B0EE480A 		vmov.f32	s0, s16
 1125 0172 0121     		movs	r1, #1
 1126 0174 0320     		movs	r0, #3
 1127 0176 FFF7FEFF 		bl	Motor_Set_Target
 1128              	.LVL102:
 1129              	.L70:
 445:Core/Src/main.c ****     } else {
 446:Core/Src/main.c ****         // ä½ç½®æ¨¡å¼éœ€è¦ä¸²çº§æŽ§åˆ¶
 447:Core/Src/main.c ****         Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_POS_CASCADE, lower_motor_target_angle);
 448:Core/Src/main.c ****     }
 449:Core/Src/main.c **** }
 1130              		.loc 1 449 1 is_stmt 0 view .LVU256
 1131 017a 05B0     		add	sp, sp, #20
 1132              	.LCFI15:
 1133              		.cfi_remember_state
 1134              		.cfi_def_cfa_offset 28
 1135              		@ sp needed
 1136 017c BDEC048B 		vldm	sp!, {d8-d9}
 1137              	.LCFI16:
 1138              		.cfi_restore 82
 1139              		.cfi_restore 83
 1140              		.cfi_restore 80
 1141              		.cfi_restore 81
 1142              		.cfi_def_cfa_offset 12
 1143              	.LVL103:
 1144              		.loc 1 449 1 view .LVU257
 1145 0180 30BD     		pop	{r4, r5, pc}
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 32


 1146              	.LVL104:
 1147              	.L112:
 1148              	.LCFI17:
 1149              		.cfi_restore_state
 1150              	.LBB10:
 388:Core/Src/main.c ****         float abs_error = fabsf(angle_error);
 1151              		.loc 1 388 9 is_stmt 1 view .LVU258
 388:Core/Src/main.c ****         float abs_error = fabsf(angle_error);
 1152              		.loc 1 388 54 is_stmt 0 view .LVU259
 1153 0182 514B     		ldr	r3, .L114+72
 1154 0184 93ED000A 		vldr.32	s0, [r3]
 388:Core/Src/main.c ****         float abs_error = fabsf(angle_error);
 1155              		.loc 1 388 15 view .LVU260
 1156 0188 30EE607A 		vsub.f32	s14, s0, s1
 1157              	.LVL105:
 389:Core/Src/main.c ****         
 1158              		.loc 1 389 9 is_stmt 1 view .LVU261
 389:Core/Src/main.c ****         
 1159              		.loc 1 389 15 is_stmt 0 view .LVU262
 1160 018c F0EEC77A 		vabs.f32	s15, s14
 1161              	.LVL106:
 391:Core/Src/main.c ****         const float STOP_THRESHOLD = 2.0f;    // 2Â°åœæ­¢é˜ˆå€¼
 1162              		.loc 1 391 9 is_stmt 1 view .LVU263
 392:Core/Src/main.c ****         // å¦‚æžœæŽ¥è¿‘ç›®æ ‡ä½ç½®ï¼Œåœæ­¢è¿”å›ž
 1163              		.loc 1 392 9 view .LVU264
 394:Core/Src/main.c ****             // âœ… åˆ°è¾¾ç›®æ ‡ä½ç½®ï¼Œå¹³æ»‘åœæ­¢
 1164              		.loc 1 394 9 view .LVU265
 394:Core/Src/main.c ****             // âœ… åˆ°è¾¾ç›®æ ‡ä½ç½®ï¼Œå¹³æ»‘åœæ­¢
 1165              		.loc 1 394 12 is_stmt 0 view .LVU266
 1166 0190 F0EE006A 		vmov.f32	s13, #2.0e+0
 1167 0194 F4EEE67A 		vcmpe.f32	s15, s13
 1168 0198 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1169 019c 14D4     		bmi	.L113
 414:Core/Src/main.c ****                 // è¿œè·ç¦»ï¼šæœ€å¤§é€Ÿåº¦
 1170              		.loc 1 414 13 is_stmt 1 view .LVU267
 414:Core/Src/main.c ****                 // è¿œè·ç¦»ï¼šæœ€å¤§é€Ÿåº¦
 1171              		.loc 1 414 16 is_stmt 0 view .LVU268
 1172 019e F3EE0E6A 		vmov.f32	s13, #3.0e+1
 1173 01a2 F4EEE67A 		vcmpe.f32	s15, s13
 1174 01a6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1175 01aa 34DD     		ble	.L107
 416:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 1176              		.loc 1 416 17 is_stmt 1 view .LVU269
 416:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 1177              		.loc 1 416 74 is_stmt 0 view .LVU270
 1178 01ac B5EEC07A 		vcmpe.f32	s14, #0
 1179 01b0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1180 01b4 2CDD     		ble	.L108
 416:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 1181              		.loc 1 416 74 discriminator 1 view .LVU271
 1182 01b6 9FED458A 		vldr.32	s16, .L114+76
 1183              	.L88:
 1184              	.LVL107:
 417:Core/Src/main.c ****             } else {
 1185              		.loc 1 417 17 is_stmt 1 view .LVU272
 1186 01ba B0EE480A 		vmov.f32	s0, s16
 1187 01be 0121     		movs	r1, #1
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 33


 1188 01c0 0320     		movs	r0, #3
 1189              	.LVL108:
 417:Core/Src/main.c ****             } else {
 1190              		.loc 1 417 17 is_stmt 0 view .LVU273
 1191 01c2 FFF7FEFF 		bl	Motor_Set_Target
 1192              	.LVL109:
 417:Core/Src/main.c ****             } else {
 1193              		.loc 1 417 17 view .LVU274
 1194 01c6 ADE7     		b	.L72
 1195              	.LVL110:
 1196              	.L113:
 396:Core/Src/main.c ****             lower_state = ACCUM_POS;
 1197              		.loc 1 396 13 is_stmt 1 view .LVU275
 396:Core/Src/main.c ****             lower_state = ACCUM_POS;
 1198              		.loc 1 396 31 is_stmt 0 view .LVU276
 1199 01c8 0023     		movs	r3, #0
 1200 01ca 2F4A     		ldr	r2, .L114+8
 1201 01cc 1370     		strb	r3, [r2]
 397:Core/Src/main.c ****             accumulated_angle = 0.0f;
 1202              		.loc 1 397 13 is_stmt 1 view .LVU277
 397:Core/Src/main.c ****             accumulated_angle = 0.0f;
 1203              		.loc 1 397 25 is_stmt 0 view .LVU278
 1204 01ce 2F4A     		ldr	r2, .L114+12
 1205 01d0 1370     		strb	r3, [r2]
 398:Core/Src/main.c ****             target_speed = 0.0f;
 1206              		.loc 1 398 13 is_stmt 1 view .LVU279
 398:Core/Src/main.c ****             target_speed = 0.0f;
 1207              		.loc 1 398 31 is_stmt 0 view .LVU280
 1208 01d2 2C4B     		ldr	r3, .L114+4
 1209 01d4 0022     		movs	r2, #0
 1210 01d6 1A60     		str	r2, [r3]	@ float
 399:Core/Src/main.c ****             printf("=== RETURN TO INITIAL POSITION COMPLETE ===\n");
 1211              		.loc 1 399 13 is_stmt 1 view .LVU281
 400:Core/Src/main.c ****             
 1212              		.loc 1 400 13 view .LVU282
 1213 01d8 3D48     		ldr	r0, .L114+80
 1214              	.LVL111:
 400:Core/Src/main.c ****             
 1215              		.loc 1 400 13 is_stmt 0 view .LVU283
 1216 01da FFF7FEFF 		bl	puts
 1217              	.LVL112:
 403:Core/Src/main.c ****                 // ç²¾ç¡®ä½ç½®ä¿æŒ
 1218              		.loc 1 403 13 is_stmt 1 view .LVU284
 403:Core/Src/main.c ****                 // ç²¾ç¡®ä½ç½®ä¿æŒ
 1219              		.loc 1 403 30 is_stmt 0 view .LVU285
 1220 01de 384B     		ldr	r3, .L114+64
 1221 01e0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 403:Core/Src/main.c ****                 // ç²¾ç¡®ä½ç½®ä¿æŒ
 1222              		.loc 1 403 16 view .LVU286
 1223 01e2 012B     		cmp	r3, #1
 1224 01e4 01D0     		beq	.L84
 403:Core/Src/main.c ****                 // ç²¾ç¡®ä½ç½®ä¿æŒ
 1225              		.loc 1 403 51 discriminator 1 view .LVU287
 1226 01e6 032B     		cmp	r3, #3
 1227 01e8 09D1     		bne	.L85
 1228              	.L84:
 405:Core/Src/main.c ****             } else {
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 34


 1229              		.loc 1 405 17 is_stmt 1 view .LVU288
 1230 01ea 374B     		ldr	r3, .L114+72
 1231 01ec 93ED000A 		vldr.32	s0, [r3]
 1232 01f0 0221     		movs	r1, #2
 1233 01f2 0320     		movs	r0, #3
 1234 01f4 FFF7FEFF 		bl	Motor_Set_Target
 1235              	.LVL113:
 399:Core/Src/main.c ****             printf("=== RETURN TO INITIAL POSITION COMPLETE ===\n");
 1236              		.loc 1 399 26 is_stmt 0 view .LVU289
 1237 01f8 9FED2A8A 		vldr.32	s16, .L114+36
 405:Core/Src/main.c ****             } else {
 1238              		.loc 1 405 17 view .LVU290
 1239 01fc 92E7     		b	.L72
 1240              	.L85:
 408:Core/Src/main.c ****             }
 1241              		.loc 1 408 17 is_stmt 1 view .LVU291
 1242 01fe 9FED250A 		vldr.32	s0, .L114+20
 1243 0202 0121     		movs	r1, #1
 1244 0204 0320     		movs	r0, #3
 1245 0206 FFF7FEFF 		bl	Motor_Set_Target
 1246              	.LVL114:
 399:Core/Src/main.c ****             printf("=== RETURN TO INITIAL POSITION COMPLETE ===\n");
 1247              		.loc 1 399 26 is_stmt 0 view .LVU292
 1248 020a 9FED268A 		vldr.32	s16, .L114+36
 1249 020e 89E7     		b	.L72
 1250              	.LVL115:
 1251              	.L108:
 416:Core/Src/main.c ****                 Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, target_speed);
 1252              		.loc 1 416 74 discriminator 2 view .LVU293
 1253 0210 9FED308A 		vldr.32	s16, .L114+84
 1254 0214 D1E7     		b	.L88
 1255              	.L107:
 1256              	.LBB11:
 420:Core/Src/main.c ****                                              lower_motor_target_angle, 
 1257              		.loc 1 420 17 is_stmt 1 view .LVU294
 420:Core/Src/main.c ****                                              lower_motor_target_angle, 
 1258              		.loc 1 420 38 is_stmt 0 view .LVU295
 1259 0216 3048     		ldr	r0, .L114+88
 1260              	.LVL116:
 420:Core/Src/main.c ****                                              lower_motor_target_angle, 
 1261              		.loc 1 420 38 view .LVU296
 1262 0218 FFF7FEFF 		bl	PID_Calc
 1263              	.LVL117:
 423:Core/Src/main.c ****             }
 1264              		.loc 1 423 17 is_stmt 1 view .LVU297
 1265 021c 0121     		movs	r1, #1
 1266 021e 0320     		movs	r0, #3
 1267 0220 FFF7FEFF 		bl	Motor_Set_Target
 1268              	.LVL118:
 423:Core/Src/main.c ****             }
 1269              		.loc 1 423 17 is_stmt 0 view .LVU298
 1270              	.LBE11:
 1271              	.LBE10:
 337:Core/Src/main.c ****     
 1272              		.loc 1 337 11 view .LVU299
 1273 0224 9FED1F8A 		vldr.32	s16, .L114+36
 1274 0228 7CE7     		b	.L72
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 35


 1275              	.LVL119:
 1276              	.L94:
 343:Core/Src/main.c ****             case ACCUM_POS:
 1277              		.loc 1 343 9 view .LVU300
 1278 022a 9FED1E8A 		vldr.32	s16, .L114+36
 1279 022e 79E7     		b	.L72
 1280              	.LVL120:
 1281              	.L91:
 436:Core/Src/main.c ****                    lower_motor->total_angle, lower_motor_target_angle, 
 1282              		.loc 1 436 13 is_stmt 1 view .LVU301
 437:Core/Src/main.c ****                    lower_motor_target_angle - lower_motor->total_angle);
 1283              		.loc 1 437 31 is_stmt 0 view .LVU302
 1284 0230 134B     		ldr	r3, .L114
 1285 0232 D3ED807A 		vldr.32	s15, [r3, #512]
 436:Core/Src/main.c ****                    lower_motor->total_angle, lower_motor_target_angle, 
 1286              		.loc 1 436 13 view .LVU303
 1287 0236 244B     		ldr	r3, .L114+72
 1288 0238 D3ED008A 		vldr.32	s17, [r3]
 438:Core/Src/main.c ****         }
 1289              		.loc 1 438 45 view .LVU304
 1290 023c 38EEE79A 		vsub.f32	s18, s17, s15
 436:Core/Src/main.c ****                    lower_motor->total_angle, lower_motor_target_angle, 
 1291              		.loc 1 436 13 view .LVU305
 1292 0240 17EE900A 		vmov	r0, s15
 1293 0244 FFF7FEFF 		bl	__aeabi_f2d
 1294              	.LVL121:
 1295 0248 0446     		mov	r4, r0
 1296              	.LVL122:
 436:Core/Src/main.c ****                    lower_motor->total_angle, lower_motor_target_angle, 
 1297              		.loc 1 436 13 view .LVU306
 1298 024a 0D46     		mov	r5, r1
 1299 024c 19EE100A 		vmov	r0, s18
 1300 0250 FFF7FEFF 		bl	__aeabi_f2d
 1301              	.LVL123:
 1302 0254 CDE90201 		strd	r0, [sp, #8]
 1303 0258 18EE900A 		vmov	r0, s17
 1304 025c FFF7FEFF 		bl	__aeabi_f2d
 1305              	.LVL124:
 1306 0260 CDE90001 		strd	r0, [sp]
 1307 0264 2246     		mov	r2, r4
 1308 0266 2B46     		mov	r3, r5
 1309 0268 1C48     		ldr	r0, .L114+92
 1310 026a FFF7FEFF 		bl	printf
 1311              	.LVL125:
 1312 026e 79E7     		b	.L90
 1313              	.L92:
 447:Core/Src/main.c ****     }
 1314              		.loc 1 447 9 is_stmt 1 view .LVU307
 1315 0270 154B     		ldr	r3, .L114+72
 1316 0272 93ED000A 		vldr.32	s0, [r3]
 1317 0276 0221     		movs	r1, #2
 1318 0278 0320     		movs	r0, #3
 1319 027a FFF7FEFF 		bl	Motor_Set_Target
 1320              	.LVL126:
 1321              		.loc 1 449 1 is_stmt 0 view .LVU308
 1322 027e 7CE7     		b	.L70
 1323              	.L115:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 36


 1324              		.align	2
 1325              	.L114:
 1326 0280 00000000 		.word	gm6020_motors
 1327 0284 00000000 		.word	accumulated_angle
 1328 0288 00000000 		.word	lower_motor_state
 1329 028c 00000000 		.word	lower_state
 1330 0290 00401245 		.word	1158823936
 1331 0294 00004842 		.word	1112014848
 1332 0298 00000000 		.word	transition_start_time
 1333 029c 00000000 		.word	.LC6
 1334 02a0 0000FA43 		.word	1140457472
 1335 02a4 00000000 		.word	0
 1336 02a8 2C000000 		.word	.LC7
 1337 02ac 004012C5 		.word	-988659712
 1338 02b0 000048C2 		.word	-1035468800
 1339 02b4 54000000 		.word	.LC8
 1340 02b8 80000000 		.word	.LC9
 1341 02bc 00000000 		.word	last_debug.1
 1342 02c0 00000000 		.word	current_mode
 1343 02c4 D4000000 		.word	.LC11
 1344 02c8 00000000 		.word	lower_motor_target_angle
 1345 02cc 0000F042 		.word	1123024896
 1346 02d0 A8000000 		.word	.LC10
 1347 02d4 0000F0C2 		.word	-1024458752
 1348 02d8 4C020000 		.word	gm6020_motors+588
 1349 02dc 10010000 		.word	.LC12
 1350              		.cfi_endproc
 1351              	.LFE144:
 1353              		.section	.text.Error_Handler,"ax",%progbits
 1354              		.align	1
 1355              		.global	Error_Handler
 1356              		.syntax unified
 1357              		.thumb
 1358              		.thumb_func
 1360              	Error_Handler:
 1361              	.LFB147:
 450:Core/Src/main.c **** /* USER CODE END 0 */
 451:Core/Src/main.c **** 
 452:Core/Src/main.c **** /**
 453:Core/Src/main.c ****   * @brief  The application entry point.
 454:Core/Src/main.c ****   * @retval int
 455:Core/Src/main.c ****   */
 456:Core/Src/main.c **** int main(void)
 457:Core/Src/main.c **** {
 458:Core/Src/main.c ****     /* USER CODE BEGIN 1 */
 459:Core/Src/main.c **** 
 460:Core/Src/main.c ****     /* USER CODE END 1 */
 461:Core/Src/main.c **** 
 462:Core/Src/main.c ****     /* MCU Configuration--------------------------------------------------------*/
 463:Core/Src/main.c ****     HAL_Init();
 464:Core/Src/main.c ****     SystemClock_Config();
 465:Core/Src/main.c ****     MX_GPIO_Init();
 466:Core/Src/main.c ****     MX_CAN1_Init();
 467:Core/Src/main.c ****     
 468:Core/Src/main.c ****     /* USER CODE BEGIN 2 */
 469:Core/Src/main.c ****     // åˆå§‹åŒ–æŒ‰é”®
 470:Core/Src/main.c ****     
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 37


 471:Core/Src/main.c ****     Motor_Init_All();
 472:Core/Src/main.c ****     BSP_CAN_Init();
 473:Core/Src/main.c ****     
 474:Core/Src/main.c ****     // ä¿å­˜ä¸‹ç”µæœºåˆå§‹ä½ç½®
 475:Core/Src/main.c ****     lower_motor_initial_angle = gm6020_motors[LOWER_MOTOR_ID-1].total_angle;
 476:Core/Src/main.c ****     printf("Lower motor initial angle: %.1fÂ°\n", lower_motor_initial_angle);
 477:Core/Src/main.c ****     
 478:Core/Src/main.c ****     // åˆå§‹åŒ–ç”µæœº
 479:Core/Src/main.c ****     Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, UPPER_MOTOR_SPEED);
 480:Core/Src/main.c ****     Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 481:Core/Src/main.c ****     
 482:Core/Src/main.c ****     // é‡åŠ›è¡¥å¿å‚æ•° (ä¸Šç”µæœº)
 483:Core/Src/main.c ****     gm6020_motors[3].horizon_ecd = 4096;
 484:Core/Src/main.c ****     gm6020_motors[3].gravity_gain = 0.0f;
 485:Core/Src/main.c ****     /* USER CODE END 2 */
 486:Core/Src/main.c **** 
 487:Core/Src/main.c ****     /* Infinite loop */
 488:Core/Src/main.c ****     /* USER CODE BEGIN WHILE */
 489:Core/Src/main.c ****     while (1)
 490:Core/Src/main.c ****     {
 491:Core/Src/main.c ****         /* USER CODE END WHILE */
 492:Core/Src/main.c ****         static uint32_t last_update = 0;
 493:Core/Src/main.c ****         if (HAL_GetTick() - last_update >= 5) {
 494:Core/Src/main.c ****             last_update = HAL_GetTick();
 495:Core/Src/main.c ****             
 496:Core/Src/main.c ****             // 1. æ£€æµ‹æŒ‰é”®è¾“å…¥
 497:Core/Src/main.c ****             Check_Key_Inputs();
 498:Core/Src/main.c ****             
 499:Core/Src/main.c ****             // 2. å¤„ç†æ¨¡å¼è¿‡æ¸¡
 500:Core/Src/main.c ****             Process_Mode_Transition();
 501:Core/Src/main.c ****             
 502:Core/Src/main.c ****             // 3. æ›´æ–°ä¸‹ç”µæœºæŽ§åˆ¶
 503:Core/Src/main.c ****             if (current_mode == MODE_BOTH_MOVING || 
 504:Core/Src/main.c ****                 current_mode == MODE_LOWER_MOVING) {
 505:Core/Src/main.c ****                 Update_Lower_Motor_Control();
 506:Core/Src/main.c ****             }
 507:Core/Src/main.c ****             
 508:Core/Src/main.c ****             // 4. æ›´æ–°ä¸Šç”µæœºæŽ§åˆ¶
 509:Core/Src/main.c ****             if (current_mode == MODE_BOTH_MOVING || 
 510:Core/Src/main.c ****                 current_mode == MODE_UPPER_MOVING) {
 511:Core/Src/main.c ****                 Motor_Set_Target(UPPER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, UPPER_MOTOR_SPEED);
 512:Core/Src/main.c ****             } else {
 513:Core/Src/main.c ****                 Reset_Upper_Motor_Position();
 514:Core/Src/main.c ****             }
 515:Core/Src/main.c ****             
 516:Core/Src/main.c ****             // 5. æ‰§è¡Œç”µæœºæŽ§åˆ¶
 517:Core/Src/main.c ****             Motor_Control_Loop();
 518:Core/Src/main.c ****         }
 519:Core/Src/main.c ****         HAL_Delay(1);
 520:Core/Src/main.c ****         /* USER CODE BEGIN 3 */
 521:Core/Src/main.c ****     }
 522:Core/Src/main.c ****     /* USER CODE END 3 */
 523:Core/Src/main.c **** }
 524:Core/Src/main.c **** 
 525:Core/Src/main.c **** /**
 526:Core/Src/main.c ****   * @brief System Clock Configuration
 527:Core/Src/main.c ****   * @retval None
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 38


 528:Core/Src/main.c ****   */
 529:Core/Src/main.c **** void SystemClock_Config(void)
 530:Core/Src/main.c **** {
 531:Core/Src/main.c ****     RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 532:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 533:Core/Src/main.c **** 
 534:Core/Src/main.c ****     __HAL_RCC_PWR_CLK_ENABLE();
 535:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 536:Core/Src/main.c **** 
 537:Core/Src/main.c ****     RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
 538:Core/Src/main.c ****     RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 539:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 540:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 541:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLM = 6;
 542:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLN = 168;
 543:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 544:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLQ = 4;
 545:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 546:Core/Src/main.c ****     {
 547:Core/Src/main.c ****         Error_Handler();
 548:Core/Src/main.c ****     }
 549:Core/Src/main.c **** 
 550:Core/Src/main.c ****     RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 551:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 552:Core/Src/main.c ****     RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 553:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 554:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
 555:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;
 556:Core/Src/main.c **** 
 557:Core/Src/main.c ****     if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
 558:Core/Src/main.c ****     {
 559:Core/Src/main.c ****         Error_Handler();
 560:Core/Src/main.c ****     }
 561:Core/Src/main.c **** }
 562:Core/Src/main.c **** 
 563:Core/Src/main.c **** /* USER CODE BEGIN 4 */
 564:Core/Src/main.c **** 
 565:Core/Src/main.c **** /* USER CODE END 4 */
 566:Core/Src/main.c **** 
 567:Core/Src/main.c **** /**
 568:Core/Src/main.c ****   * @brief  This function is executed in case of error occurrence.
 569:Core/Src/main.c ****   * @retval None
 570:Core/Src/main.c ****   */
 571:Core/Src/main.c **** void Error_Handler(void)
 572:Core/Src/main.c **** {
 1362              		.loc 1 572 1 is_stmt 1 view -0
 1363              		.cfi_startproc
 1364              		@ Volatile: function does not return.
 1365              		@ args = 0, pretend = 0, frame = 0
 1366              		@ frame_needed = 0, uses_anonymous_args = 0
 1367              		@ link register save eliminated.
 573:Core/Src/main.c ****     /* USER CODE BEGIN Error_Handler_Debug */
 574:Core/Src/main.c ****     __disable_irq();
 1368              		.loc 1 574 5 view .LVU310
 1369              	.LBB12:
 1370              	.LBI12:
 1371              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 39


   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.4.1
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     27. May 2021
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2021 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 40


  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 41


 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __COMPILER_BARRIER
 117:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __COMPILER_BARRIER()                   __ASM volatile("":::"memory")
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 120:Drivers/CMSIS/Include/cmsis_gcc.h **** /* #########################  Startup and Lowlevel Init  ######################## */
 121:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 122:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __PROGRAM_START
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Initializes data and bss sections
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details This default implementations initialized all data and additional bss
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            sections relying on .copy.table and .zero.table specified properly
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****            in the used linker script.
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 130:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE __NO_RETURN void __cmsis_start(void)
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 133:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern void _start(void) __NO_RETURN;
 134:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 135:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t const* src;
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __copy_table_t;
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 141:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 143:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 144:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __zero_table_t;
 145:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 146:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_start__;
 147:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_end__;
 148:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_start__;
 149:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_end__;
 150:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 151:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__copy_table_t const* pTable = &__copy_table_start__; pTable < &__copy_table_end__; ++pTable
 152:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 153:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = pTable->src[i];
 154:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 155:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 156:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 157:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__zero_table_t const* pTable = &__zero_table_start__; pTable < &__zero_table_end__; ++pTable
 158:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 159:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = 0u;
 160:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 161:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 162:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 163:Drivers/CMSIS/Include/cmsis_gcc.h ****   _start();
 164:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 165:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 166:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __PROGRAM_START           __cmsis_start
 167:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 168:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 169:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __INITIAL_SP
 170:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __INITIAL_SP              __StackTop
 171:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 42


 172:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 173:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __STACK_LIMIT
 174:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __STACK_LIMIT             __StackLimit
 175:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 176:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 177:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE
 178:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE            __Vectors
 179:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 180:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 181:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE_ATTRIBUTE
 182:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE_ATTRIBUTE  __attribute__((used, section(".vectors")))
 183:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 184:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 185:Drivers/CMSIS/Include/cmsis_gcc.h **** #if defined (__ARM_FEATURE_CMSE) && (__ARM_FEATURE_CMSE == 3U)
 186:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __STACK_SEAL
 187:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __STACK_SEAL              __StackSeal
 188:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 189:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 190:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __TZ_STACK_SEAL_SIZE
 191:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __TZ_STACK_SEAL_SIZE      8U
 192:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 193:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 194:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __TZ_STACK_SEAL_VALUE
 195:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __TZ_STACK_SEAL_VALUE     0xFEF5EDA5FEF5EDA5ULL
 196:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 197:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 198:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 199:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __TZ_set_STACKSEAL_S (uint32_t* stackTop) {
 200:Drivers/CMSIS/Include/cmsis_gcc.h ****   *((uint64_t *)stackTop) = __TZ_STACK_SEAL_VALUE;
 201:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 202:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 203:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 204:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 205:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ##########################  Core Instruction Access  ######################### */
 206:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \defgroup CMSIS_Core_InstructionInterface CMSIS Core Instruction Interface
 207:Drivers/CMSIS/Include/cmsis_gcc.h ****   Access to dedicated instructions
 208:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 209:Drivers/CMSIS/Include/cmsis_gcc.h **** */
 210:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 211:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Define macros for porting to both thumb1 and thumb2.
 212:Drivers/CMSIS/Include/cmsis_gcc.h ****  * For thumb1, use low register (r0-r7), specified by constraint "l"
 213:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Otherwise, use general registers, specified by constraint "r" */
 214:Drivers/CMSIS/Include/cmsis_gcc.h **** #if defined (__thumb__) && !defined (__thumb2__)
 215:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_OUT_REG(r) "=l" (r)
 216:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_RW_REG(r) "+l" (r)
 217:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_USE_REG(r) "l" (r)
 218:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 219:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_OUT_REG(r) "=r" (r)
 220:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_RW_REG(r) "+r" (r)
 221:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_USE_REG(r) "r" (r)
 222:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 223:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 224:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 225:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   No Operation
 226:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details No Operation does nothing. This instruction can be used for code alignment purposes.
 227:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 228:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __NOP()                             __ASM volatile ("nop")
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 43


 229:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 230:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 231:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Wait For Interrupt
 232:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Wait For Interrupt is a hint instruction that suspends execution until one of a number o
 233:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 234:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __WFI()                             __ASM volatile ("wfi":::"memory")
 235:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 236:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 237:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 238:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Wait For Event
 239:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Wait For Event is a hint instruction that permits the processor to enter
 240:Drivers/CMSIS/Include/cmsis_gcc.h ****            a low-power state until one of a number of events occurs.
 241:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 242:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __WFE()                             __ASM volatile ("wfe":::"memory")
 243:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 244:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 245:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 246:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Send Event
 247:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Send Event is a hint instruction. It causes an event to be signaled to the CPU.
 248:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 249:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __SEV()                             __ASM volatile ("sev")
 250:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 251:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 252:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 253:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Instruction Synchronization Barrier
 254:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Instruction Synchronization Barrier flushes the pipeline in the processor,
 255:Drivers/CMSIS/Include/cmsis_gcc.h ****            so that all instructions following the ISB are fetched from cache or memory,
 256:Drivers/CMSIS/Include/cmsis_gcc.h ****            after the instruction has been completed.
 257:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 258:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __ISB(void)
 259:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 260:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("isb 0xF":::"memory");
 261:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 262:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 263:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 264:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 265:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Data Synchronization Barrier
 266:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Acts as a special kind of Data Memory Barrier.
 267:Drivers/CMSIS/Include/cmsis_gcc.h ****            It completes when all explicit memory accesses before this instruction complete.
 268:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 269:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __DSB(void)
 270:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 271:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("dsb 0xF":::"memory");
 272:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 273:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 274:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 275:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 276:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Data Memory Barrier
 277:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Ensures the apparent order of the explicit memory operations before
 278:Drivers/CMSIS/Include/cmsis_gcc.h ****            and after the instruction, without ensuring their completion.
 279:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 280:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __DMB(void)
 281:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 282:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("dmb 0xF":::"memory");
 283:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 284:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 285:Drivers/CMSIS/Include/cmsis_gcc.h **** 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 44


 286:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 287:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Reverse byte order (32 bit)
 288:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Reverses the byte order in unsigned integer value. For example, 0x12345678 becomes 0x785
 289:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  Value to reverse
 290:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Reversed value
 291:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 292:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __REV(uint32_t value)
 293:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 294:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 5)
 295:Drivers/CMSIS/Include/cmsis_gcc.h ****   return __builtin_bswap32(value);
 296:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 297:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 298:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 299:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM ("rev %0, %1" : __CMSIS_GCC_OUT_REG (result) : __CMSIS_GCC_USE_REG (value) );
 300:Drivers/CMSIS/Include/cmsis_gcc.h ****   return result;
 301:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 302:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 303:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 304:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 305:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 306:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Reverse byte order (16 bit)
 307:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Reverses the byte order within each halfword of a word. For example, 0x12345678 becomes 
 308:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  Value to reverse
 309:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Reversed value
 310:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 311:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __REV16(uint32_t value)
 312:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 313:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 314:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 315:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM ("rev16 %0, %1" : __CMSIS_GCC_OUT_REG (result) : __CMSIS_GCC_USE_REG (value) );
 316:Drivers/CMSIS/Include/cmsis_gcc.h ****   return result;
 317:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 318:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 319:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 320:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 321:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Reverse byte order (16 bit)
 322:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Reverses the byte order in a 16-bit value and returns the signed 16-bit result. For exam
 323:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  Value to reverse
 324:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Reversed value
 325:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 326:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE int16_t __REVSH(int16_t value)
 327:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 328:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 8)
 329:Drivers/CMSIS/Include/cmsis_gcc.h ****   return (int16_t)__builtin_bswap16(value);
 330:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 331:Drivers/CMSIS/Include/cmsis_gcc.h ****   int16_t result;
 332:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 333:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM ("revsh %0, %1" : __CMSIS_GCC_OUT_REG (result) : __CMSIS_GCC_USE_REG (value) );
 334:Drivers/CMSIS/Include/cmsis_gcc.h ****   return result;
 335:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 336:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 337:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 338:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 339:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 340:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Rotate Right in unsigned value (32 bit)
 341:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Rotate Right (immediate) provides the value of the contents of a register rotated by a v
 342:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    op1  Value to rotate
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 45


 343:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    op2  Number of Bits to rotate
 344:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Rotated value
 345:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 346:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __ROR(uint32_t op1, uint32_t op2)
 347:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 348:Drivers/CMSIS/Include/cmsis_gcc.h ****   op2 %= 32U;
 349:Drivers/CMSIS/Include/cmsis_gcc.h ****   if (op2 == 0U)
 350:Drivers/CMSIS/Include/cmsis_gcc.h ****   {
 351:Drivers/CMSIS/Include/cmsis_gcc.h ****     return op1;
 352:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 353:Drivers/CMSIS/Include/cmsis_gcc.h ****   return (op1 >> op2) | (op1 << (32U - op2));
 354:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 355:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 356:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 357:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 358:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Breakpoint
 359:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Causes the processor to enter Debug state.
 360:Drivers/CMSIS/Include/cmsis_gcc.h ****            Debug tools can use this to investigate system state when the instruction at a particula
 361:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  is ignored by the processor.
 362:Drivers/CMSIS/Include/cmsis_gcc.h ****                  If required, a debugger can use it to store additional information about the break
 363:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 364:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __BKPT(value)                       __ASM volatile ("bkpt "#value)
 365:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 366:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 367:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 368:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Reverse bit order of value
 369:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Reverses the bit order of the given value.
 370:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  Value to reverse
 371:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Reversed value
 372:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 373:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __RBIT(uint32_t value)
 374:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 375:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 376:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 377:Drivers/CMSIS/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 378:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 379:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    )
 380:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM ("rbit %0, %1" : "=r" (result) : "r" (value) );
 381:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 382:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t s = (4U /*sizeof(v)*/ * 8U) - 1U; /* extra shift needed at end */
 383:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 384:Drivers/CMSIS/Include/cmsis_gcc.h ****   result = value;                      /* r will be reversed bits of v; first get LSB of v */
 385:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (value >>= 1U; value != 0U; value >>= 1U)
 386:Drivers/CMSIS/Include/cmsis_gcc.h ****   {
 387:Drivers/CMSIS/Include/cmsis_gcc.h ****     result <<= 1U;
 388:Drivers/CMSIS/Include/cmsis_gcc.h ****     result |= value & 1U;
 389:Drivers/CMSIS/Include/cmsis_gcc.h ****     s--;
 390:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 391:Drivers/CMSIS/Include/cmsis_gcc.h ****   result <<= s;                        /* shift when v's highest bits are zero */
 392:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 393:Drivers/CMSIS/Include/cmsis_gcc.h ****   return result;
 394:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 395:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 396:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 397:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 398:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Count leading zeros
 399:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Counts the number of leading zeros of a data value.
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 46


 400:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to count the leading zeros
 401:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             number of leading zeros in value
 402:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 403:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint8_t __CLZ(uint32_t value)
 404:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 405:Drivers/CMSIS/Include/cmsis_gcc.h ****   /* Even though __builtin_clz produces a CLZ instruction on ARM, formally
 406:Drivers/CMSIS/Include/cmsis_gcc.h ****      __builtin_clz(0) is undefined behaviour, so handle this case specially.
 407:Drivers/CMSIS/Include/cmsis_gcc.h ****      This guarantees ARM-compatible results if happening to compile on a non-ARM
 408:Drivers/CMSIS/Include/cmsis_gcc.h ****      target, and ensures the compiler doesn't decide to activate any
 409:Drivers/CMSIS/Include/cmsis_gcc.h ****      optimisations using the logic "value was passed to __builtin_clz, so it
 410:Drivers/CMSIS/Include/cmsis_gcc.h ****      is non-zero".
 411:Drivers/CMSIS/Include/cmsis_gcc.h ****      ARM GCC 7.3 and possibly earlier will optimise this test away, leaving a
 412:Drivers/CMSIS/Include/cmsis_gcc.h ****      single CLZ instruction.
 413:Drivers/CMSIS/Include/cmsis_gcc.h ****    */
 414:Drivers/CMSIS/Include/cmsis_gcc.h ****   if (value == 0U)
 415:Drivers/CMSIS/Include/cmsis_gcc.h ****   {
 416:Drivers/CMSIS/Include/cmsis_gcc.h ****     return 32U;
 417:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 418:Drivers/CMSIS/Include/cmsis_gcc.h ****   return __builtin_clz(value);
 419:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 420:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 421:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 422:Drivers/CMSIS/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 423:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 424:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1)) || \
 425:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_BASE__ ) && (__ARM_ARCH_8M_BASE__ == 1))    )
 426:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 427:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDR Exclusive (8 bit)
 428:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive LDR instruction for 8 bit value.
 429:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 430:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             value of type uint8_t at (*ptr)
 431:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 432:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint8_t __LDREXB(volatile uint8_t *addr)
 433:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 434:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 435:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 436:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 8)
 437:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrexb %0, %1" : "=r" (result) : "Q" (*addr) );
 438:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 439:Drivers/CMSIS/Include/cmsis_gcc.h ****     /* Prior to GCC 4.8, "Q" will be expanded to [rx, #0] which is not
 440:Drivers/CMSIS/Include/cmsis_gcc.h ****        accepted by assembler. So has to use following less efficient pattern.
 441:Drivers/CMSIS/Include/cmsis_gcc.h ****     */
 442:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrexb %0, [%1]" : "=r" (result) : "r" (addr) : "memory" );
 443:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 444:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint8_t) result);    /* Add explicit type cast here */
 445:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 446:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 447:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 448:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 449:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDR Exclusive (16 bit)
 450:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive LDR instruction for 16 bit values.
 451:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 452:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint16_t at (*ptr)
 453:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 454:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint16_t __LDREXH(volatile uint16_t *addr)
 455:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 456:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 47


 457:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 458:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 8)
 459:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrexh %0, %1" : "=r" (result) : "Q" (*addr) );
 460:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 461:Drivers/CMSIS/Include/cmsis_gcc.h ****     /* Prior to GCC 4.8, "Q" will be expanded to [rx, #0] which is not
 462:Drivers/CMSIS/Include/cmsis_gcc.h ****        accepted by assembler. So has to use following less efficient pattern.
 463:Drivers/CMSIS/Include/cmsis_gcc.h ****     */
 464:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrexh %0, [%1]" : "=r" (result) : "r" (addr) : "memory" );
 465:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 466:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint16_t) result);    /* Add explicit type cast here */
 467:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 468:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 469:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 470:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 471:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDR Exclusive (32 bit)
 472:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive LDR instruction for 32 bit values.
 473:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 474:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint32_t at (*ptr)
 475:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 476:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __LDREXW(volatile uint32_t *addr)
 477:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 478:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 479:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 480:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrex %0, %1" : "=r" (result) : "Q" (*addr) );
 481:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 482:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 483:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 484:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 485:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 486:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STR Exclusive (8 bit)
 487:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive STR instruction for 8 bit values.
 488:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 489:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 490:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 491:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 492:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 493:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STREXB(uint8_t value, volatile uint8_t *addr)
 494:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 495:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 496:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 497:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strexb %0, %2, %1" : "=&r" (result), "=Q" (*addr) : "r" ((uint32_t)value) );
 498:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 499:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 500:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 501:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 502:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 503:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STR Exclusive (16 bit)
 504:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive STR instruction for 16 bit values.
 505:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 506:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 507:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 508:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 509:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 510:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STREXH(uint16_t value, volatile uint16_t *addr)
 511:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 512:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 513:Drivers/CMSIS/Include/cmsis_gcc.h **** 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 48


 514:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strexh %0, %2, %1" : "=&r" (result), "=Q" (*addr) : "r" ((uint32_t)value) );
 515:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 516:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 517:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 518:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 519:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 520:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STR Exclusive (32 bit)
 521:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a exclusive STR instruction for 32 bit values.
 522:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 523:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 524:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 525:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 526:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 527:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STREXW(uint32_t value, volatile uint32_t *addr)
 528:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 529:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 530:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 531:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strex %0, %2, %1" : "=&r" (result), "=Q" (*addr) : "r" (value) );
 532:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 533:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 534:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 535:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 536:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 537:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Remove the exclusive lock
 538:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Removes the exclusive lock which is created by LDREX.
 539:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 540:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __CLREX(void)
 541:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 542:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("clrex" ::: "memory");
 543:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 544:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 545:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif /* ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 546:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 547:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1)) || \
 548:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_8M_BASE__ ) && (__ARM_ARCH_8M_BASE__ == 1))    ) */
 549:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 550:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 551:Drivers/CMSIS/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 552:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 553:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    )
 554:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 555:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Signed Saturate
 556:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Saturates a signed value.
 557:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  ARG1  Value to be saturated
 558:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  ARG2  Bit position to saturate to (1..32)
 559:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             Saturated value
 560:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 561:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __SSAT(ARG1, ARG2) \
 562:Drivers/CMSIS/Include/cmsis_gcc.h **** __extension__ \
 563:Drivers/CMSIS/Include/cmsis_gcc.h **** ({                          \
 564:Drivers/CMSIS/Include/cmsis_gcc.h ****   int32_t __RES, __ARG1 = (ARG1); \
 565:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("ssat %0, %1, %2" : "=r" (__RES) :  "I" (ARG2), "r" (__ARG1) : "cc" ); \
 566:Drivers/CMSIS/Include/cmsis_gcc.h ****   __RES; \
 567:Drivers/CMSIS/Include/cmsis_gcc.h ****  })
 568:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 569:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 570:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 49


 571:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Unsigned Saturate
 572:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Saturates an unsigned value.
 573:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  ARG1  Value to be saturated
 574:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  ARG2  Bit position to saturate to (0..31)
 575:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             Saturated value
 576:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 577:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __USAT(ARG1, ARG2) \
 578:Drivers/CMSIS/Include/cmsis_gcc.h **** __extension__ \
 579:Drivers/CMSIS/Include/cmsis_gcc.h **** ({                          \
 580:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t __RES, __ARG1 = (ARG1); \
 581:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("usat %0, %1, %2" : "=r" (__RES) :  "I" (ARG2), "r" (__ARG1) : "cc" ); \
 582:Drivers/CMSIS/Include/cmsis_gcc.h ****   __RES; \
 583:Drivers/CMSIS/Include/cmsis_gcc.h ****  })
 584:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 585:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 586:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 587:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Rotate Right with Extend (32 bit)
 588:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Moves each bit of a bitstring right by one bit.
 589:Drivers/CMSIS/Include/cmsis_gcc.h ****            The carry input is shifted in at the left end of the bitstring.
 590:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    value  Value to rotate
 591:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return               Rotated value
 592:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 593:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __RRX(uint32_t value)
 594:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 595:Drivers/CMSIS/Include/cmsis_gcc.h ****   uint32_t result;
 596:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 597:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("rrx %0, %1" : __CMSIS_GCC_OUT_REG (result) : __CMSIS_GCC_USE_REG (value) );
 598:Drivers/CMSIS/Include/cmsis_gcc.h ****   return(result);
 599:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 600:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 601:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 602:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 603:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDRT Unprivileged (8 bit)
 604:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged LDRT instruction for 8 bit value.
 605:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 606:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             value of type uint8_t at (*ptr)
 607:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 608:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint8_t __LDRBT(volatile uint8_t *ptr)
 609:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 610:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 611:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 612:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 8)
 613:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrbt %0, %1" : "=r" (result) : "Q" (*ptr) );
 614:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 615:Drivers/CMSIS/Include/cmsis_gcc.h ****     /* Prior to GCC 4.8, "Q" will be expanded to [rx, #0] which is not
 616:Drivers/CMSIS/Include/cmsis_gcc.h ****        accepted by assembler. So has to use following less efficient pattern.
 617:Drivers/CMSIS/Include/cmsis_gcc.h ****     */
 618:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrbt %0, [%1]" : "=r" (result) : "r" (ptr) : "memory" );
 619:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 620:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint8_t) result);    /* Add explicit type cast here */
 621:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 622:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 623:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 624:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 625:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDRT Unprivileged (16 bit)
 626:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged LDRT instruction for 16 bit values.
 627:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 50


 628:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint16_t at (*ptr)
 629:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 630:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint16_t __LDRHT(volatile uint16_t *ptr)
 631:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 632:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 633:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 634:Drivers/CMSIS/Include/cmsis_gcc.h **** #if (__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 8)
 635:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrht %0, %1" : "=r" (result) : "Q" (*ptr) );
 636:Drivers/CMSIS/Include/cmsis_gcc.h **** #else
 637:Drivers/CMSIS/Include/cmsis_gcc.h ****     /* Prior to GCC 4.8, "Q" will be expanded to [rx, #0] which is not
 638:Drivers/CMSIS/Include/cmsis_gcc.h ****        accepted by assembler. So has to use following less efficient pattern.
 639:Drivers/CMSIS/Include/cmsis_gcc.h ****     */
 640:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrht %0, [%1]" : "=r" (result) : "r" (ptr) : "memory" );
 641:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 642:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint16_t) result);    /* Add explicit type cast here */
 643:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 644:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 645:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 646:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 647:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   LDRT Unprivileged (32 bit)
 648:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged LDRT instruction for 32 bit values.
 649:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 650:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint32_t at (*ptr)
 651:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 652:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __LDRT(volatile uint32_t *ptr)
 653:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 654:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 655:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 656:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldrt %0, %1" : "=r" (result) : "Q" (*ptr) );
 657:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 658:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 659:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 660:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 661:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 662:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STRT Unprivileged (8 bit)
 663:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged STRT instruction for 8 bit values.
 664:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 665:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 666:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 667:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STRBT(uint8_t value, volatile uint8_t *ptr)
 668:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 669:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strbt %1, %0" : "=Q" (*ptr) : "r" ((uint32_t)value) );
 670:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 671:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 672:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 673:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 674:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STRT Unprivileged (16 bit)
 675:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged STRT instruction for 16 bit values.
 676:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 677:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 678:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 679:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STRHT(uint16_t value, volatile uint16_t *ptr)
 680:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 681:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strht %1, %0" : "=Q" (*ptr) : "r" ((uint32_t)value) );
 682:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 683:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 684:Drivers/CMSIS/Include/cmsis_gcc.h **** 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 51


 685:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 686:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   STRT Unprivileged (32 bit)
 687:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a Unprivileged STRT instruction for 32 bit values.
 688:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 689:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 690:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 691:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STRT(uint32_t value, volatile uint32_t *ptr)
 692:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 693:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("strt %1, %0" : "=Q" (*ptr) : "r" (value) );
 694:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 695:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 696:Drivers/CMSIS/Include/cmsis_gcc.h **** #else  /* ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 697:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 698:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    ) */
 699:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 700:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 701:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Signed Saturate
 702:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Saturates a signed value.
 703:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to be saturated
 704:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    sat  Bit position to saturate to (1..32)
 705:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             Saturated value
 706:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 707:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE int32_t __SSAT(int32_t val, uint32_t sat)
 708:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 709:Drivers/CMSIS/Include/cmsis_gcc.h ****   if ((sat >= 1U) && (sat <= 32U))
 710:Drivers/CMSIS/Include/cmsis_gcc.h ****   {
 711:Drivers/CMSIS/Include/cmsis_gcc.h ****     const int32_t max = (int32_t)((1U << (sat - 1U)) - 1U);
 712:Drivers/CMSIS/Include/cmsis_gcc.h ****     const int32_t min = -1 - max ;
 713:Drivers/CMSIS/Include/cmsis_gcc.h ****     if (val > max)
 714:Drivers/CMSIS/Include/cmsis_gcc.h ****     {
 715:Drivers/CMSIS/Include/cmsis_gcc.h ****       return max;
 716:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 717:Drivers/CMSIS/Include/cmsis_gcc.h ****     else if (val < min)
 718:Drivers/CMSIS/Include/cmsis_gcc.h ****     {
 719:Drivers/CMSIS/Include/cmsis_gcc.h ****       return min;
 720:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 721:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 722:Drivers/CMSIS/Include/cmsis_gcc.h ****   return val;
 723:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 724:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 725:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 726:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Unsigned Saturate
 727:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Saturates an unsigned value.
 728:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to be saturated
 729:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    sat  Bit position to saturate to (0..31)
 730:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             Saturated value
 731:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 732:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __USAT(int32_t val, uint32_t sat)
 733:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 734:Drivers/CMSIS/Include/cmsis_gcc.h ****   if (sat <= 31U)
 735:Drivers/CMSIS/Include/cmsis_gcc.h ****   {
 736:Drivers/CMSIS/Include/cmsis_gcc.h ****     const uint32_t max = ((1U << sat) - 1U);
 737:Drivers/CMSIS/Include/cmsis_gcc.h ****     if (val > (int32_t)max)
 738:Drivers/CMSIS/Include/cmsis_gcc.h ****     {
 739:Drivers/CMSIS/Include/cmsis_gcc.h ****       return max;
 740:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 741:Drivers/CMSIS/Include/cmsis_gcc.h ****     else if (val < 0)
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 52


 742:Drivers/CMSIS/Include/cmsis_gcc.h ****     {
 743:Drivers/CMSIS/Include/cmsis_gcc.h ****       return 0U;
 744:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 745:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 746:Drivers/CMSIS/Include/cmsis_gcc.h ****   return (uint32_t)val;
 747:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 748:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 749:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif /* ((defined (__ARM_ARCH_7M__      ) && (__ARM_ARCH_7M__      == 1)) || \
 750:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_7EM__     ) && (__ARM_ARCH_7EM__     == 1)) || \
 751:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1))    ) */
 752:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 753:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 754:Drivers/CMSIS/Include/cmsis_gcc.h **** #if ((defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1)) || \
 755:Drivers/CMSIS/Include/cmsis_gcc.h ****      (defined (__ARM_ARCH_8M_BASE__ ) && (__ARM_ARCH_8M_BASE__ == 1))    )
 756:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 757:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire (8 bit)
 758:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDAB instruction for 8 bit value.
 759:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 760:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             value of type uint8_t at (*ptr)
 761:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 762:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint8_t __LDAB(volatile uint8_t *ptr)
 763:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 764:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 765:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 766:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldab %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 767:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint8_t) result);
 768:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 769:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 770:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 771:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 772:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire (16 bit)
 773:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDAH instruction for 16 bit values.
 774:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 775:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint16_t at (*ptr)
 776:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 777:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint16_t __LDAH(volatile uint16_t *ptr)
 778:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 779:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 780:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 781:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldah %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 782:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint16_t) result);
 783:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 784:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 785:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 786:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 787:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire (32 bit)
 788:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDA instruction for 32 bit values.
 789:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 790:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint32_t at (*ptr)
 791:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 792:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __LDA(volatile uint32_t *ptr)
 793:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 794:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 795:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 796:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("lda %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 797:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 798:Drivers/CMSIS/Include/cmsis_gcc.h **** }
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 53


 799:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 800:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 801:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 802:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release (8 bit)
 803:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STLB instruction for 8 bit values.
 804:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 805:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 806:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 807:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STLB(uint8_t value, volatile uint8_t *ptr)
 808:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 809:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stlb %1, %0" : "=Q" (*ptr) : "r" ((uint32_t)value) : "memory" );
 810:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 811:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 812:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 813:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 814:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release (16 bit)
 815:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STLH instruction for 16 bit values.
 816:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 817:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 818:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 819:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STLH(uint16_t value, volatile uint16_t *ptr)
 820:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 821:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stlh %1, %0" : "=Q" (*ptr) : "r" ((uint32_t)value) : "memory" );
 822:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 823:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 824:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 825:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 826:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release (32 bit)
 827:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STL instruction for 32 bit values.
 828:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 829:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 830:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 831:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __STL(uint32_t value, volatile uint32_t *ptr)
 832:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 833:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stl %1, %0" : "=Q" (*ptr) : "r" ((uint32_t)value) : "memory" );
 834:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 835:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 836:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 837:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 838:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire Exclusive (8 bit)
 839:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDAB exclusive instruction for 8 bit value.
 840:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 841:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return             value of type uint8_t at (*ptr)
 842:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 843:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint8_t __LDAEXB(volatile uint8_t *ptr)
 844:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 845:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 846:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 847:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldaexb %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 848:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint8_t) result);
 849:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 850:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 851:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 852:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 853:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire Exclusive (16 bit)
 854:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDAH exclusive instruction for 16 bit values.
 855:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 54


 856:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint16_t at (*ptr)
 857:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 858:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint16_t __LDAEXH(volatile uint16_t *ptr)
 859:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 860:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 861:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 862:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldaexh %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 863:Drivers/CMSIS/Include/cmsis_gcc.h ****    return ((uint16_t) result);
 864:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 865:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 866:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 867:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 868:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Load-Acquire Exclusive (32 bit)
 869:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a LDA exclusive instruction for 32 bit values.
 870:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to data
 871:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return        value of type uint32_t at (*ptr)
 872:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 873:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __LDAEX(volatile uint32_t *ptr)
 874:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 875:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t result;
 876:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 877:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("ldaex %0, %1" : "=r" (result) : "Q" (*ptr) : "memory" );
 878:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 879:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 880:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 881:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 882:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 883:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release Exclusive (8 bit)
 884:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STLB exclusive instruction for 8 bit values.
 885:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 886:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 887:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 888:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 889:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 890:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STLEXB(uint8_t value, volatile uint8_t *ptr)
 891:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 892:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 893:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 894:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stlexb %0, %2, %1" : "=&r" (result), "=Q" (*ptr) : "r" ((uint32_t)value) : "mem
 895:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 896:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 897:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 898:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 899:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 900:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release Exclusive (16 bit)
 901:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STLH exclusive instruction for 16 bit values.
 902:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 903:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 904:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 905:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 906:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 907:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STLEXH(uint16_t value, volatile uint16_t *ptr)
 908:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 909:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 910:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 911:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stlexh %0, %2, %1" : "=&r" (result), "=Q" (*ptr) : "r" ((uint32_t)value) : "mem
 912:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 55


 913:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 914:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 915:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 916:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 917:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Store-Release Exclusive (32 bit)
 918:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Executes a STL exclusive instruction for 32 bit values.
 919:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]  value  Value to store
 920:Drivers/CMSIS/Include/cmsis_gcc.h ****   \param [in]    ptr  Pointer to location
 921:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          0  Function succeeded
 922:Drivers/CMSIS/Include/cmsis_gcc.h ****   \return          1  Function failed
 923:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 924:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE uint32_t __STLEX(uint32_t value, volatile uint32_t *ptr)
 925:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 926:Drivers/CMSIS/Include/cmsis_gcc.h ****    uint32_t result;
 927:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 928:Drivers/CMSIS/Include/cmsis_gcc.h ****    __ASM volatile ("stlex %0, %2, %1" : "=&r" (result), "=Q" (*ptr) : "r" ((uint32_t)value) : "memo
 929:Drivers/CMSIS/Include/cmsis_gcc.h ****    return(result);
 930:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 931:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 932:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif /* ((defined (__ARM_ARCH_8M_MAIN__ ) && (__ARM_ARCH_8M_MAIN__ == 1)) || \
 933:Drivers/CMSIS/Include/cmsis_gcc.h ****            (defined (__ARM_ARCH_8M_BASE__ ) && (__ARM_ARCH_8M_BASE__ == 1))    ) */
 934:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 935:Drivers/CMSIS/Include/cmsis_gcc.h **** /*@}*/ /* end of group CMSIS_Core_InstructionInterface */
 936:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 937:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 938:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 939:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 940:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 941:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 942:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 943:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 944:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 945:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 946:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing special-purpose register PRIMASK.
 947:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 948:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 949:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 950:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 951:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 952:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 953:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 954:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 955:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 956:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 957:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting special-purpose register PRIMASK.
 958:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 959:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 960:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 1372              		.loc 2 960 27 view .LVU311
 1373              	.LBB13:
 961:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 962:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 1374              		.loc 2 962 3 view .LVU312
 1375              		.syntax unified
 1376              	@ 962 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1377 0000 72B6     		cpsid i
 1378              	@ 0 "" 2
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 56


 1379              		.thumb
 1380              		.syntax unified
 1381              	.L117:
 1382              	.LBE13:
 1383              	.LBE12:
 575:Core/Src/main.c ****     while (1)
 1384              		.loc 1 575 5 view .LVU313
 576:Core/Src/main.c ****     {
 577:Core/Src/main.c ****     }
 1385              		.loc 1 577 5 view .LVU314
 575:Core/Src/main.c ****     while (1)
 1386              		.loc 1 575 11 view .LVU315
 1387 0002 FEE7     		b	.L117
 1388              		.cfi_endproc
 1389              	.LFE147:
 1391              		.section	.text.SystemClock_Config,"ax",%progbits
 1392              		.align	1
 1393              		.global	SystemClock_Config
 1394              		.syntax unified
 1395              		.thumb
 1396              		.thumb_func
 1398              	SystemClock_Config:
 1399              	.LFB146:
 530:Core/Src/main.c ****     RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 1400              		.loc 1 530 1 view -0
 1401              		.cfi_startproc
 1402              		@ args = 0, pretend = 0, frame = 80
 1403              		@ frame_needed = 0, uses_anonymous_args = 0
 1404 0000 00B5     		push	{lr}
 1405              	.LCFI18:
 1406              		.cfi_def_cfa_offset 4
 1407              		.cfi_offset 14, -4
 1408 0002 95B0     		sub	sp, sp, #84
 1409              	.LCFI19:
 1410              		.cfi_def_cfa_offset 88
 531:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 1411              		.loc 1 531 5 view .LVU317
 531:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 1412              		.loc 1 531 24 is_stmt 0 view .LVU318
 1413 0004 3022     		movs	r2, #48
 1414 0006 0021     		movs	r1, #0
 1415 0008 08A8     		add	r0, sp, #32
 1416 000a FFF7FEFF 		bl	memset
 1417              	.LVL127:
 532:Core/Src/main.c **** 
 1418              		.loc 1 532 5 is_stmt 1 view .LVU319
 532:Core/Src/main.c **** 
 1419              		.loc 1 532 24 is_stmt 0 view .LVU320
 1420 000e 0023     		movs	r3, #0
 1421 0010 0393     		str	r3, [sp, #12]
 1422 0012 0493     		str	r3, [sp, #16]
 1423 0014 0593     		str	r3, [sp, #20]
 1424 0016 0693     		str	r3, [sp, #24]
 1425 0018 0793     		str	r3, [sp, #28]
 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1426              		.loc 1 534 5 is_stmt 1 view .LVU321
 1427              	.LBB14:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 57


 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1428              		.loc 1 534 5 view .LVU322
 1429 001a 0193     		str	r3, [sp, #4]
 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1430              		.loc 1 534 5 view .LVU323
 1431 001c 204A     		ldr	r2, .L124
 1432 001e 116C     		ldr	r1, [r2, #64]
 1433 0020 41F08051 		orr	r1, r1, #268435456
 1434 0024 1164     		str	r1, [r2, #64]
 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1435              		.loc 1 534 5 view .LVU324
 1436 0026 126C     		ldr	r2, [r2, #64]
 1437 0028 02F08052 		and	r2, r2, #268435456
 1438 002c 0192     		str	r2, [sp, #4]
 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1439              		.loc 1 534 5 view .LVU325
 1440 002e 019A     		ldr	r2, [sp, #4]
 1441              	.LBE14:
 534:Core/Src/main.c ****     __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
 1442              		.loc 1 534 5 view .LVU326
 535:Core/Src/main.c **** 
 1443              		.loc 1 535 5 view .LVU327
 1444              	.LBB15:
 535:Core/Src/main.c **** 
 1445              		.loc 1 535 5 view .LVU328
 1446 0030 0293     		str	r3, [sp, #8]
 535:Core/Src/main.c **** 
 1447              		.loc 1 535 5 view .LVU329
 1448 0032 1C4B     		ldr	r3, .L124+4
 1449 0034 1A68     		ldr	r2, [r3]
 1450 0036 42F44042 		orr	r2, r2, #49152
 1451 003a 1A60     		str	r2, [r3]
 535:Core/Src/main.c **** 
 1452              		.loc 1 535 5 view .LVU330
 1453 003c 1B68     		ldr	r3, [r3]
 1454 003e 03F44043 		and	r3, r3, #49152
 1455 0042 0293     		str	r3, [sp, #8]
 535:Core/Src/main.c **** 
 1456              		.loc 1 535 5 view .LVU331
 1457 0044 029B     		ldr	r3, [sp, #8]
 1458              	.LBE15:
 535:Core/Src/main.c **** 
 1459              		.loc 1 535 5 view .LVU332
 537:Core/Src/main.c ****     RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 1460              		.loc 1 537 5 view .LVU333
 537:Core/Src/main.c ****     RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 1461              		.loc 1 537 38 is_stmt 0 view .LVU334
 1462 0046 0123     		movs	r3, #1
 1463 0048 0893     		str	r3, [sp, #32]
 538:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 1464              		.loc 1 538 5 is_stmt 1 view .LVU335
 538:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 1465              		.loc 1 538 32 is_stmt 0 view .LVU336
 1466 004a 4FF48033 		mov	r3, #65536
 1467 004e 0993     		str	r3, [sp, #36]
 539:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 1468              		.loc 1 539 5 is_stmt 1 view .LVU337
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 58


 539:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 1469              		.loc 1 539 36 is_stmt 0 view .LVU338
 1470 0050 0223     		movs	r3, #2
 1471 0052 0E93     		str	r3, [sp, #56]
 540:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLM = 6;
 1472              		.loc 1 540 5 is_stmt 1 view .LVU339
 540:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLM = 6;
 1473              		.loc 1 540 37 is_stmt 0 view .LVU340
 1474 0054 4FF48002 		mov	r2, #4194304
 1475 0058 0F92     		str	r2, [sp, #60]
 541:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLN = 168;
 1476              		.loc 1 541 5 is_stmt 1 view .LVU341
 541:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLN = 168;
 1477              		.loc 1 541 32 is_stmt 0 view .LVU342
 1478 005a 0622     		movs	r2, #6
 1479 005c 1092     		str	r2, [sp, #64]
 542:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 1480              		.loc 1 542 5 is_stmt 1 view .LVU343
 542:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
 1481              		.loc 1 542 32 is_stmt 0 view .LVU344
 1482 005e A822     		movs	r2, #168
 1483 0060 1192     		str	r2, [sp, #68]
 543:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLQ = 4;
 1484              		.loc 1 543 5 is_stmt 1 view .LVU345
 543:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLQ = 4;
 1485              		.loc 1 543 32 is_stmt 0 view .LVU346
 1486 0062 1293     		str	r3, [sp, #72]
 544:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 1487              		.loc 1 544 5 is_stmt 1 view .LVU347
 544:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 1488              		.loc 1 544 32 is_stmt 0 view .LVU348
 1489 0064 0423     		movs	r3, #4
 1490 0066 1393     		str	r3, [sp, #76]
 545:Core/Src/main.c ****     {
 1491              		.loc 1 545 5 is_stmt 1 view .LVU349
 545:Core/Src/main.c ****     {
 1492              		.loc 1 545 9 is_stmt 0 view .LVU350
 1493 0068 08A8     		add	r0, sp, #32
 1494 006a FFF7FEFF 		bl	HAL_RCC_OscConfig
 1495              	.LVL128:
 545:Core/Src/main.c ****     {
 1496              		.loc 1 545 8 discriminator 1 view .LVU351
 1497 006e 98B9     		cbnz	r0, .L122
 550:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 1498              		.loc 1 550 5 is_stmt 1 view .LVU352
 550:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 1499              		.loc 1 550 33 is_stmt 0 view .LVU353
 1500 0070 0F23     		movs	r3, #15
 1501 0072 0393     		str	r3, [sp, #12]
 552:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 1502              		.loc 1 552 5 is_stmt 1 view .LVU354
 552:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 1503              		.loc 1 552 36 is_stmt 0 view .LVU355
 1504 0074 0223     		movs	r3, #2
 1505 0076 0493     		str	r3, [sp, #16]
 553:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
 1506              		.loc 1 553 5 is_stmt 1 view .LVU356
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 59


 553:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
 1507              		.loc 1 553 37 is_stmt 0 view .LVU357
 1508 0078 0023     		movs	r3, #0
 1509 007a 0593     		str	r3, [sp, #20]
 554:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;
 1510              		.loc 1 554 5 is_stmt 1 view .LVU358
 554:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;
 1511              		.loc 1 554 38 is_stmt 0 view .LVU359
 1512 007c 4FF4A053 		mov	r3, #5120
 1513 0080 0693     		str	r3, [sp, #24]
 555:Core/Src/main.c **** 
 1514              		.loc 1 555 5 is_stmt 1 view .LVU360
 555:Core/Src/main.c **** 
 1515              		.loc 1 555 38 is_stmt 0 view .LVU361
 1516 0082 4FF48053 		mov	r3, #4096
 1517 0086 0793     		str	r3, [sp, #28]
 557:Core/Src/main.c ****     {
 1518              		.loc 1 557 5 is_stmt 1 view .LVU362
 557:Core/Src/main.c ****     {
 1519              		.loc 1 557 9 is_stmt 0 view .LVU363
 1520 0088 0521     		movs	r1, #5
 1521 008a 03A8     		add	r0, sp, #12
 1522 008c FFF7FEFF 		bl	HAL_RCC_ClockConfig
 1523              	.LVL129:
 557:Core/Src/main.c ****     {
 1524              		.loc 1 557 8 discriminator 1 view .LVU364
 1525 0090 20B9     		cbnz	r0, .L123
 561:Core/Src/main.c **** 
 1526              		.loc 1 561 1 view .LVU365
 1527 0092 15B0     		add	sp, sp, #84
 1528              	.LCFI20:
 1529              		.cfi_remember_state
 1530              		.cfi_def_cfa_offset 4
 1531              		@ sp needed
 1532 0094 5DF804FB 		ldr	pc, [sp], #4
 1533              	.L122:
 1534              	.LCFI21:
 1535              		.cfi_restore_state
 547:Core/Src/main.c ****     }
 1536              		.loc 1 547 9 is_stmt 1 view .LVU366
 1537 0098 FFF7FEFF 		bl	Error_Handler
 1538              	.LVL130:
 1539              	.L123:
 559:Core/Src/main.c ****     }
 1540              		.loc 1 559 9 view .LVU367
 1541 009c FFF7FEFF 		bl	Error_Handler
 1542              	.LVL131:
 1543              	.L125:
 1544              		.align	2
 1545              	.L124:
 1546 00a0 00380240 		.word	1073887232
 1547 00a4 00700040 		.word	1073770496
 1548              		.cfi_endproc
 1549              	.LFE146:
 1551              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 1552              		.align	2
 1553              	.LC13:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 60


 1554 0000 4C6F7765 		.ascii	"Lower motor initial angle: %.1f\302\260\012\000"
 1554      72206D6F 
 1554      746F7220 
 1554      696E6974 
 1554      69616C20 
 1555              		.section	.text.main,"ax",%progbits
 1556              		.align	1
 1557              		.global	main
 1558              		.syntax unified
 1559              		.thumb
 1560              		.thumb_func
 1562              	main:
 1563              	.LFB145:
 457:Core/Src/main.c ****     /* USER CODE BEGIN 1 */
 1564              		.loc 1 457 1 view -0
 1565              		.cfi_startproc
 1566              		@ Volatile: function does not return.
 1567              		@ args = 0, pretend = 0, frame = 0
 1568              		@ frame_needed = 0, uses_anonymous_args = 0
 1569 0000 08B5     		push	{r3, lr}
 1570              	.LCFI22:
 1571              		.cfi_def_cfa_offset 8
 1572              		.cfi_offset 3, -8
 1573              		.cfi_offset 14, -4
 463:Core/Src/main.c ****     SystemClock_Config();
 1574              		.loc 1 463 5 view .LVU369
 1575 0002 FFF7FEFF 		bl	HAL_Init
 1576              	.LVL132:
 464:Core/Src/main.c ****     MX_GPIO_Init();
 1577              		.loc 1 464 5 view .LVU370
 1578 0006 FFF7FEFF 		bl	SystemClock_Config
 1579              	.LVL133:
 465:Core/Src/main.c ****     MX_CAN1_Init();
 1580              		.loc 1 465 5 view .LVU371
 1581 000a FFF7FEFF 		bl	MX_GPIO_Init
 1582              	.LVL134:
 466:Core/Src/main.c ****     
 1583              		.loc 1 466 5 view .LVU372
 1584 000e FFF7FEFF 		bl	MX_CAN1_Init
 1585              	.LVL135:
 471:Core/Src/main.c ****     BSP_CAN_Init();
 1586              		.loc 1 471 5 view .LVU373
 1587 0012 FFF7FEFF 		bl	Motor_Init_All
 1588              	.LVL136:
 472:Core/Src/main.c ****     
 1589              		.loc 1 472 5 view .LVU374
 1590 0016 FFF7FEFF 		bl	BSP_CAN_Init
 1591              	.LVL137:
 475:Core/Src/main.c ****     printf("Lower motor initial angle: %.1fÂ°\n", lower_motor_initial_angle);
 1592              		.loc 1 475 5 view .LVU375
 475:Core/Src/main.c ****     printf("Lower motor initial angle: %.1fÂ°\n", lower_motor_initial_angle);
 1593              		.loc 1 475 64 is_stmt 0 view .LVU376
 1594 001a 254C     		ldr	r4, .L135
 1595 001c D4F80002 		ldr	r0, [r4, #512]	@ float
 475:Core/Src/main.c ****     printf("Lower motor initial angle: %.1fÂ°\n", lower_motor_initial_angle);
 1596              		.loc 1 475 31 view .LVU377
 1597 0020 244B     		ldr	r3, .L135+4
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 61


 1598 0022 1860     		str	r0, [r3]	@ float
 476:Core/Src/main.c ****     
 1599              		.loc 1 476 5 is_stmt 1 view .LVU378
 1600 0024 FFF7FEFF 		bl	__aeabi_f2d
 1601              	.LVL138:
 1602 0028 0246     		mov	r2, r0
 1603 002a 0B46     		mov	r3, r1
 1604 002c 2248     		ldr	r0, .L135+8
 1605 002e FFF7FEFF 		bl	printf
 1606              	.LVL139:
 479:Core/Src/main.c ****     Motor_Set_Target(LOWER_MOTOR_ID, MOTOR_MODE_CURRENT_SPEED, LOWER_MOTOR_SPEED);
 1607              		.loc 1 479 5 view .LVU379
 1608 0032 B3EE0E0A 		vmov.f32	s0, #3.0e+1
 1609 0036 0121     		movs	r1, #1
 1610 0038 0420     		movs	r0, #4
 1611 003a FFF7FEFF 		bl	Motor_Set_Target
 1612              	.LVL140:
 480:Core/Src/main.c ****     
 1613              		.loc 1 480 5 view .LVU380
 1614 003e 9FED1F0A 		vldr.32	s0, .L135+12
 1615 0042 0121     		movs	r1, #1
 1616 0044 0320     		movs	r0, #3
 1617 0046 FFF7FEFF 		bl	Motor_Set_Target
 1618              	.LVL141:
 483:Core/Src/main.c ****     gm6020_motors[3].gravity_gain = 0.0f;
 1619              		.loc 1 483 5 view .LVU381
 483:Core/Src/main.c ****     gm6020_motors[3].gravity_gain = 0.0f;
 1620              		.loc 1 483 34 is_stmt 0 view .LVU382
 1621 004a 4FF48053 		mov	r3, #4096
 1622 004e A4F8D633 		strh	r3, [r4, #982]	@ movhi
 484:Core/Src/main.c ****     /* USER CODE END 2 */
 1623              		.loc 1 484 5 is_stmt 1 view .LVU383
 484:Core/Src/main.c ****     /* USER CODE END 2 */
 1624              		.loc 1 484 35 is_stmt 0 view .LVU384
 1625 0052 0023     		movs	r3, #0
 1626 0054 C4F8D833 		str	r3, [r4, #984]	@ float
 1627 0058 0CE0     		b	.L132
 1628              	.L128:
 1629              	.LBB16:
 505:Core/Src/main.c ****             }
 1630              		.loc 1 505 17 is_stmt 1 view .LVU385
 1631 005a FFF7FEFF 		bl	Update_Lower_Motor_Control
 1632              	.LVL142:
 1633              	.L129:
 509:Core/Src/main.c ****                 current_mode == MODE_UPPER_MOVING) {
 1634              		.loc 1 509 13 view .LVU386
 509:Core/Src/main.c ****                 current_mode == MODE_UPPER_MOVING) {
 1635              		.loc 1 509 50 is_stmt 0 view .LVU387
 1636 005e 184B     		ldr	r3, .L135+16
 1637 0060 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 509:Core/Src/main.c ****                 current_mode == MODE_UPPER_MOVING) {
 1638              		.loc 1 509 16 view .LVU388
 1639 0062 012B     		cmp	r3, #1
 1640 0064 1CD9     		bls	.L134
 513:Core/Src/main.c ****             }
 1641              		.loc 1 513 17 is_stmt 1 view .LVU389
 1642 0066 FFF7FEFF 		bl	Reset_Upper_Motor_Position
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 62


 1643              	.LVL143:
 1644              	.L131:
 517:Core/Src/main.c ****         }
 1645              		.loc 1 517 13 view .LVU390
 1646 006a FFF7FEFF 		bl	Motor_Control_Loop
 1647              	.LVL144:
 1648              	.L127:
 519:Core/Src/main.c ****         /* USER CODE BEGIN 3 */
 1649              		.loc 1 519 9 view .LVU391
 1650 006e 0120     		movs	r0, #1
 1651 0070 FFF7FEFF 		bl	HAL_Delay
 1652              	.LVL145:
 1653              	.LBE16:
 489:Core/Src/main.c ****     {
 1654              		.loc 1 489 11 view .LVU392
 1655              	.L132:
 489:Core/Src/main.c ****     {
 1656              		.loc 1 489 5 view .LVU393
 1657              	.LBB17:
 492:Core/Src/main.c ****         if (HAL_GetTick() - last_update >= 5) {
 1658              		.loc 1 492 9 view .LVU394
 493:Core/Src/main.c ****             last_update = HAL_GetTick();
 1659              		.loc 1 493 9 view .LVU395
 493:Core/Src/main.c ****             last_update = HAL_GetTick();
 1660              		.loc 1 493 13 is_stmt 0 view .LVU396
 1661 0074 FFF7FEFF 		bl	HAL_GetTick
 1662              	.LVL146:
 493:Core/Src/main.c ****             last_update = HAL_GetTick();
 1663              		.loc 1 493 27 discriminator 1 view .LVU397
 1664 0078 124B     		ldr	r3, .L135+20
 1665 007a 1B68     		ldr	r3, [r3]
 1666 007c C01A     		subs	r0, r0, r3
 493:Core/Src/main.c ****             last_update = HAL_GetTick();
 1667              		.loc 1 493 12 discriminator 1 view .LVU398
 1668 007e 0428     		cmp	r0, #4
 1669 0080 F5D9     		bls	.L127
 494:Core/Src/main.c ****             
 1670              		.loc 1 494 13 is_stmt 1 view .LVU399
 494:Core/Src/main.c ****             
 1671              		.loc 1 494 27 is_stmt 0 view .LVU400
 1672 0082 FFF7FEFF 		bl	HAL_GetTick
 1673              	.LVL147:
 494:Core/Src/main.c ****             
 1674              		.loc 1 494 25 discriminator 1 view .LVU401
 1675 0086 0F4B     		ldr	r3, .L135+20
 1676 0088 1860     		str	r0, [r3]
 497:Core/Src/main.c ****             
 1677              		.loc 1 497 13 is_stmt 1 view .LVU402
 1678 008a FFF7FEFF 		bl	Check_Key_Inputs
 1679              	.LVL148:
 500:Core/Src/main.c ****             
 1680              		.loc 1 500 13 view .LVU403
 1681 008e FFF7FEFF 		bl	Process_Mode_Transition
 1682              	.LVL149:
 503:Core/Src/main.c ****                 current_mode == MODE_LOWER_MOVING) {
 1683              		.loc 1 503 13 view .LVU404
 503:Core/Src/main.c ****                 current_mode == MODE_LOWER_MOVING) {
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 63


 1684              		.loc 1 503 30 is_stmt 0 view .LVU405
 1685 0092 0B4B     		ldr	r3, .L135+16
 1686 0094 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 503:Core/Src/main.c ****                 current_mode == MODE_LOWER_MOVING) {
 1687              		.loc 1 503 16 view .LVU406
 1688 0096 002B     		cmp	r3, #0
 1689 0098 DFD0     		beq	.L128
 503:Core/Src/main.c ****                 current_mode == MODE_LOWER_MOVING) {
 1690              		.loc 1 503 50 discriminator 1 view .LVU407
 1691 009a 022B     		cmp	r3, #2
 1692 009c DFD1     		bne	.L129
 1693 009e DCE7     		b	.L128
 1694              	.L134:
 511:Core/Src/main.c ****             } else {
 1695              		.loc 1 511 17 is_stmt 1 view .LVU408
 1696 00a0 B3EE0E0A 		vmov.f32	s0, #3.0e+1
 1697 00a4 0121     		movs	r1, #1
 1698 00a6 0420     		movs	r0, #4
 1699 00a8 FFF7FEFF 		bl	Motor_Set_Target
 1700              	.LVL150:
 1701 00ac DDE7     		b	.L131
 1702              	.L136:
 1703 00ae 00BF     		.align	2
 1704              	.L135:
 1705 00b0 00000000 		.word	gm6020_motors
 1706 00b4 00000000 		.word	lower_motor_initial_angle
 1707 00b8 00000000 		.word	.LC13
 1708 00bc 00004842 		.word	1112014848
 1709 00c0 00000000 		.word	current_mode
 1710 00c4 00000000 		.word	last_update.0
 1711              	.LBE17:
 1712              		.cfi_endproc
 1713              	.LFE145:
 1715              		.section	.bss.last_update.0,"aw",%nobits
 1716              		.align	2
 1719              	last_update.0:
 1720 0000 00000000 		.space	4
 1721              		.section	.bss.last_debug.1,"aw",%nobits
 1722              		.align	2
 1725              	last_debug.1:
 1726 0000 00000000 		.space	4
 1727              		.section	.bss.last_debug.2,"aw",%nobits
 1728              		.align	2
 1731              	last_debug.2:
 1732 0000 00000000 		.space	4
 1733              		.global	upper_motor_needs_reset
 1734              		.section	.bss.upper_motor_needs_reset,"aw",%nobits
 1737              	upper_motor_needs_reset:
 1738 0000 00       		.space	1
 1739              		.global	upper_motor_target_angle
 1740              		.section	.bss.upper_motor_target_angle,"aw",%nobits
 1741              		.align	2
 1744              	upper_motor_target_angle:
 1745 0000 00000000 		.space	4
 1746              		.global	transition_start_time
 1747              		.section	.bss.transition_start_time,"aw",%nobits
 1748              		.align	2
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 64


 1751              	transition_start_time:
 1752 0000 00000000 		.space	4
 1753              		.global	accumulated_angle
 1754              		.section	.bss.accumulated_angle,"aw",%nobits
 1755              		.align	2
 1758              	accumulated_angle:
 1759 0000 00000000 		.space	4
 1760              		.global	lower_state
 1761              		.section	.bss.lower_state,"aw",%nobits
 1764              	lower_state:
 1765 0000 00       		.space	1
 1766              		.global	lower_motor_speed
 1767              		.section	.data.lower_motor_speed,"aw"
 1768              		.align	2
 1771              	lower_motor_speed:
 1772 0000 00004842 		.word	1112014848
 1773              		.global	lower_motor_target_angle
 1774              		.section	.bss.lower_motor_target_angle,"aw",%nobits
 1775              		.align	2
 1778              	lower_motor_target_angle:
 1779 0000 00000000 		.space	4
 1780              		.global	lower_motor_initial_angle
 1781              		.section	.bss.lower_motor_initial_angle,"aw",%nobits
 1782              		.align	2
 1785              	lower_motor_initial_angle:
 1786 0000 00000000 		.space	4
 1787              		.global	lower_motor_state
 1788              		.section	.bss.lower_motor_state,"aw",%nobits
 1791              	lower_motor_state:
 1792 0000 00       		.space	1
 1793              		.global	MODE_TRANSITION_TIME
 1794              		.section	.rodata.MODE_TRANSITION_TIME,"a"
 1795              		.align	2
 1798              	MODE_TRANSITION_TIME:
 1799 0000 C8000000 		.word	200
 1800              		.global	mode_transition_start
 1801              		.section	.bss.mode_transition_start,"aw",%nobits
 1802              		.align	2
 1805              	mode_transition_start:
 1806 0000 00000000 		.space	4
 1807              		.global	last_key_press
 1808              		.section	.bss.last_key_press,"aw",%nobits
 1809              		.align	2
 1812              	last_key_press:
 1813 0000 00000000 		.space	4
 1814              		.global	last_mode
 1815              		.section	.bss.last_mode,"aw",%nobits
 1818              	last_mode:
 1819 0000 00       		.space	1
 1820              		.global	target_mode
 1821              		.section	.bss.target_mode,"aw",%nobits
 1824              	target_mode:
 1825 0000 00       		.space	1
 1826              		.global	current_mode
 1827              		.section	.bss.current_mode,"aw",%nobits
 1830              	current_mode:
 1831 0000 00       		.space	1
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 65


 1832              		.text
 1833              	.Letext0:
 1834              		.file 3 "C:/msys64/mingw64/arm-none-eabi/include/machine/_default_types.h"
 1835              		.file 4 "C:/msys64/mingw64/arm-none-eabi/include/sys/_stdint.h"
 1836              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f427xx.h"
 1837              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1838              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc_ex.h"
 1839              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
 1840              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1841              		.file 10 "App/Inc/pid.h"
 1842              		.file 11 "App/Inc/motor_control.h"
 1843              		.file 12 "App/Inc/can_bsp.h"
 1844              		.file 13 "Core/Inc/can.h"
 1845              		.file 14 "Core/Inc/gpio.h"
 1846              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1847              		.file 16 "C:/msys64/mingw64/arm-none-eabi/include/stdio.h"
 1848              		.file 17 "<built-in>"
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 66


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:22     .rodata.Return_Lower_Motor_To_Initial_Position.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:27     .text.Return_Lower_Motor_To_Initial_Position:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:33     .text.Return_Lower_Motor_To_Initial_Position:00000000 Return_Lower_Motor_To_Initial_Position
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:90     .text.Return_Lower_Motor_To_Initial_Position:0000003c $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1791   .bss.lower_motor_state:00000000 lower_motor_state
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1785   .bss.lower_motor_initial_angle:00000000 lower_motor_initial_angle
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1778   .bss.lower_motor_target_angle:00000000 lower_motor_target_angle
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:99     .rodata.Reset_Upper_Motor_Position.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:107    .text.Reset_Upper_Motor_Position:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:113    .text.Reset_Upper_Motor_Position:00000000 Reset_Upper_Motor_Position
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:301    .text.Reset_Upper_Motor_Position:000000ec $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1737   .bss.upper_motor_needs_reset:00000000 upper_motor_needs_reset
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1744   .bss.upper_motor_target_angle:00000000 upper_motor_target_angle
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1731   .bss.last_debug.2:00000000 last_debug.2
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:316    .text.Configure_Motors_For_Mode:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:322    .text.Configure_Motors_For_Mode:00000000 Configure_Motors_For_Mode
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:340    .text.Configure_Motors_For_Mode:0000000a $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:344    .text.Configure_Motors_For_Mode:0000000e $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:429    .text.Configure_Motors_For_Mode:00000078 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:436    .rodata.Process_Mode_Transition.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:440    .text.Process_Mode_Transition:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:446    .text.Process_Mode_Transition:00000000 Process_Mode_Transition
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:499    .text.Process_Mode_Transition:00000030 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1830   .bss.current_mode:00000000 current_mode
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1824   .bss.target_mode:00000000 target_mode
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1805   .bss.mode_transition_start:00000000 mode_transition_start
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:507    .rodata.Brake_Upper_Motor.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:511    .text.Brake_Upper_Motor:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:517    .text.Brake_Upper_Motor:00000000 Brake_Upper_Motor
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:567    .text.Brake_Upper_Motor:0000002c $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:576    .text.Prepare_Mode_Transition:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:582    .text.Prepare_Mode_Transition:00000000 Prepare_Mode_Transition
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:603    .text.Prepare_Mode_Transition:0000000a $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:607    .text.Prepare_Mode_Transition:0000000e $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:693    .text.Prepare_Mode_Transition:00000068 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:700    .rodata.Check_Key_Inputs.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:704    .text.Check_Key_Inputs:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:710    .text.Check_Key_Inputs:00000000 Check_Key_Inputs
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:797    .text.Check_Key_Inputs:00000058 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1812   .bss.last_key_press:00000000 last_key_press
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:807    .rodata.Update_Lower_Motor_Control.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:831    .text.Update_Lower_Motor_Control:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:837    .text.Update_Lower_Motor_Control:00000000 Update_Lower_Motor_Control
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:888    .text.Update_Lower_Motor_Control:00000030 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:892    .text.Update_Lower_Motor_Control:00000034 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1326   .text.Update_Lower_Motor_Control:00000280 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1758   .bss.accumulated_angle:00000000 accumulated_angle
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1764   .bss.lower_state:00000000 lower_state
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1751   .bss.transition_start_time:00000000 transition_start_time
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1725   .bss.last_debug.1:00000000 last_debug.1
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1354   .text.Error_Handler:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1360   .text.Error_Handler:00000000 Error_Handler
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1392   .text.SystemClock_Config:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1398   .text.SystemClock_Config:00000000 SystemClock_Config
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1546   .text.SystemClock_Config:000000a0 $d
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s 			page 67


C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1552   .rodata.main.str1.4:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1556   .text.main:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1562   .text.main:00000000 main
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1705   .text.main:000000b0 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1719   .bss.last_update.0:00000000 last_update.0
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1716   .bss.last_update.0:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1722   .bss.last_debug.1:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1728   .bss.last_debug.2:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1738   .bss.upper_motor_needs_reset:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1741   .bss.upper_motor_target_angle:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1748   .bss.transition_start_time:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1755   .bss.accumulated_angle:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1765   .bss.lower_state:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1771   .data.lower_motor_speed:00000000 lower_motor_speed
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1768   .data.lower_motor_speed:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1775   .bss.lower_motor_target_angle:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1782   .bss.lower_motor_initial_angle:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1792   .bss.lower_motor_state:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1798   .rodata.MODE_TRANSITION_TIME:00000000 MODE_TRANSITION_TIME
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1795   .rodata.MODE_TRANSITION_TIME:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1802   .bss.mode_transition_start:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1809   .bss.last_key_press:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1818   .bss.last_mode:00000000 last_mode
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1819   .bss.last_mode:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1825   .bss.target_mode:00000000 $d
C:\Users\wxwsyzh\AppData\Local\Temp\ccRiYsbd.s:1831   .bss.current_mode:00000000 $d

UNDEFINED SYMBOLS
__aeabi_f2d
Motor_Set_Target
printf
PID_Clear
gm6020_motors
HAL_GetTick
PID_Init
puts
HAL_GPIO_ReadPin
PID_Calc
memset
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_Init
MX_GPIO_Init
MX_CAN1_Init
Motor_Init_All
BSP_CAN_Init
Motor_Control_Loop
HAL_Delay
