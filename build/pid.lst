ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"pid.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "App/Src/pid.c"
  20              		.section	.text.PID_Clear,"ax",%progbits
  21              		.align	1
  22              		.global	PID_Clear
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	PID_Clear:
  28              	.LVL0:
  29              	.LFB1:
   1:App/Src/pid.c **** /**
   2:App/Src/pid.c ****  * @file pid.c
   3:App/Src/pid.c ****  * @brief 通用 PID 实现 (融合了积分分离 + 微分低通滤波)
   4:App/Src/pid.c ****  */
   5:App/Src/pid.c **** 
   6:App/Src/pid.c **** #include "pid.h"
   7:App/Src/pid.c **** #include <math.h> // 需要用到 fabsf
   8:App/Src/pid.c **** 
   9:App/Src/pid.c **** /**
  10:App/Src/pid.c ****  * @brief 初始化 PID (保持 pid2 接口)
  11:App/Src/pid.c ****  * @note  新增的积分分离和滤波功能默认初始化为 0 (禁用)。
  12:App/Src/pid.c ****  *        如果需要使用，请在 Init 后手动修改结构体成员：
  13:App/Src/pid.c ****  *        pid.I_Separation_Thresh = value;
  14:App/Src/pid.c ****  *        pid.LPF_RC = value;
  15:App/Src/pid.c ****  */
  16:App/Src/pid.c **** void PID_Init(PID_TypeDef *pid, float kp, float ki, float kd, float max_out, float max_iout,float d
  17:App/Src/pid.c ****     if (!pid) return;
  18:App/Src/pid.c **** 
  19:App/Src/pid.c ****     // 1. 初始化基本参数
  20:App/Src/pid.c ****     pid->Kp = kp;
  21:App/Src/pid.c ****     pid->Ki = ki;
  22:App/Src/pid.c ****     pid->Kd = kd;
  23:App/Src/pid.c ****     pid->max_out = max_out;
  24:App/Src/pid.c ****     pid->max_iout = max_iout;
  25:App/Src/pid.c **** 
  26:App/Src/pid.c ****     pid->I_Separation_Thresh = 0.0f; // 0 表示不开启积分分离
  27:App/Src/pid.c ****     pid->LPF_RC = 0.3f;              // 0 表示不开启微分滤波
  28:App/Src/pid.c ****     pid->dead_zone = 0.0f;
  29:App/Src/pid.c ****     // 3. 清除状态
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 2


  30:App/Src/pid.c ****     PID_Clear(pid);
  31:App/Src/pid.c **** }
  32:App/Src/pid.c **** 
  33:App/Src/pid.c **** /**
  34:App/Src/pid.c ****  * @brief 清除 PID 状态
  35:App/Src/pid.c ****  */
  36:App/Src/pid.c **** void PID_Clear(PID_TypeDef *pid) {
  30              		.loc 1 36 34 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  37:App/Src/pid.c ****     if (!pid) return;
  35              		.loc 1 37 5 view .LVU1
  36              		.loc 1 37 8 is_stmt 0 view .LVU2
  37 0000 38B1     		cbz	r0, .L1
  38:App/Src/pid.c **** 
  39:App/Src/pid.c ****     pid->err = 0;
  38              		.loc 1 39 5 is_stmt 1 view .LVU3
  39              		.loc 1 39 14 is_stmt 0 view .LVU4
  40 0002 0022     		movs	r2, #0
  41 0004 C261     		str	r2, [r0, #28]	@ float
  40:App/Src/pid.c ****     pid->last_err = 0;
  42              		.loc 1 40 5 is_stmt 1 view .LVU5
  43              		.loc 1 40 19 is_stmt 0 view .LVU6
  44 0006 0262     		str	r2, [r0, #32]	@ float
  41:App/Src/pid.c ****     pid->Iout = 0;
  45              		.loc 1 41 5 is_stmt 1 view .LVU7
  46              		.loc 1 41 15 is_stmt 0 view .LVU8
  47 0008 8262     		str	r2, [r0, #40]	@ float
  42:App/Src/pid.c ****     pid->Pout = 0;
  48              		.loc 1 42 5 is_stmt 1 view .LVU9
  49              		.loc 1 42 15 is_stmt 0 view .LVU10
  50 000a 4262     		str	r2, [r0, #36]	@ float
  43:App/Src/pid.c ****     pid->Dout = 0;
  51              		.loc 1 43 5 is_stmt 1 view .LVU11
  52              		.loc 1 43 15 is_stmt 0 view .LVU12
  53 000c C262     		str	r2, [r0, #44]	@ float
  44:App/Src/pid.c ****     pid->out = 0;
  54              		.loc 1 44 5 is_stmt 1 view .LVU13
  55              		.loc 1 44 14 is_stmt 0 view .LVU14
  56 000e 0263     		str	r2, [r0, #48]	@ float
  45:App/Src/pid.c ****     
  46:App/Src/pid.c ****     // 清除新增的状态
  47:App/Src/pid.c ****     pid->last_derivative = 0;
  57              		.loc 1 47 5 is_stmt 1 view .LVU15
  58              		.loc 1 47 26 is_stmt 0 view .LVU16
  59 0010 C263     		str	r2, [r0, #60]	@ float
  60              	.L1:
  48:App/Src/pid.c **** }
  61              		.loc 1 48 1 view .LVU17
  62 0012 7047     		bx	lr
  63              		.cfi_endproc
  64              	.LFE1:
  66              		.section	.text.PID_Init,"ax",%progbits
  67              		.align	1
  68              		.global	PID_Init
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 3


  69              		.syntax unified
  70              		.thumb
  71              		.thumb_func
  73              	PID_Init:
  74              	.LVL1:
  75              	.LFB0:
  16:App/Src/pid.c ****     if (!pid) return;
  76              		.loc 1 16 110 is_stmt 1 view -0
  77              		.cfi_startproc
  78              		@ args = 0, pretend = 0, frame = 0
  79              		@ frame_needed = 0, uses_anonymous_args = 0
  17:App/Src/pid.c **** 
  80              		.loc 1 17 5 view .LVU19
  17:App/Src/pid.c **** 
  81              		.loc 1 17 8 is_stmt 0 view .LVU20
  82 0000 90B1     		cbz	r0, .L6
  16:App/Src/pid.c ****     if (!pid) return;
  83              		.loc 1 16 110 view .LVU21
  84 0002 08B5     		push	{r3, lr}
  85              	.LCFI0:
  86              		.cfi_def_cfa_offset 8
  87              		.cfi_offset 3, -8
  88              		.cfi_offset 14, -4
  20:App/Src/pid.c ****     pid->Ki = ki;
  89              		.loc 1 20 5 is_stmt 1 view .LVU22
  20:App/Src/pid.c ****     pid->Ki = ki;
  90              		.loc 1 20 13 is_stmt 0 view .LVU23
  91 0004 80ED000A 		vstr.32	s0, [r0]
  21:App/Src/pid.c ****     pid->Kd = kd;
  92              		.loc 1 21 5 is_stmt 1 view .LVU24
  21:App/Src/pid.c ****     pid->Kd = kd;
  93              		.loc 1 21 13 is_stmt 0 view .LVU25
  94 0008 C0ED010A 		vstr.32	s1, [r0, #4]
  22:App/Src/pid.c ****     pid->max_out = max_out;
  95              		.loc 1 22 5 is_stmt 1 view .LVU26
  22:App/Src/pid.c ****     pid->max_out = max_out;
  96              		.loc 1 22 13 is_stmt 0 view .LVU27
  97 000c 80ED021A 		vstr.32	s2, [r0, #8]
  23:App/Src/pid.c ****     pid->max_iout = max_iout;
  98              		.loc 1 23 5 is_stmt 1 view .LVU28
  23:App/Src/pid.c ****     pid->max_iout = max_iout;
  99              		.loc 1 23 18 is_stmt 0 view .LVU29
 100 0010 C0ED031A 		vstr.32	s3, [r0, #12]
  24:App/Src/pid.c **** 
 101              		.loc 1 24 5 is_stmt 1 view .LVU30
  24:App/Src/pid.c **** 
 102              		.loc 1 24 19 is_stmt 0 view .LVU31
 103 0014 80ED042A 		vstr.32	s4, [r0, #16]
  26:App/Src/pid.c ****     pid->LPF_RC = 0.3f;              // 0 表示不开启微分滤波
 104              		.loc 1 26 5 is_stmt 1 view .LVU32
  26:App/Src/pid.c ****     pid->LPF_RC = 0.3f;              // 0 表示不开启微分滤波
 105              		.loc 1 26 30 is_stmt 0 view .LVU33
 106 0018 0022     		movs	r2, #0
 107 001a 4263     		str	r2, [r0, #52]	@ float
  27:App/Src/pid.c ****     pid->dead_zone = 0.0f;
 108              		.loc 1 27 5 is_stmt 1 view .LVU34
  27:App/Src/pid.c ****     pid->dead_zone = 0.0f;
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 4


 109              		.loc 1 27 17 is_stmt 0 view .LVU35
 110 001c 0349     		ldr	r1, .L9
 111 001e 8163     		str	r1, [r0, #56]	@ float
  28:App/Src/pid.c ****     // 3. 清除状态
 112              		.loc 1 28 5 is_stmt 1 view .LVU36
  28:App/Src/pid.c ****     // 3. 清除状态
 113              		.loc 1 28 20 is_stmt 0 view .LVU37
 114 0020 0264     		str	r2, [r0, #64]	@ float
  30:App/Src/pid.c **** }
 115              		.loc 1 30 5 is_stmt 1 view .LVU38
 116 0022 FFF7FEFF 		bl	PID_Clear
 117              	.LVL2:
  31:App/Src/pid.c **** 
 118              		.loc 1 31 1 is_stmt 0 view .LVU39
 119 0026 08BD     		pop	{r3, pc}
 120              	.LVL3:
 121              	.L6:
 122              	.LCFI1:
 123              		.cfi_def_cfa_offset 0
 124              		.cfi_restore 3
 125              		.cfi_restore 14
  31:App/Src/pid.c **** 
 126              		.loc 1 31 1 view .LVU40
 127 0028 7047     		bx	lr
 128              	.L10:
 129 002a 00BF     		.align	2
 130              	.L9:
 131 002c 9A99993E 		.word	1050253722
 132              		.cfi_endproc
 133              	.LFE0:
 135              		.section	.text.PID_Calc,"ax",%progbits
 136              		.align	1
 137              		.global	PID_Calc
 138              		.syntax unified
 139              		.thumb
 140              		.thumb_func
 142              	PID_Calc:
 143              	.LVL4:
 144              	.LFB2:
  49:App/Src/pid.c **** 
  50:App/Src/pid.c **** /**
  51:App/Src/pid.c ****  * @brief 计算 PID 输出
  52:App/Src/pid.c ****  * @note  融合了 pid1 的积分分离和微分滤波逻辑
  53:App/Src/pid.c ****  */
  54:App/Src/pid.c **** float PID_Calc(PID_TypeDef *pid, float target, float feedback) {
 145              		.loc 1 54 64 is_stmt 1 view -0
 146              		.cfi_startproc
 147              		@ args = 0, pretend = 0, frame = 0
 148              		@ frame_needed = 0, uses_anonymous_args = 0
 149              		@ link register save eliminated.
  55:App/Src/pid.c ****     if (!pid) return 0.0f;
 150              		.loc 1 55 5 view .LVU42
 151              		.loc 1 55 8 is_stmt 0 view .LVU43
 152 0000 0346     		mov	r3, r0
 153 0002 0028     		cmp	r0, #0
 154 0004 00F0A380 		beq	.L30
  56:App/Src/pid.c **** 
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 5


  57:App/Src/pid.c ****     pid->set_point = target;
 155              		.loc 1 57 5 is_stmt 1 view .LVU44
 156              		.loc 1 57 20 is_stmt 0 view .LVU45
 157 0008 80ED050A 		vstr.32	s0, [r0, #20]
  58:App/Src/pid.c ****     pid->fdb = feedback;
 158              		.loc 1 58 5 is_stmt 1 view .LVU46
 159              		.loc 1 58 14 is_stmt 0 view .LVU47
 160 000c C0ED060A 		vstr.32	s1, [r0, #24]
  59:App/Src/pid.c ****     pid->err = pid->set_point - pid->fdb;
 161              		.loc 1 59 5 is_stmt 1 view .LVU48
 162              		.loc 1 59 31 is_stmt 0 view .LVU49
 163 0010 70EE600A 		vsub.f32	s1, s0, s1
 164              	.LVL5:
 165              		.loc 1 59 14 view .LVU50
 166 0014 C0ED070A 		vstr.32	s1, [r0, #28]
  60:App/Src/pid.c **** if (fabsf(pid->err) < pid->dead_zone) {
 167              		.loc 1 60 1 is_stmt 1 view .LVU51
 168              		.loc 1 60 5 is_stmt 0 view .LVU52
 169 0018 B0EEE07A 		vabs.f32	s14, s1
 170              		.loc 1 60 26 view .LVU53
 171 001c D0ED107A 		vldr.32	s15, [r0, #64]
 172              		.loc 1 60 4 view .LVU54
 173 0020 B4EEE77A 		vcmpe.f32	s14, s15
 174 0024 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 175 0028 56D4     		bmi	.L42
  61:App/Src/pid.c ****         pid->err = 0.0f;
  62:App/Src/pid.c ****         pid->Iout = 0.0f; // 清除积分
  63:App/Src/pid.c ****         pid->Pout = 0.0f;
  64:App/Src/pid.c ****         pid->Dout = 0.0f;
  65:App/Src/pid.c ****         
  66:App/Src/pid.c ****         // 更新历史误差（保持状态）
  67:App/Src/pid.c ****         pid->last_err = pid->err;
  68:App/Src/pid.c ****         pid->out = 0.0f;
  69:App/Src/pid.c ****         return 0.0f;
  70:App/Src/pid.c ****     }
  71:App/Src/pid.c ****     // === 1. 比例项 (P) ===
  72:App/Src/pid.c ****     pid->Pout = pid->Kp * pid->err;
 176              		.loc 1 72 5 is_stmt 1 view .LVU55
 177              		.loc 1 72 20 is_stmt 0 view .LVU56
 178 002a D0ED007A 		vldr.32	s15, [r0]
 179              		.loc 1 72 25 view .LVU57
 180 002e 60EEA77A 		vmul.f32	s15, s1, s15
 181              		.loc 1 72 15 view .LVU58
 182 0032 C0ED097A 		vstr.32	s15, [r0, #36]
  73:App/Src/pid.c ****     
  74:App/Src/pid.c ****     // === 2. 积分项 (I) - 加入积分分离逻辑 ===
  75:App/Src/pid.c ****     // 逻辑：如果阈值为0(默认) 或者 当前误差绝对值 < 阈值，则进行积分
  76:App/Src/pid.c ****     if (pid->I_Separation_Thresh == 0.0f || fabsf(pid->err) < pid->I_Separation_Thresh) {
 183              		.loc 1 76 5 is_stmt 1 view .LVU59
 184              		.loc 1 76 12 is_stmt 0 view .LVU60
 185 0036 D0ED0D6A 		vldr.32	s13, [r0, #52]
 186              		.loc 1 76 8 view .LVU61
 187 003a F5EE406A 		vcmp.f32	s13, #0
 188 003e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 189 0042 04D0     		beq	.L15
 190              		.loc 1 76 42 discriminator 1 view .LVU62
 191 0044 B4EEE67A 		vcmpe.f32	s14, s13
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 6


 192 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 193 004c 5DD5     		bpl	.L39
 194              	.L15:
  77:App/Src/pid.c ****         pid->Iout += pid->Ki * pid->err;
 195              		.loc 1 77 9 is_stmt 1 view .LVU63
 196              		.loc 1 77 12 is_stmt 0 view .LVU64
 197 004e 93ED0A7A 		vldr.32	s14, [r3, #40]
 198              		.loc 1 77 25 view .LVU65
 199 0052 D3ED016A 		vldr.32	s13, [r3, #4]
 200              		.loc 1 77 30 view .LVU66
 201 0056 60EEA66A 		vmul.f32	s13, s1, s13
 202              		.loc 1 77 19 view .LVU67
 203 005a 37EE267A 		vadd.f32	s14, s14, s13
 204 005e 83ED0A7A 		vstr.32	s14, [r3, #40]
  78:App/Src/pid.c ****         
  79:App/Src/pid.c ****         // 积分限幅
  80:App/Src/pid.c ****         if (pid->Iout > pid->max_iout) pid->Iout = pid->max_iout;
 205              		.loc 1 80 9 is_stmt 1 view .LVU68
 206              		.loc 1 80 28 is_stmt 0 view .LVU69
 207 0062 D3ED046A 		vldr.32	s13, [r3, #16]
 208              		.loc 1 80 12 view .LVU70
 209 0066 B4EEE67A 		vcmpe.f32	s14, s13
 210 006a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 211 006e 42DD     		ble	.L40
 212              		.loc 1 80 40 is_stmt 1 discriminator 1 view .LVU71
 213              		.loc 1 80 50 is_stmt 0 discriminator 1 view .LVU72
 214 0070 C3ED0A6A 		vstr.32	s13, [r3, #40]
 215              	.L20:
  81:App/Src/pid.c ****         else if (pid->Iout < -pid->max_iout) pid->Iout = -pid->max_iout;
  82:App/Src/pid.c ****     } else {
  83:App/Src/pid.c ****         // 误差过大，积分清零 (积分分离)
  84:App/Src/pid.c ****         pid->Iout = 0.0f;
  85:App/Src/pid.c ****     }
  86:App/Src/pid.c **** 
  87:App/Src/pid.c ****     // === 3. 微分项 (D) - 加入低通滤波逻辑 ===
  88:App/Src/pid.c ****     float raw_d = pid->err - pid->last_err; // 原始微分量
 216              		.loc 1 88 5 is_stmt 1 view .LVU73
 217              		.loc 1 88 33 is_stmt 0 view .LVU74
 218 0074 93ED087A 		vldr.32	s14, [r3, #32]
 219              		.loc 1 88 11 view .LVU75
 220 0078 30EEC77A 		vsub.f32	s14, s1, s14
 221              	.LVL6:
  89:App/Src/pid.c ****     
  90:App/Src/pid.c ****     if (pid->LPF_RC > 0.0f && pid->LPF_RC < 1.0f) {
 222              		.loc 1 90 5 is_stmt 1 view .LVU76
 223              		.loc 1 90 12 is_stmt 0 view .LVU77
 224 007c D3ED0E6A 		vldr.32	s13, [r3, #56]
 225              		.loc 1 90 8 view .LVU78
 226 0080 F5EEC06A 		vcmpe.f32	s13, #0
 227 0084 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 228 0088 06DD     		ble	.L22
 229              		.loc 1 90 28 discriminator 1 view .LVU79
 230 008a B7EE006A 		vmov.f32	s12, #1.0e+0
 231 008e F4EEC66A 		vcmpe.f32	s13, s12
 232 0092 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 233 0096 3BD4     		bmi	.L43
 234              	.L22:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 7


  91:App/Src/pid.c ****         // 启用滤波: D(k) = D(k-1)*(1-RC) + Raw_D*RC
  92:App/Src/pid.c ****         float current_derivative = pid->last_derivative * (1.0f - pid->LPF_RC) + raw_d * pid->LPF_R
  93:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
  94:App/Src/pid.c ****         pid->last_derivative = current_derivative; // 更新滤波后的微分状态
  95:App/Src/pid.c ****     } else {
  96:App/Src/pid.c ****         // 禁用滤波 (pid2 默认行为)
  97:App/Src/pid.c ****         pid->Dout = pid->Kd * raw_d;
 235              		.loc 1 97 9 is_stmt 1 view .LVU80
 236              		.loc 1 97 24 is_stmt 0 view .LVU81
 237 0098 D3ED026A 		vldr.32	s13, [r3, #8]
 238              		.loc 1 97 29 view .LVU82
 239 009c 66EE876A 		vmul.f32	s13, s13, s14
 240              		.loc 1 97 19 view .LVU83
 241 00a0 C3ED0B6A 		vstr.32	s13, [r3, #44]
  98:App/Src/pid.c ****         pid->last_derivative = raw_d; // 记录状态以便切换模式
 242              		.loc 1 98 9 is_stmt 1 view .LVU84
 243              		.loc 1 98 30 is_stmt 0 view .LVU85
 244 00a4 83ED0F7A 		vstr.32	s14, [r3, #60]
 245              	.LVL7:
 246              	.L25:
  99:App/Src/pid.c ****     }
 100:App/Src/pid.c **** 
 101:App/Src/pid.c ****     // === 4. 总输出计算 ===
 102:App/Src/pid.c ****     pid->out = pid->Pout + pid->Iout + pid->Dout;
 247              		.loc 1 102 5 is_stmt 1 view .LVU86
 248              		.loc 1 102 31 is_stmt 0 view .LVU87
 249 00a8 93ED0A7A 		vldr.32	s14, [r3, #40]
 250              		.loc 1 102 26 view .LVU88
 251 00ac 77EE877A 		vadd.f32	s15, s15, s14
 252              		.loc 1 102 43 view .LVU89
 253 00b0 93ED0B7A 		vldr.32	s14, [r3, #44]
 254              		.loc 1 102 38 view .LVU90
 255 00b4 77EE877A 		vadd.f32	s15, s15, s14
 256              		.loc 1 102 14 view .LVU91
 257 00b8 C3ED0C7A 		vstr.32	s15, [r3, #48]
 103:App/Src/pid.c **** 
 104:App/Src/pid.c ****     // 总输出限幅
 105:App/Src/pid.c ****     if (pid->out > pid->max_out) pid->out = pid->max_out;
 258              		.loc 1 105 5 is_stmt 1 view .LVU92
 259              		.loc 1 105 23 is_stmt 0 view .LVU93
 260 00bc 93ED037A 		vldr.32	s14, [r3, #12]
 261              		.loc 1 105 8 view .LVU94
 262 00c0 F4EEC77A 		vcmpe.f32	s15, s14
 263 00c4 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 264 00c8 37DD     		ble	.L41
 265              		.loc 1 105 34 is_stmt 1 discriminator 1 view .LVU95
 266              		.loc 1 105 43 is_stmt 0 discriminator 1 view .LVU96
 267 00ca 83ED0C7A 		vstr.32	s14, [r3, #48]
 268              	.L28:
 106:App/Src/pid.c ****     else if (pid->out < -pid->max_out) pid->out = -pid->max_out;
 107:App/Src/pid.c ****     
 108:App/Src/pid.c ****     // 更新历史误差
 109:App/Src/pid.c ****     pid->last_err = pid->err;
 269              		.loc 1 109 5 is_stmt 1 view .LVU97
 270              		.loc 1 109 19 is_stmt 0 view .LVU98
 271 00ce C3ED080A 		vstr.32	s1, [r3, #32]
 272              	.LVL8:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 8


 110:App/Src/pid.c **** 
 111:App/Src/pid.c ****     return pid->out;
 273              		.loc 1 111 5 is_stmt 1 view .LVU99
 274              		.loc 1 111 15 is_stmt 0 view .LVU100
 275 00d2 93ED0C0A 		vldr.32	s0, [r3, #48]
 276              	.LVL9:
 277              		.loc 1 111 15 view .LVU101
 278 00d6 7047     		bx	lr
 279              	.LVL10:
 280              	.L42:
  61:App/Src/pid.c ****         pid->Iout = 0.0f; // 清除积分
 281              		.loc 1 61 9 is_stmt 1 view .LVU102
  61:App/Src/pid.c ****         pid->Iout = 0.0f; // 清除积分
 282              		.loc 1 61 18 is_stmt 0 view .LVU103
 283 00d8 9FED1E0A 		vldr.32	s0, .L44
 284              	.LVL11:
  61:App/Src/pid.c ****         pid->Iout = 0.0f; // 清除积分
 285              		.loc 1 61 18 view .LVU104
 286 00dc 80ED070A 		vstr.32	s0, [r0, #28]
  62:App/Src/pid.c ****         pid->Pout = 0.0f;
 287              		.loc 1 62 9 is_stmt 1 view .LVU105
  62:App/Src/pid.c ****         pid->Pout = 0.0f;
 288              		.loc 1 62 19 is_stmt 0 view .LVU106
 289 00e0 80ED0A0A 		vstr.32	s0, [r0, #40]
  63:App/Src/pid.c ****         pid->Dout = 0.0f;
 290              		.loc 1 63 9 is_stmt 1 view .LVU107
  63:App/Src/pid.c ****         pid->Dout = 0.0f;
 291              		.loc 1 63 19 is_stmt 0 view .LVU108
 292 00e4 80ED090A 		vstr.32	s0, [r0, #36]
  64:App/Src/pid.c ****         
 293              		.loc 1 64 9 is_stmt 1 view .LVU109
  64:App/Src/pid.c ****         
 294              		.loc 1 64 19 is_stmt 0 view .LVU110
 295 00e8 80ED0B0A 		vstr.32	s0, [r0, #44]
  67:App/Src/pid.c ****         pid->out = 0.0f;
 296              		.loc 1 67 9 is_stmt 1 view .LVU111
  67:App/Src/pid.c ****         pid->out = 0.0f;
 297              		.loc 1 67 23 is_stmt 0 view .LVU112
 298 00ec 80ED080A 		vstr.32	s0, [r0, #32]
  68:App/Src/pid.c ****         return 0.0f;
 299              		.loc 1 68 9 is_stmt 1 view .LVU113
  68:App/Src/pid.c ****         return 0.0f;
 300              		.loc 1 68 18 is_stmt 0 view .LVU114
 301 00f0 80ED0C0A 		vstr.32	s0, [r0, #48]
  69:App/Src/pid.c ****     }
 302              		.loc 1 69 9 is_stmt 1 view .LVU115
  69:App/Src/pid.c ****     }
 303              		.loc 1 69 16 is_stmt 0 view .LVU116
 304 00f4 7047     		bx	lr
 305              	.LVL12:
 306              	.L40:
  81:App/Src/pid.c ****     } else {
 307              		.loc 1 81 14 is_stmt 1 view .LVU117
  81:App/Src/pid.c ****     } else {
 308              		.loc 1 81 30 is_stmt 0 view .LVU118
 309 00f6 F1EE666A 		vneg.f32	s13, s13
  81:App/Src/pid.c ****     } else {
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 9


 310              		.loc 1 81 17 view .LVU119
 311 00fa B4EEE67A 		vcmpe.f32	s14, s13
 312 00fe F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 313 0102 B7D5     		bpl	.L20
  81:App/Src/pid.c ****     } else {
 314              		.loc 1 81 46 is_stmt 1 discriminator 1 view .LVU120
  81:App/Src/pid.c ****     } else {
 315              		.loc 1 81 56 is_stmt 0 discriminator 1 view .LVU121
 316 0104 C3ED0A6A 		vstr.32	s13, [r3, #40]
 317 0108 B4E7     		b	.L20
 318              	.L39:
  84:App/Src/pid.c ****     }
 319              		.loc 1 84 9 is_stmt 1 view .LVU122
  84:App/Src/pid.c ****     }
 320              		.loc 1 84 19 is_stmt 0 view .LVU123
 321 010a 0022     		movs	r2, #0
 322 010c 8262     		str	r2, [r0, #40]	@ float
 323 010e B1E7     		b	.L20
 324              	.LVL13:
 325              	.L43:
 326              	.LBB2:
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 327              		.loc 1 92 9 is_stmt 1 view .LVU124
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 328              		.loc 1 92 39 is_stmt 0 view .LVU125
 329 0110 93ED0F6A 		vldr.32	s12, [r3, #60]
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 330              		.loc 1 92 65 view .LVU126
 331 0114 F7EE005A 		vmov.f32	s11, #1.0e+0
 332 0118 75EEE65A 		vsub.f32	s11, s11, s13
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 333              		.loc 1 92 57 view .LVU127
 334 011c 26EE256A 		vmul.f32	s12, s12, s11
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 335              		.loc 1 92 88 view .LVU128
 336 0120 66EE876A 		vmul.f32	s13, s13, s14
  92:App/Src/pid.c ****         pid->Dout = pid->Kd * current_derivative;
 337              		.loc 1 92 15 view .LVU129
 338 0124 36EE267A 		vadd.f32	s14, s12, s13
 339              	.LVL14:
  93:App/Src/pid.c ****         pid->last_derivative = current_derivative; // 更新滤波后的微分状态
 340              		.loc 1 93 9 is_stmt 1 view .LVU130
  93:App/Src/pid.c ****         pid->last_derivative = current_derivative; // 更新滤波后的微分状态
 341              		.loc 1 93 24 is_stmt 0 view .LVU131
 342 0128 D3ED026A 		vldr.32	s13, [r3, #8]
  93:App/Src/pid.c ****         pid->last_derivative = current_derivative; // 更新滤波后的微分状态
 343              		.loc 1 93 29 view .LVU132
 344 012c 66EE876A 		vmul.f32	s13, s13, s14
  93:App/Src/pid.c ****         pid->last_derivative = current_derivative; // 更新滤波后的微分状态
 345              		.loc 1 93 19 view .LVU133
 346 0130 C3ED0B6A 		vstr.32	s13, [r3, #44]
  94:App/Src/pid.c ****     } else {
 347              		.loc 1 94 9 is_stmt 1 view .LVU134
  94:App/Src/pid.c ****     } else {
 348              		.loc 1 94 30 is_stmt 0 view .LVU135
 349 0134 83ED0F7A 		vstr.32	s14, [r3, #60]
 350              	.LBE2:
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 10


  90:App/Src/pid.c ****         // 启用滤波: D(k) = D(k-1)*(1-RC) + Raw_D*RC
 351              		.loc 1 90 51 view .LVU136
 352 0138 B6E7     		b	.L25
 353              	.LVL15:
 354              	.L41:
 106:App/Src/pid.c ****     
 355              		.loc 1 106 10 is_stmt 1 view .LVU137
 106:App/Src/pid.c ****     
 356              		.loc 1 106 25 is_stmt 0 view .LVU138
 357 013a B1EE477A 		vneg.f32	s14, s14
 106:App/Src/pid.c ****     
 358              		.loc 1 106 13 view .LVU139
 359 013e F4EEC77A 		vcmpe.f32	s15, s14
 360 0142 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 361 0146 C2D5     		bpl	.L28
 106:App/Src/pid.c ****     
 362              		.loc 1 106 40 is_stmt 1 discriminator 1 view .LVU140
 106:App/Src/pid.c ****     
 363              		.loc 1 106 49 is_stmt 0 discriminator 1 view .LVU141
 364 0148 83ED0C7A 		vstr.32	s14, [r3, #48]
 365 014c BFE7     		b	.L28
 366              	.LVL16:
 367              	.L30:
  55:App/Src/pid.c **** 
 368              		.loc 1 55 22 discriminator 1 view .LVU142
 369 014e 9FED010A 		vldr.32	s0, .L44
 370              	.LVL17:
 112:App/Src/pid.c **** }...
 371              		.loc 1 112 1 view .LVU143
 372 0152 7047     		bx	lr
 373              	.L45:
 374              		.align	2
 375              	.L44:
 376 0154 00000000 		.word	0
 377              		.cfi_endproc
 378              	.LFE2:
 380              		.text
 381              	.Letext0:
 382              		.file 2 "App/Inc/pid.h"
ARM GAS  C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 pid.c
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:21     .text.PID_Clear:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:27     .text.PID_Clear:00000000 PID_Clear
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:67     .text.PID_Init:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:73     .text.PID_Init:00000000 PID_Init
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:131    .text.PID_Init:0000002c $d
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:136    .text.PID_Calc:00000000 $t
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:142    .text.PID_Calc:00000000 PID_Calc
C:\Users\wxwsyzh\AppData\Local\Temp\cchI81ZP.s:376    .text.PID_Calc:00000154 $d

NO UNDEFINED SYMBOLS
